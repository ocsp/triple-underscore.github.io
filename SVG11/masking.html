<!DOCTYPE html>
<html lang="ja">
<head>





	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title title="Clipping, Masking and Compositing">クリッピング, マスキング, 組成法 – SVG 1.1 （第２版）</title>
	<link rel="stylesheet" type="text/css" media="screen" href="style/svg-style.css">
	<link rel="stylesheet" href="style/W3C-REC.css">
</head><body>

<div class="header top">
<a href="index.html#minitoc">目次</a> ⋅
<a href="expanded-toc.html">詳細目次</a> ⋅
<a href="pservers.html">前章</a> ⋅
<a href="filters.html">次章</a> ⋅
<a href="eltindex.html">要素</a> ⋅
<a href="attindex.html">属性</a> ⋅
<a href="propidx.html">プロパティ</a>
</div>

<h1 title="14 Clipping, Masking and Compositing">14 クリッピング, マスキング, 組成法</h1>

<h2 title="Contents" id="toc">目次</h2>

<ul class="toc">
<li><a title="14.1 Introduction" href="masking.html#Introduction">
14.1 概要</a></li>
<li><a title="14.2 Simple alpha compositing" href="masking.html#SimpleAlphaBlending">
14.2 単純アルファ組成法</a></li>
<li><a title="14.3 Clipping paths" href="masking.html#ClippingPaths">
14.3 クリッピングパス</a>
<ul class="toc">
<li><a title="14.3.1 Introduction" href="masking.html#ClippingPathsIntro">
14.3.1 概要</a></li>
<li><a title="14.3.2 The initial clipping path" href="masking.html#InitialClippingPath">
14.3.2 初期クリッピングパス</a></li>
<li><a title="14.3.3 The ‘overflow’ and ‘clip’ properties" href="masking.html#OverflowAndClipProperties">
14.3.3 <span class="prop-name">overflow</span> と <span class="prop-name">clip</span> プロパティ</a></li>
<li><a title="14.3.4 Clip to viewport vs. clip to ‘viewBox’" href="masking.html#AutoClipAtViewportNotViewBox">
14.3.4 クリッピングパスをビューポートと <span class="attr-name">viewBox</span> のどちらに合わせるか</a></li>
<li><a title="14.3.5 Establishing a new clipping path: the ‘clipPath’ element" href="masking.html#EstablishingANewClippingPath">
14.3.5 新たなクリッピングパスの確立： <span class="element-name">clipPath</span> 要素</a></li>
<li><a title="14.3.6 Clipping paths, geometry, and pointer events" href="masking.html#clipPath-geometry">
14.3.6 クリッピングパス, 要素の幾何, ポインタイベント</a></li>
</ul></li>
<li><a title="14.4 Masking" href="masking.html#Masking">
14.4 マスキング</a></li>
<li><a title="14.5 Object and group opacity: the ‘opacity’ property" href="masking.html#ObjectAndGroupOpacityProperties">
14.5 オブジェクト不透明度とグループ不透明度： <span class="prop-name">opacity</span> プロパティ</a></li>
<li><a title="14.6 DOM interfaces" href="masking.html#DOMInterfaces">
14.6 DOM インタフェース</a>
<ul class="toc">
<li><a title="14.6.1 Interface SVGClipPathElement" href="masking.html#InterfaceSVGClipPathElement">
14.6.1 インタフェース SVGClipPathElement</a></li>
<li><a title="14.6.2 Interface SVGMaskElement" href="masking.html#InterfaceSVGMaskElement">
14.6.2 インタフェース SVGMaskElement</a></li></ul></li>
</ul>

<h2 title="14.1 Introduction" id="Introduction">14.1 概要</h2>

<p class="T">
SVG は次のようなクリッピング（ clipping ）とマスキング（ masking ）の機能をサポートする：
<span lang="en">
SVG supports the following clipping/masking features:
</span></p>


<ul>

<li class="T">
<a href="#ClippingPaths">クリッピングパス</a>
（ clipping paths ）は、
<a href="paths.html#PathElement"><span class="element-name">path</span></a>,
<a href="text.html#TextElement"><span class="element-name">text</span></a>,
<a href="intro.html#TermBasicShape">基本図形</a>
の任意の組み合わせにより、「内側」のものはすべて見えるが外側のものはすべて覆い隠す, （境界上でのアンチエイリアスを無視すれば）１ビットのマスクの外形線を提供する。
<span lang="en">
clipping paths, which uses any combination of ‘path’, ‘text’ and basic shapes to serve as the outline of a (in the absence of anti-aliasing) 1-bit mask, where everything on the "inside" of the outline is allowed to show through but everything on the outside is masked out
</span></li>

<li class="T">
<a href="#Masking">マスク</a>
（ mask ）は、
<a href="intro.html#TermGraphicsElement">グラフィックス要素</a>
または他のコンテナ要素を含むことができる
<a href="intro.html#TermContainerElement">コンテナ要素</a>
であり, 前景オブジェクトを現在の背景に組成するための半透明のマスクとして用いられるグラフィックの集合を定義する。
<span lang="en">
masks, which are container elements which can contain graphics elements or other container elements which define a set of graphics that is to be used as a semi-transparent mask for compositing foreground objects into the current background.
</span></li>
</ul>

<p class="T">
<a href="#ClippingPaths">クリッピングパス</a>
と
<a href="#Masking">マスキング</a>
における根本的な違いは、クリッピングパスは２値のマスク（ hard mask — すなわち, 境界上でのアンチエイリアスを無視するなら, 完全に不透明または透明な画素からなるシルエット）である一方、マスクは各画素の値が透明さの度合いを指示する画像からなることである。
すなわち, マスクにおいては、各画素の値は完全な透明から完全な不透明までの値をとり得る。
<span lang="en">
One key distinction between a clipping path and a mask is that clipping paths are hard masks (i.e., the silhouette consists of either fully opaque pixels or fully transparent pixels, with the possible exception of anti-aliasing along the edge of the silhouette) whereas masks consist of an image where each pixel value indicates the degree of transparency vs. opacity. In a mask, each pixel value can range from fully transparent to fully opaque.
</span></p>

<p class="T">
SVG は単純アルファ混色組成法のみサポートする（ 
<a href="#SimpleAlphaBlending">単純アルファ組成法</a>
を見よ）。
<span lang="en">
SVG supports only simple alpha blending compositing (see Simple Alpha Compositing).
</span></p>


<h2 title="14.2 Simple alpha compositing" id="SimpleAlphaBlending">14.2 単純アルファ組成法</h2>

<p class="T">
グラフィックス要素は、単純アルファ組成法を用いて，キャンバス上にすでに描画された要素と混色される。
結果におけるキャンバスの画素の色と不透明度は次の公式（すべての色値はアルファによる乗算済み）で与えられる：
<span lang="en">
Graphics elements are blended into the elements already rendered on the canvas using simple alpha compositing, in which the resulting color and opacity at any given pixel on the canvas is the result of the following formulas (all color values use premultiplied alpha):
</span></p>


<pre>Er, Eg, Eb    <span title="Element color value">要素の色値</span>
Ea            <span title="Element alpha value">要素のアルファ値</span>
Cr, Cg, Cb    <span title="Canvas color value (before blending)">キャンバスの色値（混色前）</span>
Ca            <span title="Canvas alpha value (before blending)">キャンバスのアルファ値（混色前）</span>
Cr', Cg', Cb' <span title="Canvas color value (after blending)">キャンバスの色値（混色後）</span>
Ca'           <span title="Canvas alpha value (after blending)">キャンバスのアルファ値（混色後）</span>
Ca' = 1 - (1 - Ea) * (1 - Ca)
Cr' = (1 - Ea) * Cr + Er
Cg' = (1 - Ea) * Cg + Eg
Cb' = (1 - Ea) * Cb + Eb
</pre>

<p class="T">
次の描画プロパティは、組成演算を行う色空間についての情報を提供し，組成演算に適用される：
<span lang="en">
The following rendering properties, which provide information about the color space in which to perform the compositing operations, apply to compositing operations:
</span></p>


<ul>
<li>
<a href="painting.html#ColorInterpolationProperty"><span class="prop-name">color-interpolation</span></a>
</li>
<li>
<a href="painting.html#ColorRenderingProperty"><span class="prop-name">color-rendering</span></a>
</li>
</ul>

<h2 title="14.3 Clipping paths" id="ClippingPaths">14.3 クリッピングパス</h2>

<h3 title="14.3.1 Introduction" id="ClippingPathsIntro">14.3.1 概要</h3>

<p class="T">
クリッピングパスは塗りを適用する領域を制限する。
概念的には、現在のクリッピングパスにより制限された領域の外側へは描画されない。
クリッピングパスは、（輪郭におけるアンチエイリアスを無視すれば）外側の画素はすべてアルファ値ゼロの黒色, 内側の画素はすべてアルファ値 1 の白色に設定された，マスクの一種と考えることができる 。
<span lang="en">
The clipping path restricts the region to which paint can be applied. Conceptually, any parts of the drawing that lie outside of the region bounded by the currently active clipping path are not drawn. A clipping path can be thought of as a mask wherein those pixels outside the clipping path are black with an alpha value of zero and those pixels inside the clipping path are white with an alpha value of one (with the possible exception of anti-aliasing along the edge of the silhouette).
</span></p>


<h3 title="14.3.2 The initial clipping path" id="InitialClippingPath">14.3.2 初期クリッピングパス</h3>

<p class="T">
<a href="struct.html#SVGElement"><span class="element-name">svg</span></a>
要素が文書のルート要素であるか, あるいは CSS や XSL のレイアウト規則に従ってレイアウトされている文書に埋めこまれている場合、 UA はその SVG 文書片に対する初期クリッピングパスを確立しなければならない。
初期クリッピングパスは、
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
, および
<a href="masking.html#ClipProperty"><span class="prop-name">clip</span></a>
プロパティをもとに， SVG-UA の追加の処理規則に従って確立される：
<span lang="en">
When an ‘svg’ element is either the root element in the document or is embedded within a document whose layout is determined according to the layout rules of CSS or XSL, then the user agent must establish an initial clipping path for the SVG document fragment. The ‘overflow’ and ‘clip’ properties along with additional SVG user agent processing rules determine the initial clipping path which the user agent establishes for the SVG document fragment:
</span></p>


<h3 title="14.3.3 The ‘overflow’
and ‘clip’ properties" id="OverflowAndClipProperties">14.3.3 <span class="prop-name">overflow</span> と <span class="prop-name">clip</span> プロパティ</h3>

    <div class="propdef">
      <dl><dt id="OverflowProperty"><span class="propdef-title prop-name">overflow</span></dt><dd>
          <table class="propinfo"><tbody>
<tr><th>値：</th><td>visible | hidden | scroll | auto |
<a class="noxref" href="http://www.w3.org/TR/2008/REC-CSS2-20080411/cascade.html#value-def-inherit"><span class="value-inst-inherit noxref">inherit</span></a>
</td></tr>
<tr><th>初期値：</th><td>注釈を見よ</td></tr>
<tr><th>適用対象：</th><td title="elements which establish a new viewport, ‘pattern’ elements and ‘marker’ elements">
<a href="coords.html#ElementsThatEstablishViewports">新たにビューポートを確立する要素</a>,
<a href="pservers.html#PatternElement"><span class="element-name">pattern</span></a>
要素,
<a href="painting.html#MarkerElement"><span class="element-name">marker</span></a>
要素
</td></tr>
<tr><th>継承：</th><td>されない</td></tr>
<tr><th>百分率：</th><td>N/A</td></tr>
<tr><th>メディア：</th><td>視覚</td></tr>
<tr><th><a href="animate.html#Animatable">アニメーション：</a></th><td>可</td></tr></tbody></table>
        </dd></dl>
    </div>

<p class="T">
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
プロパティがとる値とその意味は
<a href="http://www.w3.org/TR/2008/REC-CSS2-20080411/visufx.html#overflow">CSS2 で定義されるもの</a>
([<a href="refs.html#ref-CSS2">CSS2</a>], 11.1.1 節)
と同じである。
しかしながら、次の追加規則が適用される：
<span lang="en">
The ‘overflow’ property has the same parameter values and has the same meaning as defined in CSS2 ([CSS2], section 11.1.1); however, the following additional points apply:
</span></p>


<ul>

<li class="T">
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
プロパティは
<a href="coords.html#ElementsThatEstablishViewports">新たにビューポートを確立する要素</a>
（例えば
<a href="struct.html#SVGElement"><span class="element-name">svg</span></a>
要素）,
<a href="pservers.html#PatternElement"><span class="element-name">pattern</span></a>
要素,
<a href="painting.html#MarkerElement"><span class="element-name">marker</span></a>
要素に対しては適用されるが、他のすべての要素に対しては何の効力も無い（すなわち，クリッピング矩形は作成されない）。
<span lang="en">
The ‘overflow’ property applies to elements that establish new viewports (e.g., ‘svg’ elements), ‘pattern’ elements and ‘marker’ elements. For all other elements, the property has no effect (i.e., a clipping rectangle is not created).
</span></li>

<li class="T">
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
プロパティが適用可能な要素に対し
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
プロパティの値を <span class="prop-value">hidden</span> または <span class="prop-value">scroll</span> に設定した場合、矩形のクリッピングパスが新たに作成される。
<!-- 
changed class="attr-name" → class="prop-value" for hidden, scroll
-->
その効果は、同じ形の矩形を表す
<a href="shapes.html#RectElement"><span class="element-name">rect</span></a>
要素を内容とする
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素を定義した上で，与えられた要素の
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
プロパティに
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素の &lt;uri&gt; を指定するのと同じになる。
<span lang="en">
For those elements to which the ‘overflow’ property can apply, if the ‘overflow’ property has the value hidden or scroll, the effect is that a new clipping path in the shape of a rectangle is created. The result is equivalent to defining a ‘clipPath’ element whose content is a ‘rect’ element which defines the equivalent rectangle, and then specifying the &lt;uri&gt; of this ‘clipPath’ element on the ‘clip-path’ property for the given element.
</span></li>

<li class="T">
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
プロパティの値が <span class="prop-value">hidden</span> あるいは <span class="prop-value">scroll</span> でない場合、何の効力も生じない（すなわち，クリッピング矩形は作成されない）。
<span lang="en">
If the ‘overflow’ property has a value other than hidden or scroll, the property has no effect (i.e., a clipping rectangle is not created).
</span></li>

<li class="T">
SVG 内容においては、値 <span class="prop-value">auto</span> は値 <span class="prop-value">visible</span> と同値である。
<span lang="en">
Within SVG content, the value auto is equivalent to the value visible.
</span></li>

<li class="T">
<a href="intro.html#TermOutermostSVGElement"><span class="svg-term">最も外側の svg 要素</span></a>
が
<a href="http://www.w3.org/TR/2008/REC-CSS2-20080411/visuren.html">CSS レイアウト</a>
([<a href="refs.html#ref-CSS2">CSS2</a>], 9 章)
, または
<a href="http://www.w3.org/TR/2006/REC-xsl11-20061205/">XSL フォーマッティング</a>
[<a href="refs.html#ref-XSL">XSL</a>]
を利用する親の XML 言語に埋めこまれている場合、
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
プロパティの値が <span class="prop-value">hidden</span>, または <span class="prop-value">scroll</span> ならば、初期クリッピングパスは初期 
<a href="coords.html#SVGViewport">ビューポート</a>
の境界と同じ形になり，それ以外の値の場合は
<a href="http://www.w3.org/TR/2008/REC-CSS2-20080411/visufx.html#overflow">CSS2 で定められるクリッピング規則</a>
([<a href="refs.html#ref-CSS2">CSS2</a>], 11.1.1 節)
に従って設定される。
<span lang="en">
When an outermost svg element is embedded inline within a parent XML grammar which uses CSS layout ([CSS2], chapter 9) or XSL formatting [XSL], if the ‘overflow’ property has the value hidden or scroll, then the user agent will establish an initial clipping path equal to the bounds of the initial viewport; otherwise, the initial clipping path is set according to the clipping rules as defined in CSS2 ([CSS2], section 11.1.1).
</span></li>

<li class="T">
<a href="intro.html#TermOutermostSVGElement"><span class="svg-term">最も外側の svg 要素</span></a>
が独立であるか, または CSS レイアウト または XSL フォーマッティングを利用しない親の XML 言語に埋めこまれている場合、その
<a href="intro.html#TermOutermostSVGElement"><span class="svg-term">最も外側の svg 要素</span></a>
要素の
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
プロパティは視覚的描画の目的においては無視され，初期クリッピングパスは初期 
<a href="coords.html#SVGViewport">ビューポート</a>
の境界に設定される。
<span lang="en">
When an outermost svg element is stand-alone or embedded inline within a parent XML grammar which does not use CSS layout or XSL formatting, the ‘overflow’ property on the outermost svg element is ignored for the purposes of visual rendering and the initial clipping path is set to the bounds of the initial viewport.
</span></li>

<li class="T">
[<a href="http://www.w3.org/TR/2008/REC-CSS2-20080411/visufx.html#overflow">CSS2-overflow</a>]
の定義による
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
の初期値は 'visible' であり、これはルートの
<a href="struct.html#SVGElement"><span class="element-name">svg</span></a>
要素にも適用される。
しかしながら， SVG 文書の子要素に対しては、 SVG の
<a href="styling.html#UAStyleSheet">UA スタイルシート</a>
がこの初期値を上書きし,
<a href="coords.html#ElementsThatEstablishViewports">新たにビューポートを確立する要素</a>
（例えば
<a href="struct.html#SVGElement"><span class="element-name">svg</span></a>
要素）,
<a href="pservers.html#PatternElement"><span class="element-name">pattern</span></a>
要素,
<a href="painting.html#MarkerElement"><span class="element-name">marker</span></a>
要素の
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
プロパティの値を 'hidden' に設定する。
<span lang="en">
The initial value for ‘overflow’ as defined in [CSS2-overflow] is 'visible', and this applies also to the root ‘svg’ element; however, for child elements of an SVG document, SVG's user agent style sheet overrides this initial value and sets the ‘overflow’ property on elements that establish new viewports (e.g., ‘svg’ elements), ‘pattern’ elements and ‘marker’ elements to the value 'hidden'.
</span></li>
</ul>

<p class="T">
上記の結果、 SVG-UA における既定のふるまいでは，
<a href="coords.html#ElementsThatEstablishViewports">新たにビューポートを確立する要素</a>,
<a href="pservers.html#PatternElement"><span class="element-name">pattern</span></a>
要素,
<a href="painting.html#MarkerElement"><span class="element-name">marker</span></a>
要素 のそれぞれに対し新たなクリッピングパスが確立され，その形は初期
<a href="coords.html#SVGViewport">ビューポート</a>
の境界に合わせられることとなる。
<span lang="en">
As a result of the above, the default behavior of SVG user agents is to establish a clipping path to the bounds of the initial viewport and to establish a new clipping path for each element which establishes a new viewport and each ‘pattern’ and ‘marker’ element.
</span></p>

<p class="T">
関連する情報については
<a href="masking.html#AutoClipAtViewportNotViewBox">クリッピングパスをビューポートと <span class="attr-name">viewBox</span> のどちらに合わせるか</a>
を見よ。
<span lang="en">
For related information, see Clip to viewport vs. clip to ‘viewBox’.
</span></p>


    <div class="propdef">
      <dl><dt id="ClipProperty"><span class="propdef-title prop-name">clip</span></dt><dd>
          <table class="propinfo"><tbody>
<tr><th>値：</th><td>&lt;shape&gt; | auto |
<a class="noxref" href="http://www.w3.org/TR/2008/REC-CSS2-20080411/cascade.html#value-def-inherit"><span class="value-inst-inherit noxref">inherit</span></a>
</td></tr>
<tr><th>初期値：</th><td>auto</td></tr>
<tr><th>適用対象：</th><td title="elements which establish a new viewport, ‘pattern’ elements and ‘marker’ elements">
<a href="coords.html#ElementsThatEstablishViewports">新たにビューポートを確立する要素</a>,
<a href="pservers.html#PatternElement"><span class="element-name">pattern</span></a>
要素,
<a href="painting.html#MarkerElement"><span class="element-name">marker</span></a>
要素
</td></tr>
<tr><th>継承：</th><td>されない</td></tr>
<tr><th>百分率：</th><td>N/A</td></tr>
<tr><th>メディア：</th><td>視覚</td></tr>
<tr><th><a href="animate.html#Animatable">アニメーション：</a></th><td>可</td></tr></tbody></table>
        </dd></dl>
    </div>

<p class="T">
<a href="masking.html#ClipProperty"><span class="prop-name">clip</span></a>
プロパティは
<a href="http://www.w3.org/TR/2008/REC-CSS2-20080411/visufx.html#clipping">CSS2 で定義されるもの</a>
([<a href="refs.html#ref-CSS2">CSS2</a>], 11.1.2 節)
と同じ値と意味を持つ。
値 &lt;shape&gt; における座標値は単位無しでもよく、その場合は現在の利用座標系における値を表す。
値 <span class="prop-value">auto</span> を指定した場合のクリッピングパスは要素で確立されるビューポートの境界になる。
<span lang="en">
The ‘clip’ property has the same parameter values as defined in CSS2 ([CSS2], section 11.1.2). Unitless values, which indicate current user coordinates, are permitted on the coordinate values on the &lt;shape&gt;. The value of auto defines a clipping path along the bounds of the viewport created by the given element.
</span></p>


<h3 title="14.3.4 Clip to viewport vs. clip to ‘viewBox’" id="AutoClipAtViewportNotViewBox">14.3.4 クリッピングパスをビューポートと <span class="attr-name">viewBox</span>のどちらに合わせるか</h3>

<p class="T">
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
および
<a href="masking.html#ClipProperty"><span class="prop-name">clip</span></a>
プロパティと
<a href="styling.html#UAStyleSheet">UA スタイルシート</a>
の初期値により，初期ビューポートの境界に初期クリッピングパスが設定されることは、重要な点として留意すべきである。
<a href="coords.html#ViewBoxAttribute"><span class="attr-name">viewBox</span></a>
属性と
<a href="coords.html#PreserveAspectRatioAttribute"><span class="attr-name">preserveAspectRatio</span></a>
属性が指定された場合、クリッピングパスがビューポート（
<a href="painting.html#MarkerElement"><span class="element-name">marker</span></a>
と
<a href="pservers.html#PatternElement"><span class="element-name">pattern</span></a>
要素の場合は基準とする矩形）ではなく,
<a href="coords.html#ViewBoxAttribute"><span class="attr-name">viewBox</span></a>
の境界に設定された方が望ましい場合がある。
特に、
<a href="coords.html#PreserveAspectRatioAttribute"><span class="attr-name">preserveAspectRatio</span></a>
が均等な拡縮を指定していて, かつ
<a href="coords.html#ViewBoxAttribute"><span class="attr-name">viewBox</span></a>
とビューポートの縦横比が一致していないときはそうである。
<span lang="en">
It is important to note that initial values for the ‘overflow’ and ‘clip’ properties and the user agent style sheet will result in an initial clipping path that is set to the bounds of the initial viewport. When attributes ‘viewBox’ and ‘preserveAspectRatio’ attributes are specified, it is sometime desirable that the clipping path be set to the bounds of the ‘viewBox’ instead of the viewport (or reference rectangle, in the case of ‘marker’ and ‘pattern’ elements), particularly when ‘preserveAspectRatio’ specifies uniform scaling and the aspect ratio of the ‘viewBox’ does not match the aspect ratio of the viewport.
</span></p>

<p class="T">
初期クリッピングパスを
<a href="coords.html#ViewBoxAttribute"><span class="attr-name">viewBox</span></a>
に合わせるためには、
<a href="masking.html#ClipProperty"><span class="prop-name">clip</span></a>
プロパティに指定する矩形を
<a href="coords.html#ViewBoxAttribute"><span class="attr-name">viewBox</span></a>
属性に指定されたものにする（パラメタが一致しないことに注意：
<a href="masking.html#ClipProperty"><span class="prop-name">clip</span></a>
は値 &lt;top&gt;, &lt;right&gt;, &lt;bottom&gt;, &lt;left&gt; をとる一方,
<a href="coords.html#ViewBoxAttribute"><span class="attr-name">viewBox</span></a>
は値 &lt;min-x&gt;, &lt;min-y&gt;, &lt;width&gt;, &lt;height&gt; をとる）。
<span lang="en">
To set the initial clipping path to the bounds of the ‘viewBox’, set the bounds of ‘clip’ property to the same rectangle as specified on the ‘viewBox’ attribute. (Note that the parameters do not match. ‘clip’ takes values &lt;top&gt;, &lt;right&gt;,&lt;bottom&gt; and &lt;left&gt;, whereas ‘viewBox’ takes values &lt;min-x&gt;, &lt;min-y&gt;, &lt;width&gt; and &lt;height&gt;.)
</span></p>


<h3 title="14.3.5 Establishing a new clipping path: the ‘clipPath’ element" id="EstablishingANewClippingPath">14.3.5 新たなクリッピングパスの確立： <span class="element-name">clipPath</span> 要素</h3>

<p class="T" id="ClipPathElement">
クリッピングパスは
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素で定義される。
クリッピングパスは
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
プロパティにより参照利用される。
<span lang="en">
A clipping path is defined with a ‘clipPath’ element. A clipping path is used/referenced using the ‘clip-path’ property.
</span></p>

<p class="T">
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素には、
<a href="paths.html#PathElement"><span class="element-name">path</span></a>
要素,
<a href="text.html#TextElement"><span class="element-name">text</span></a>
要素,
<a href="shapes.html">基本図形</a>
（例えば
<a href="shapes.html#CircleElement"><span class="element-name">circle</span></a>
など）,
<a href="struct.html#UseElement"><span class="element-name">use</span></a>
要素を含ませられる。
ただし，
<span class="element-name">use</span>
要素が
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素の子要素の場合、
<a href="paths.html#PathElement"><span class="element-name">path</span></a>, 
<a href="text.html#TextElement"><span class="element-name">text</span></a>,
<a href="shapes.html">基本図形</a>
いずれかの要素を直接参照していなければならず，間接参照はエラーである（
<a href="implnote.html#ErrorProcessing">エラー処理</a>
を見よ）。
<span lang="en">
A ‘clipPath’ element can contain ‘path’ elements, ‘text’ elements, basic shapes (such as ‘circle’) or a ‘use’ element. If a ‘use’ element is a child of a ‘clipPath’ element, it must directly reference ‘path’, ‘text’ or basic shape elements. Indirect references are an error (see Error processing).
</span></p>

<p class="T">
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素においては、子要素の幾何における
<a href="painting.html#FillProperty"><span class="prop-name">fill</span></a>, 
<a href="painting.html#StrokeProperty"><span class="prop-name">stroke</span></a>, 
<a href="painting.html#StrokeWidthProperty"><span class="prop-name">stroke-width</span></a>
などの描画プロパティを除いた幾何により，（境界におけるアンチエイリアスを無視すれば）グラフィックのシルエットを表現する１ビットのマスクが概念的に定義される。
オブジェクトの外形線の外側はすべて覆い隠され，塗りを適用する領域の制限に利用される。

<a href="painting.html#DisplayProperty"><span class="prop-name">display</span></a>
や
<a href="painting.html#VisibilityProperty"><span class="prop-name">visibility</span></a>
により不可視にされている子要素はクリッピングパスに寄与しない。
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素が複数の子要素を含む場合、それらのシルエットは論理和により合併された，１つのシルエットをなすものとする。
すなわち，点は
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
のいずれかの子要素に含まれるならば，クリッピングパスの内側にあることになる。
<span lang="en">
The raw geometry of each child element exclusive of rendering properties such as ‘fill’, ‘stroke’, ‘stroke-width’ within a ‘clipPath’ conceptually defines a 1-bit mask (with the possible exception of anti-aliasing along the edge of the geometry) which represents the silhouette of the graphics associated with that element. Anything outside the outline of the object is masked out. If a child element is made invisible by ‘display’ or ‘visibility’ it does not contribute to the clipping path. When the ‘clipPath’ element contains multiple child elements, the silhouettes of the child elements are logically OR'd together to create a single silhouette which is then used to restrict the region onto which paint can be applied. Thus, a point is inside the clipping path if it is inside any of the children of the ‘clipPath’.
</span></p>

<p class="T">
与えられたグラフィックス要素に対し実際に用いられるクリッピングパスは、（もしあれば）要素の
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
プロパティで指定されるクリッピングパス, および その要素のすべての先祖のクリッピングパス（先祖要素の
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
プロパティや先祖の
<a href="coords.html#ElementsThatEstablishViewports">新たにビューポートを確立する要素</a>
の
<a href="masking.html#OverflowProperty"><span class="prop-name">overflow</span></a>
プロパティで指定されるもの）の共通部分になる。
（
<a href="masking.html#InitialClippingPath">初期クリッピングパス</a>
も見よ。）
<span lang="en">
For a given graphics element, the actual clipping path used will be the intersection of the clipping path specified by its ‘clip-path’ property (if any) with any clipping paths on its ancestors, as specified by the ‘clip-path’ property on the ancestor elements, or by the ‘overflow’ property on ancestor elements which establish a new viewport. Also, see the discussion of the initial clipping path.)
</span></p>

<p class="T">
注記：
<span lang="en">
A couple of notes:
</span></p>


<ul>

<li class="T">
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素自身とその子要素は先祖要素からクリッピングパスを継承<em>しない</em>。
<span lang="en">
The ‘clipPath’ element itself and its child elements do not inherit clipping paths from the ancestors of the ‘clipPath’ element.
</span></li>

<li class="T">
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素, またはその子要素は
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
プロパティを持つことができる。
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素が有効な
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
参照を持つ場合、
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素の内容と参照先のクリッピングパスとの共通部分が結果のクリッピングパスとなる。
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素の一つの子要素が有効な
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
参照を持つ場合、論理和により他の子要素のシルエットと合併される前に，その子要素の幾何に対し，参照先のクリッピングパスによる共通部分がとられる。
<span lang="en">
The ‘clipPath’ element or any of its children can specify property ‘clip-path’. If a valid ‘clip-path’ reference is placed on a ‘clipPath’ element, the resulting clipping path is the intersection of the contents of the ‘clipPath’ element with the referenced clipping path. If a valid ‘clip-path’ reference is placed on one of the children of a ‘clipPath’ element, then the given child element is clipped by the referenced clipping path before OR'ing the silhouette of the child element with the silhouettes of the other child elements.
</span></li>

<li class="T">
空のクリッピングパスは
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
プロパティが適用された要素を完全に覆い隠す。
<span lang="en">
An empty clipping path will completely clip away the element that had the ‘clip-path’ property applied.
</span></li>
</ul>

<div class="element-summary"><div class="element-summary-name"><span class="element-name">clipPath</span></div><dl><dt>分類：</dt><dd>None</dd><dt>内容モデル：</dt><dd>以下の要素の任意個数, 任意順序の組み合わせ：
<ul class="no-bullets">
<li><a class="T-ex" href="intro.html#TermDescriptiveElement">記述的要素</a></li>
<li><a class="T-ex" href="intro.html#TermAnimationElement">アニメーション要素</a></li>
<li><a class="T-ex" href="intro.html#TermShapeElement">図形要素</a></li>
<li><a href="text.html#TextElement"><span class="element-name">text</span></a></li><li><a href="struct.html#UseElement"><span class="element-name">use</span></a></li></ul></dd><dt>属性：</dt><dd><ul class="no-bullets">
<li><a class="T-ex" href="intro.html#TermConditionalProcessingAttribute">条件付き処理属性</a></li>
<li><a class="T-ex" href="intro.html#TermCoreAttributes">中核属性</a></li>
<li><a class="T-ex" href="intro.html#TermPresentationAttribute">呈示属性</a></li>
<li><a href="styling.html#ClassAttribute"><span class="attr-name">class</span></a></li><li><a href="styling.html#StyleAttribute"><span class="attr-name">style</span></a></li><li><a href="struct.html#ExternalResourcesRequiredAttribute"><span class="attr-name">externalResourcesRequired</span></a></li><li><a href="coords.html#TransformAttribute"><span class="attr-name">transform</span></a></li><li><a href="masking.html#ClipPathElementClipPathUnitsAttribute"><span class="attr-name">clipPathUnits</span></a></li></ul></dd><dt>DOM インタフェース：</dt><dd><ul class="no-bullets"><li><a class="idlinterface" href="masking.html#InterfaceSVGClipPathElement">SVGClipPathElement</a></li></ul></dd></dl></div>

    <div class="adef-list">
      <p><em>属性定義</em></p>
      <dl><dt id="ClipPathElementClipPathUnitsAttribute"><span class="adef">clipPathUnits</span> =
        "<em>userSpaceOnUse</em> | <em>objectBoundingBox</em>"</dt><dd>

<p class="T">
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
の内容に対する座標系を定義する。
<span lang="en">
Defines the coordinate system for the contents of the ‘clipPath’.
</span></p>


<p class="T">
<span class="attr-value">clipPathUnits="userSpaceOnUse"</span>
の場合、
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
の内容は
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素が参照された所における，現在の利用座標系（すなわち,
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
プロパティにより
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素を参照している要素に対する利用座標系）における値を表す。
<span lang="en">
If clipPathUnits="userSpaceOnUse", the contents of the ‘clipPath’ represent values in the current user coordinate system in place at the time when the ‘clipPath’ element is referenced (i.e., the user coordinate system for the element referencing the ‘clipPath’ element via the ‘clip-path’ property).
</span></p>


<p class="T">
<span class="attr-value">clipPathUnits="objectBoundingBox"</span>
の場合、
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素の内容に対する利用座標系は，クリッピングパスが適用される要素の限界ボックスを用いて確立される（
<a href="coords.html#ObjectBoundingBox">オブジェクトの限界ボックスに対して相対的な単位</a>
を見よ）。
<span lang="en">
If clipPathUnits="objectBoundingBox", then the user coordinate system for the contents of the ‘clipPath’ element is established using the bounding box of the element to which the clipping path is applied (see Object bounding box units).
</span></p>


<p class="T">
<a href="masking.html#ClipPathElementClipPathUnitsAttribute"><span class="attr-name">clipPathUnits</span></a>
属性が指定されていない場合の効果は、値 <span class="attr-value">userSpaceOnUse</span> が指定されたときと同じになる。
<span lang="en">
If attribute ‘clipPathUnits’ is not specified, then the effect is as if a value of 'userSpaceOnUse' were specified.
</span></p>


<span class="anim-target"><a href="animate.html#Animatable">アニメーション：</a>可</span>

</dd></dl>
    </div>

<p class="T">
先祖の
<a href="styling.html#SVGStylingProperties">プロパティ</a>
は
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素に継承されるが、
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素を参照している要素からは継承<em>されない</em>。
<span lang="en">
Properties inherit into the ‘clipPath’ element from its ancestors; properties do not inherit from the element referencing the ‘clipPath’ element.
</span></p>

<p class="T">
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素は決して直接描画されることはなく，
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
プロパティからの参照以外の用途はない。
<a href="painting.html#DisplayProperty"><span class="prop-name">display</span></a>
プロパティは
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素に適用されない。
すなわち、
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素は
<a href="painting.html#DisplayProperty"><span class="prop-name">display</span></a>
プロパティが <span class="prop-value">none</span> 以外の値に設定されていても 直接描画されることはなく，
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素自身あるいはその先祖において
<a href="painting.html#DisplayProperty"><span class="prop-name">display</span></a>
プロパティが <span class="prop-value">none</span> に設定されていても 参照による利用は可能である。
<span lang="en">
‘clipPath’ elements are never rendered directly; their only usage is as something that can be referenced using the ‘clip-path’ property. The ‘display’ property does not apply to the ‘clipPath’ element; thus, ‘clipPath’ elements are not directly rendered even if the ‘display’ property is set to a value other than none, and ‘clipPath’ elements are available for referencing even when the ‘display’ property on the ‘clipPath’ element or any of its ancestors is set to none.
</span><!-- PR -->
</p>


    <div class="propdef">
      <dl><dt id="ClipPathProperty"><span class="propdef-title prop-name">clip-path</span></dt><dd>
          <table class="propinfo"><tbody>
<tr><th>値：</th><td><a href="types.html#DataTypeFuncIRI">&lt;funciri&gt;</a>
| none |
<a class="noxref" href="http://www.w3.org/TR/2008/REC-CSS2-20080411/cascade.html#value-def-inherit"><span class="value-inst-inherit noxref">inherit</span></a>
</td></tr>
<tr><th>初期値：</th><td>none</td></tr>
<tr><th>適用対象：</th><td title="container elements and graphics elements">
<a href="intro.html#TermContainerElement">コンテナ要素</a>,
<a href="intro.html#TermGraphicsElement">グラフィックス要素</a>
</td></tr>
<tr><th>継承：</th><td>されない</td></tr>
<tr><th>百分率：</th><td>N/A</td></tr>
<tr><th>メディア：</th><td>視覚</td></tr>
<tr><th><a href="animate.html#Animatable">アニメーション：</a></th><td>可</td></tr></tbody></table>
        </dd></dl>
    </div>

<dl><dt><span class="prop-value"><a href="types.html#DataTypeFuncIRI">&lt;funciri&gt;</a></span></dt>

<dd class="T">
クリッピングパスとして利用する，同じ SVG 文書片内のグラフィックスオブジェクトへの
<a href="linking.html#IRIReference">IRI 参照</a>
。
<a href="linking.html#IRIReference">IRI 参照</a>
が無効なものであった場合（例えば存在しないオブジェクトを指していたり, オブジェクトが
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素でない場合）、
<a href="masking.html#ClipPathProperty"><span class="prop-name">clip-path</span></a>
プロパティは指定されなかったものとして扱われなければならない。
<span lang="en">
An IRI reference to another graphical object within the same SVG document fragment which will be used as the clipping path. If the IRI reference is not valid (e.g it points to an object that doesn't exist or the object is not a ‘clipPath’ element) the ‘clip-path’ property must be treated as if it hadn't been specified.
</span>
</dd>
</dl>

    <div class="propdef">
      <dl><dt id="ClipRuleProperty"><span class="propdef-title prop-name">clip-rule</span></dt><dd>
          <table class="propinfo"><tbody>
<tr><th>値：</th><td>nonzero | evenodd |
<a class="noxref" href="http://www.w3.org/TR/2008/REC-CSS2-20080411/cascade.html#value-def-inherit"><span class="value-inst-inherit noxref">inherit</span></a>
</td></tr>
<tr><th>初期値：</th><td>nonzero</td></tr>
<tr><th>適用対象：</th><td title="graphics elements within a ‘clipPath’ element">
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
内のグラフィックス要素
</td></tr>
<tr><th>継承：</th><td>される</td></tr>
<tr><th>百分率：</th><td>N/A</td></tr>
<tr><th>メディア：</th><td>視覚</td></tr>
<tr><th><a href="animate.html#Animatable">アニメーション：</a></th><td>可</td></tr></tbody></table>
        </dd></dl>
    </div>

<dl><dt><span class="prop-value">nonzero</span></dt>

<dd class="T">
<a href="painting.html#FillRuleProperty"><span class="prop-name">fill-rule</span></a>
プロパティの記述を見よ。
<span lang="en">
See description of ‘fill-rule’ property.
</span>
</dd>
<dt><span class="prop-value">evenodd</span></dt>

<dd class="T">
<a href="painting.html#FillRuleProperty"><span class="prop-name">fill-rule</span></a>
プロパティの記述を見よ。
<span lang="en">
See description of ‘fill-rule’ property.
</span>
</dd>
</dl>

<p class="T">
<a href="masking.html#ClipRuleProperty"><span class="prop-name">clip-rule</span></a>
プロパティは
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素に含まれるグラフィックス要素に対してのみ適用される。
次のコード片ではクリッピング図形を定義する
<a href="paths.html#PathElement"><span class="element-name">path</span></a>
要素に
<a href="masking.html#ClipRuleProperty"><span class="prop-name">clip-rule</span></a>
が指定されており，クリッピングパスに evenodd 規則が適用される：
<span lang="en">
The ‘clip-rule’ property only applies to graphics elements that are contained within a ‘clipPath’ element. The following fragment of code will cause an evenodd clipping rule to be applied to the clipping path because ‘clip-rule’ is specified on the ‘path’ element that defines the clipping shape:
</span></p>


<pre>&lt;g clip-rule="nonzero"&gt;
  &lt;clipPath id="MyClip"&gt;
    &lt;path d="..." clip-rule="evenodd" /&gt;
  &lt;/clipPath&gt;
  &lt;rect clip-path="url(#MyClip)" ... /&gt;
&lt;/g&gt;
</pre>

<p class="T">
一方、次のコード片では
<a href="masking.html#ClipRuleProperty"><span class="prop-name">clip-rule</span></a>
がクリッピング図形を定義しているオブジェクトではなく，参照元の要素に指定されているので、 evenodd 規則は適用<em>されない</em>：
<span lang="en">
whereas the following fragment of code will not cause an evenodd clipping rule to be applied because the ‘clip-rule’ is specified on the referencing element, not on the object defining the clipping shape:
</span></p>


<pre>&lt;g clip-rule="nonzero"&gt;
  &lt;clipPath id="MyClip"&gt;
    &lt;path d="..." /&gt;
  &lt;/clipPath&gt;
  &lt;rect clip-path="url(#MyClip)" clip-rule="evenodd" ... /&gt;
&lt;/g&gt;
</pre>

<h3 title="14.3.6 Clipping paths, geometry, and pointer events" id="clipPath-geometry">14.3.6 クリッピングパス, 要素の幾何, ポインタイベント</h3>

<p class="T">
クリッピングパスは、概念的には，それを参照する要素専用のビューポートと考えられる。
したがって、要素の描画には影響するが，要素に備わる幾何には影響を及ぼさない。
クリップされる要素（すなわち, <span class="prop-name">clip-path</span> プロパティを通して <span class="element-name">clipPath</span> 要素を参照する要素）の限界ボックスは、クリップされなかったときと同じでなければならない。
<span lang="en">
A clipping path is conceptually equivalent to a custom viewport for the referencing element. Thus, it affects the rendering of an element, but not the element's inherent geometry. The bounding box of a clipped element (that is, an element which references a ‘clipPath’ element via a ‘clip-path’ property, or a child of the referencing element) must remain the same as if it were not clipped.
</span></p>
<p class="T">
既定では、
<a href="interact.html#PointerEventsProperty">pointer-events</a>
は，図形のクリップされた（見えない）領域においては配送されてはならない。
例えば，半径 10 の円が半径 5 の円でクリップされている場合、小さい方の半径の外側は <span class="event-name">'click'</span> を受け取らない。
将来版の SVG では、接触判定とクリッピングの相互作用に，よりきめ細かい制御を与える新たなプロパティを定義することも考えられている。
<span lang="en">
By default, pointer-events must not be dispatched on the clipped (non-visible) regions of a shape. For example, a circle with a radius of 10 which is clipped to a circle with a radius of 5 will not receive 'click' events outside the smaller radius. Later versions of SVG may define new properties to enable fine-grained control over the interactions between hit testing and clipping.
</span></p>


<h2 title="14.4 Masking" id="Masking">14.4 マスキング</h2>

<p class="T" id="MaskElement">
SVG においては、現在のオブジェクトを背景に組成するためのアルファマスクとして，別の任意のグラフィックスオブジェクトや
<a href="struct.html#GElement"><span class="element-name">g</span></a>
要素を利用することができる。
<span lang="en">
In SVG, you can specify that any other graphics object or ‘g’ element can be used as an alpha mask for compositing the current object into the background.
</span></p>

<p class="T">
マスクは
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素により定義される。
マスクは
<a href="masking.html#MaskProperty"><span class="prop-name">mask</span></a>
プロパティにより参照利用される。
<span lang="en">
A mask is defined with a ‘mask’ element. A mask is used/referenced using the ‘mask’ property.
</span></p>

<p class="T">
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素には、任意のグラフィックス要素や
<a href="struct.html#GElement"><span class="element-name">g</span></a>
のような
<a href="intro.html#TermContainerElement">コンテナ要素</a>
を含ませられる。
<span lang="en">
A ‘mask’ can contain any graphical elements or container elements such as a ‘g’.
</span></p>

<p class="T">
<a href="masking.html#MaskProperty"><span class="prop-name">mask</span></a>
プロパティからの，存在しないオブジェクトや
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素でないオブジェクトへの参照は、エラーである（
<a href="implnote.html#ErrorProcessing">エラー処理</a>
を見よ）。
<span lang="en">
It is an error if the ‘mask’ property references a non-existent object or if the referenced object is not a ‘mask’ element (see Error Processing).
</span></p>

<p class="T">
マスクの効果は次のように説明される：
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
の子要素たちは、黒地透明に初期化されたオフスクリーン画像に描画され，マスクをなす。
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素を参照利用するグラフィックスオブジェクトは、そのマスクを通して背景に塗られ，グラフィックスオブジェクトの全部あるいは一部が覆い隠される。
<span lang="en">
The effect is as if the child elements of the ‘mask’ are rendered into an offscreen image which has been initialized to transparent black. Any graphical object which uses/references the given ‘mask’ element will be painted onto the background through the mask, thus completely or partially masking out parts of the graphical object.
</span></p>

<p class="T">
マスクとして用いられる任意のグラフィックスオブジェクトに対し、与えられた任意の点におけるマスク値は，色チャンネルとアルファチャンネルの値から次のようにして計算される。
まず、色チャンネル値により線型輝度値（ linear luminance value ）が計算される：
<span lang="en">
For any graphics object that is used as a mask, the mask value at any point is computed from the color channel values and alpha channel value as follows. First a luminance value is computed from the color channel values:
</span><!-- PR -->
</p>
<ul>
	<li>
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素の
<a href="painting.html#ColorInterpolationProperty"><span class="prop-name">color-interpolation</span></a>
の算出値が <span class="attr-value">linearRGB</span> の場合、元画像の色値（ sRGB 色空間に属し得る）は、最初に，線型 RGB 色空間（
<a href="painting.html#RenderingProperties">描画プロパティ</a>
を見よ）へ変換される。
次に，線型 RGB 色の非乗算済みの値を用いて，輝度からアルファへの変換係数（
<a href="filters.html#feColorMatrixElement"><span class="element-name">feColorMatrix</span></a>
原始フィルタで定義されている luminanceToAlpha ）を適用することにより、線型 RGB 色が線型輝度に変換される。
<span lang="en">
If the computed value of ‘color-interpolation’ on the ‘mask’ element is linearRGB, first convert the original image color values (potentially in the sRGB color space) to the linear RGB color space (see Rendering properties). Then, using non-premultiplied linear RGB color values, apply the luminance-to-alpha coefficients (as defined in the ‘feColorMatrix’ filter primitive) to convert the linear RGB color values to linear luminance values.
</span>
	</li>
	<li>
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素の
<a href="painting.html#ColorInterpolationProperty"><span class="prop-name">color-interpolation</span></a>
の算出値が <span class="attr-value">sRGB</span> の場合、RGB 色から線型輝度に変換するため，非乗算済み RGB 色値に輝度からアルファへの変換係数（
<a href="filters.html#feColorMatrixElement"><span class="element-name">feColorMatrix</span></a>
原始フィルタで定義されている luminanceToAlpha ）を適用して輝度値が得られる。
<span lang="en">
If the computed value of ‘color-interpolation’ on the ‘mask’ element is sRGB then the luminance value is calculated by taking the non-premultiplied RGB color values, applying the luminance-to-alpha coefficients (as defined in the ‘feColorMatrix’ filter primitive) to convert the RGB color values to luminance values.
</span>
	</li>
</ul><!-- PR -->
<p>
最後に，グラフィックスオブジェクトがアルファチャンネルを含む場合、計算結果の輝度値には 対応するアルファ値が更に乗算され，これが結果のマスク値となる。
<span lang="en">
Finally if the graphics object also includes an alpha channel, then the computed luminance value is multiplied by the corresponding alpha value to produce the mask value.
</span></p><!-- PR -->

<p class="T">
４チャンネル RGBA グラフィックスオブジェクトがマスクとして用いられる場合、マスクの色チャンネルとアルファチャンネルの両方がマスキング演算に寄与する。
現在のオブジェクトの背景への組成に利用されるアルファマスクは、色チャンネルの輝度（前の段落を見よ）とマスクによるアルファチャンネルとの積を表現する。
<span lang="en">
For a four-channel RGBA graphics object that is used as a mask, both the color channels and the alpha channel of the mask contribute to the masking operation. The alpha mask that is used to composite the current object into the background represents the product of the luminance of the color channels (see previous paragraph) and the alpha channel from the mask.
</span></p>

<p class="T">
３チャンネル RGB グラフィックスオブジェクトがマスクとして用いられる場合（例えば３チャンネル画像ファイルを参照しているときなど）の効果は、アルファチャンネルが一様に１にされた４チャンネル RGBA 画像によるものと同じである。
<span lang="en">
For a three-channel RGB graphics object that is used as a mask (e.g., when referencing a 3-channel image file), the effect is as if the object were converted into a 4-channel RGBA image with the alpha channel uniformly set to 1.
</span></p>

<p class="T">
単チャンネル画像がマスクとして用いられる場合（例えば１チャンネルグレースケール画像ファイルを参照しているときなど）の効果は、参照されたオブジェクトの単チャンネルを基に色チャンネルの算出を行い、アルファチャンネルが一様に１にされた，４チャンネル RGBA 画像へ変換されたものによるものと同じである。
グレースケール画像ファイルを参照する場合は、色チャンネルの計算において，符号化されたグレースケール値を線型明度値（ linear light values ）に関連付ける変換曲線（ transfer curve ）を考慮しなければならないことに注意。
<span lang="en">
For a single-channel image that is used as a mask (e.g., when referencing a 1-channel grayscale image file), the effect is as if the object were converted into a 4-channel RGBA image, where the single channel from the referenced object is used to compute the three color channels and the alpha channel is uniformly set to 1. Note that when referencing a grayscale image file, the transfer curve relating the encoded grayscale values to linear light values must be taken into account when computing the color channels.
</span></p>

<p class="T">
マスクの効果は、マスクがないときに，与えられたオブジェクトのアルファチャンネルに対しマスクの実効アルファ値（ resulting alpha values — すなわち，マスクの色チャンネルとアルファチャンネルの積をとって得られるマスクの輝度）を乗算することと同じである。
<span lang="en">
The effect of a mask is identical to what would have happened if there were no mask but instead the alpha channel of the given object were multiplied with the mask's resulting alpha values (i.e., the product of the mask's luminance from its color channels multiplied by the mask's alpha channel).
</span></p>

<p class="T">
マスキング演算においては、 SVG の
<a href="paths.html#PathElement"><span class="element-name">path</span></a>,
図形（例えば
<a href="shapes.html#CircleElement"><span class="element-name">circle</span></a>
）, 
<a href="text.html#TextElement"><span class="element-name">text</span></a>
は、常に４チャンネル RGBA 画像として扱われることに注意。
<span lang="en">
Note that SVG ‘path’s, shapes (e.g., ‘circle’) and ‘text’ are all treated as four-channel RGBA images for the purposes of masking operations.
</span></p>

<p class="T" id="ExampleMask01">
<span class="example-ref">Example mask01</span>
では矩形をマスクする画像を利用している。
<span lang="en">
Example mask01 uses an image to mask a rectangle.
</span></p>


<pre class="xml">&lt;?xml version="1.0" standalone="no"?&gt;
&lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"&gt;
&lt;svg width="8cm" height="3cm" viewBox="0 0 800 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;desc&gt;Example mask01 - <span title="blue text masked with gradient against red background"
  >赤い背景上の
          グラデーションによるマスクがかけられた青色のテキスト</span>
  &lt;/desc&gt;
  &lt;defs&gt;
    &lt;linearGradient id="Gradient" gradientUnits="userSpaceOnUse"
                    x1="0" y1="0" x2="800" y2="0"&gt;
      &lt;stop offset="0" stop-color="white" stop-opacity="0" /&gt;
      &lt;stop offset="1" stop-color="white" stop-opacity="1" /&gt;
    &lt;/linearGradient&gt;
    &lt;mask id="Mask" maskUnits="userSpaceOnUse"
          x="0" y="0" width="800" height="300"&gt;
      &lt;rect x="0" y="0" width="800" height="300" fill="url(#Gradient)"  /&gt;
    &lt;/mask&gt;
    &lt;text id="Text" x="400" y="200" 
          font-family="Verdana" font-size="100" text-anchor="middle" &gt;
      Masked text
    &lt;/text&gt;
  &lt;/defs&gt;

  &lt;!-- <span title="Draw a pale red rectangle in the background">背景に薄赤色の矩形を描く</span> --&gt;
  &lt;rect x="0" y="0" width="800" height="300" fill="#FF8080" /&gt;
  
  &lt;!-- <span title="Draw the text string twice. First, filled blue, with the mask applied.
       Second, outlined in black without the mask."
  >同じテキストを二度描く。最初のものは内部を青色に塗りマスクを適用。
       二番目のものは外形線のみを黒色に塗り、マスクは適用しない。</span> --&gt;
  &lt;use xlink:href="#Text" fill="blue" mask="url(#Mask)" /&gt;
  &lt;use xlink:href="#Text" fill="none" stroke="black" stroke-width="2" /&gt;
&lt;/svg&gt;</pre><table><caption>Example mask01</caption><tbody><tr><td><img title="Example mask01 — blue text masked with gradient against red background" alt="Example mask01 — blue text masked with gradient against red background" src="images/masking/mask01.png"></td></tr></tbody></table>
<p class="view-as-svg"><a href="images/masking/mask01.svg">この例を SVG で表示（ SVG 対応ブラウザのみ）</a></p>

<div class="element-summary"><div class="element-summary-name"><span class="element-name">mask</span></div><dl><dt>分類：</dt><dd><a href="intro.html#TermContainerElement">コンテナ要素</a></dd><dt>内容モデル：</dt><dd>以下の要素の任意個数, 任意順序の組み合わせ：
<ul class="no-bullets">
<li><a class="T-ex" href="intro.html#TermAnimationElement">アニメーション要素</a></li>
<li><a class="T-ex" href="intro.html#TermDescriptiveElement">記述的要素</a></li>
<li><a class="T-ex" href="intro.html#TermShapeElement">図形要素</a></li>
<li><a class="T-ex" href="intro.html#TermStructuralElement">構造要素</a></li>
<li><a class="T-ex" href="intro.html#TermGradientElement">グラデーション要素</a></li>
<li><a href="linking.html#AElement"><span class="element-name">a</span></a></li><li><a href="text.html#AltGlyphDefElement"><span class="element-name">altGlyphDef</span></a></li><li><a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a></li><li><a href="color.html#ColorProfileElement"><span class="element-name">color-profile</span></a></li><li><a href="interact.html#CursorElement"><span class="element-name">cursor</span></a></li><li><a href="filters.html#FilterElement"><span class="element-name">filter</span></a></li><li><a href="fonts.html#FontElement"><span class="element-name">font</span></a></li><li><a href="fonts.html#FontFaceElement"><span class="element-name">font-face</span></a></li><li><a href="extend.html#ForeignObjectElement"><span class="element-name">foreignObject</span></a></li><li><a href="struct.html#ImageElement"><span class="element-name">image</span></a></li><li><a href="painting.html#MarkerElement"><span class="element-name">marker</span></a></li><li><a href="masking.html#MaskElement"><span class="element-name">mask</span></a></li><li><a href="pservers.html#PatternElement"><span class="element-name">pattern</span></a></li><li><a href="script.html#ScriptElement"><span class="element-name">script</span></a></li><li><a href="styling.html#StyleElement"><span class="element-name">style</span></a></li><li><a href="struct.html#SwitchElement"><span class="element-name">switch</span></a></li><li><a href="text.html#TextElement"><span class="element-name">text</span></a></li><li><a href="linking.html#ViewElement"><span class="element-name">view</span></a></li></ul></dd><dt>属性：</dt><dd><ul class="no-bullets">
<li><a class="T-ex" href="intro.html#TermConditionalProcessingAttribute">条件付き処理属性</a></li>
<li><a class="T-ex" href="intro.html#TermCoreAttributes">中核属性</a></li>
<li><a class="T-ex" href="intro.html#TermPresentationAttribute">呈示属性</a></li>
<li><a href="styling.html#ClassAttribute"><span class="attr-name">class</span></a></li><li><a href="styling.html#StyleAttribute"><span class="attr-name">style</span></a></li><li><a href="struct.html#ExternalResourcesRequiredAttribute"><span class="attr-name">externalResourcesRequired</span></a></li><li><a href="masking.html#MaskElementXAttribute"><span class="attr-name">x</span></a></li><li><a href="masking.html#MaskElementYAttribute"><span class="attr-name">y</span></a></li><li><a href="masking.html#MaskElementWidthAttribute"><span class="attr-name">width</span></a></li><li><a href="masking.html#MaskElementHeightAttribute"><span class="attr-name">height</span></a></li><li><a href="masking.html#MaskElementMaskUnitsAttribute"><span class="attr-name">maskUnits</span></a></li><li><a href="masking.html#MaskElementMaskContentUnitsAttribute"><span class="attr-name">maskContentUnits</span></a></li></ul></dd><dt>DOM インタフェース：</dt><dd><ul class="no-bullets"><li><a class="idlinterface" href="masking.html#InterfaceSVGMaskElement">SVGMaskElement</a></li></ul></dd></dl></div>

    <div class="adef-list">
      <p><em>属性定義</em></p>
      <dl><dt id="MaskElementMaskUnitsAttribute"><span class="adef">maskUnits</span> = "<em>userSpaceOnUse</em> |
        <em>objectBoundingBox</em>"</dt><dd>

<p class="T">
<a href="masking.html#MaskElementXAttribute"><span class="attr-name">x</span></a>,
<a href="masking.html#MaskElementYAttribute"><span class="attr-name">y</span></a>,
<a href="masking.html#MaskElementWidthAttribute"><span class="attr-name">width</span></a>,
<a href="masking.html#MaskElementHeightAttribute"><span class="attr-name">height</span></a>
属性に対する座標系を定義する。
<span lang="en">
Defines the coordinate system for attributes ‘x’, ‘y’, ‘width’ and ‘height’.
</span></p>


<p class="T">
<span class="attr-value">maskUnits="userSpaceOnUse"</span>,
の場合、
<a href="masking.html#MaskElementXAttribute"><span class="attr-name">x</span></a>,
<a href="masking.html#MaskElementYAttribute"><span class="attr-name">y</span></a>,
<a href="masking.html#MaskElementWidthAttribute"><span class="attr-name">width</span></a>,
<a href="masking.html#MaskElementHeightAttribute"><span class="attr-name">height</span></a>
は
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素が参照された所における現在の利用座標系（すなわち,
<a href="masking.html#MaskProperty"><span class="prop-name">mask</span></a>
プロパティにより
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素を参照している要素に対する利用座標系）における値を表現する。
<span lang="en">
If maskUnits="userSpaceOnUse", ‘x’, ‘y’, ‘width’ and ‘height’ represent values in the current user coordinate system in place at the time when the ‘mask’ element is referenced (i.e., the user coordinate system for the element referencing the ‘mask’ element via the ‘mask’ property).
</span></p>


<p class="T">
<span class="attr-value">maskUnits="objectBoundingBox"</span>
の場合、
<a href="masking.html#MaskElementXAttribute"><span class="attr-name">x</span></a>,
<a href="masking.html#MaskElementYAttribute"><span class="attr-name">y</span></a>,
<a href="masking.html#MaskElementWidthAttribute"><span class="attr-name">width</span></a>,
<a href="masking.html#MaskElementHeightAttribute"><span class="attr-name">height</span></a>
はマスクが適用される要素の限界ボックスに対する百分率または比率を表現する（
<a href="coords.html#ObjectBoundingBox">オブジェクトの限界ボックスに対して相対的な単位</a>
を見よ）。
<span lang="en">
If maskUnits="objectBoundingBox", ‘x’, ‘y’, ‘width’ and ‘height’ represent fractions or percentages of the bounding box of the element to which the mask is applied. (See Object bounding box units.)
</span></p>


<p class="T">
属性
<a href="masking.html#MaskElementMaskUnitsAttribute"><span class="attr-name">maskUnits</span></a>
が指定されていない場合の効果は、値 <span class="attr-value">objectBoundingBox</span> が指定されたときと同じになる。
<span lang="en">
If attribute ‘maskUnits’ is not specified, then the effect is as if a value of 'objectBoundingBox' were specified.
</span></p>


<span class="anim-target"><a href="animate.html#Animatable">アニメーション：</a>可</span>

</dd><dt id="MaskElementMaskContentUnitsAttribute"><span class="adef">maskContentUnits</span> =
        "<em>userSpaceOnUse</em> | <em>objectBoundingBox</em>"</dt><dd>

<p class="T">
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
の内容に対する座標系を定義する。
<span lang="en">
Defines the coordinate system for the contents of the ‘mask’.
</span></p>


<p class="T">
<span class="attr-value">maskContentUnits="userSpaceOnUse"</span>
の場合、
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
の内容は
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素が参照された所における現在の利用座標系（すなわち,
<a href="masking.html#MaskProperty"><span class="prop-name">mask</span></a>
プロパティにより
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素を参照している要素に対する利用座標系）における値を表現する。
<span lang="en">
If maskContentUnits="userSpaceOnUse", the user coordinate system for the contents of the ‘mask’ element is the current user coordinate system in place at the time when the ‘mask’ element is referenced (i.e., the user coordinate system for the element referencing the ‘mask’ element via the ‘mask’ property).
</span></p>


<p class="T">
<span class="attr-value">maskContentUnits="objectBoundingBox"</span>
の場合、
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素の内容に対する利用座標系は、マスクが適用される要素の限界ボックスを用いて確立される（
<a href="coords.html#ObjectBoundingBox">オブジェクトの限界ボックスに対して相対的な単位</a>
を見よ）。
<span lang="en">
If maskContentUnits="objectBoundingBox", the user coordinate system for the contents of the ‘mask’ is established using the bounding box of the element to which the mask is applied. (See Object bounding box units.)
</span></p>


<p class="T">
<a href="masking.html#MaskElementMaskContentUnitsAttribute"><span class="attr-name">maskContentUnits</span></a>
属性が指定されていない場合の効果は、値 <span class="attr-value">userSpaceOnUse</span> が指定されたときと同じになる。
<span lang="en">
If attribute ‘maskContentUnits’ is not specified, then the effect is as if a value of 'userSpaceOnUse' were specified.
</span></p>


<span class="anim-target"><a href="animate.html#Animatable">アニメーション：</a>可</span>

</dd><dt id="MaskElementXAttribute"><span class="adef">x</span> = "<a href="types.html#DataTypeCoordinate"><span class="attr-value">&lt;coordinate&gt;</span></a>"</dt><dd>

<p class="T">
オフスクリーンバッファが占有可能な最大の矩形の第一頂点の X 座標。
マスク内のグラフィックの描画に用いられるクリッピングパスは、与えられたオブジェクトに対する現在のクリッピングパスと 
<a href="masking.html#MaskElementXAttribute"><span class="attr-name">x</span></a>,
<a href="masking.html#MaskElementYAttribute"><span class="attr-name">y</span></a>,
<a href="masking.html#MaskElementWidthAttribute"><span class="attr-name">width</span></a>,
<a href="masking.html#MaskElementHeightAttribute"><span class="attr-name">height</span></a>
で定義される矩形の共通部分からなることに注意。
<span lang="en">
The x-axis coordinate of one corner of the rectangle for the largest possible offscreen buffer. Note that the clipping path used to render any graphics within the mask will consist of the intersection of the current clipping path associated with the given object and the rectangle defined by ‘x’, ‘y’, ‘width’ and ‘height’.
</span></p>


<p class="T">
この属性が指定されていない場合の効果は、値 <span class="attr-value">'-10%'</span> が指定されたときと同じになる。
<span lang="en">
If the attribute is not specified, the effect is as if a value of '-10%' were specified.
</span></p>


<span class="anim-target"><a href="animate.html#Animatable">アニメーション：</a>可</span>

</dd><dt id="MaskElementYAttribute"><span class="adef">y</span> = "<a href="types.html#DataTypeCoordinate"><span class="attr-value">&lt;coordinate&gt;</span></a>"</dt><dd>

<p class="T">
オフスクリーンバッファが占有可能な最大の矩形の第一頂点の Y 座標。
<span lang="en">
The y-axis coordinate of one corner of the rectangle for the largest possible offscreen buffer.
</span></p>


<p class="T">
この属性が指定されていない場合の効果は、値 <span class="attr-value">'-10%'</span> が指定されたときと同じになる。
<span lang="en">
If the attribute is not specified, the effect is as if a value of '-10%' were specified.
</span></p>


<span class="anim-target"><a href="animate.html#Animatable">アニメーション：</a>可</span>

</dd><dt id="MaskElementWidthAttribute"><span class="adef">width</span> = "<a href="types.html#DataTypeLength"><span class="attr-value">&lt;length&gt;</span></a>"</dt><dd>

<p class="T">
オフスクリーンバッファが占有可能な最大の矩形の幅。
マスク内のグラフィックの描画に用いられるクリッピングパスは、与えられたオブジェクトに対する現在のクリッピングパスと 
<a href="masking.html#MaskElementXAttribute"><span class="attr-name">x</span></a>,
<a href="masking.html#MaskElementYAttribute"><span class="attr-name">y</span></a>,
<a href="masking.html#MaskElementWidthAttribute"><span class="attr-name">width</span></a>,
<a href="masking.html#MaskElementHeightAttribute"><span class="attr-name">height</span></a>
で定義される矩形の共通部分になることに注意。
<span lang="en">
The width of the largest possible offscreen buffer. Note that the clipping path used to render any graphics within the mask will consist of the intersection of the current clipping path associated with the given object and the rectangle defined by ‘x’, ‘y’, ‘width’ and ‘height’.
</span></p>


<p class="T">
負値はエラー（
<a href="implnote.html#ErrorProcessing">エラー処理</a>
を見よ）。
値を 0 にすると要素は描画されなくなる。
<span lang="en">
A negative value is an error (see Error processing). A value of zero disables rendering of the element.
</span></p>


<p class="T">
この属性が指定されていない場合の効果は、値 <span class="attr-value">'120%'</span> が指定されたときと同じになる。
<span lang="en">
If the attribute is not specified, the effect is as if a value of '120%' were specified.
</span></p>


<span class="anim-target"><a href="animate.html#Animatable">アニメーション：</a>可</span>

</dd><dt id="MaskElementHeightAttribute"><span class="adef">height</span> = "<a href="types.html#DataTypeLength"><span class="attr-value">&lt;length&gt;</span></a>"</dt><dd>

<p class="T">
オフスクリーンバッファが占有可能な最大の矩形の高さ。
<span lang="en">
The height of the largest possible offscreen buffer.
</span></p>


<p class="T">
負値はエラー（
<a href="implnote.html#ErrorProcessing">エラー処理</a>
を見よ）。
値を 0 にすると要素は描画されなくなる。
<span lang="en">
A negative value is an error (see Error processing). A value of zero disables rendering of the element.
</span></p>


<p class="T">
この属性が指定されていない場合の効果は、値 <span class="attr-value">'120%'</span> が指定されたときと同じになる。
<span lang="en">
If the attribute is not specified, the effect is as if a value of '120%' were specified.
</span></p>


<span class="anim-target"><a href="animate.html#Animatable">アニメーション：</a>可</span>

</dd></dl>
    </div>

<p class="T">
先祖の
<a href="styling.html#SVGStylingProperties">プロパティ</a>
は
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素に継承されるが、
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素を参照している要素からは継承<em>されない</em>。
<span lang="en">
Properties inherit into the ‘mask’ element from its ancestors; properties do not inherit from the element referencing the ‘mask’ element.
</span></p>

<p class="T">
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素は決して直接描画されることはなく,
<a href="masking.html#MaskProperty"><span class="prop-name">mask</span></a>
プロパティからの参照以外の用途はない。
<a href="masking.html#OpacityProperty"><span class="prop-name">opacity</span></a>,
<a href="filters.html#FilterProperty"><span class="prop-name">filter</span></a>,
<a href="painting.html#DisplayProperty"><span class="prop-name">display</span></a> プロパティは
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素に適用されない。
すなわち,
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素は
<a href="painting.html#DisplayProperty"><span class="prop-name">display</span></a>
プロパティが <span class="prop-value">none</span> 以外の値に設定されていても 直接描画されることはなく、
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素自身あるいはその先祖において
<a href="painting.html#DisplayProperty"><span class="prop-name">display</span></a>
プロパティが <span class="prop-value">none</span> に設定されていても 参照を通して利用できる。
<span lang="en">
‘mask’ elements are never rendered directly; their only usage is as something that can be referenced using the ‘mask’ property. The ‘opacity’, ‘filter’ and ‘display’ properties do not apply to the ‘mask’ element; thus, ‘mask’ elements are not directly rendered even if the ‘display’ property is set to a value other than none, and ‘mask’ elements are available for referencing even when the ‘display’ property on the ‘mask’ element or any of its ancestors is set to none.
</span></p>

<p class="T">
以下は
<a href="masking.html#MaskProperty"><span class="prop-name">mask</span></a>
プロパティについての記述である。
<span lang="en">
The following is a description of the ‘mask’ property.
</span></p>


    <div class="propdef">
      <dl><dt id="MaskProperty"><span class="propdef-title prop-name">mask</span></dt><dd>
          <table class="propinfo"><tbody>
<tr><th>値：</th><td><a href="types.html#DataTypeFuncIRI">&lt;funciri&gt;</a>
| none |
<a class="noxref" href="http://www.w3.org/TR/2008/REC-CSS2-20080411/cascade.html#value-def-inherit"><span class="value-inst-inherit noxref">inherit</span></a>
</td></tr>
<tr><th>初期値：</th><td>none</td></tr>
<tr><th>適用対象：</th><td title="container elements and graphics elements">
<a href="intro.html#TermContainerElement">コンテナ要素</a>,
<a href="intro.html#TermGraphicsElement">グラフィックス要素</a>
</td></tr>
<tr><th>継承：</th><td>されない</td></tr>
<tr><th>百分率：</th><td>N/A</td></tr>
<tr><th>メディア：</th><td>視覚</td></tr>
<tr><th><a href="animate.html#Animatable">アニメーション：</a></th><td>可</td></tr></tbody></table>
        </dd></dl>
    </div>

<dl><dt><span class="prop-value"><a href="types.html#DataTypeFuncIRI">&lt;funciri&gt;</a></span></dt>

<dd class="T">
マスクとして利用する他のグラフィカルなオブジェクトへの
<a href="linking.html#IRIReference">IRI 参照</a>
。
<span lang="en">
A IRI reference to another graphical object which will be used as the mask.
</span>
</dd>
</dl>



<h2 title="14.5 Object and group opacity: the ‘opacity’ property" id="ObjectAndGroupOpacityProperties">14.5 オブジェクト不透明度とグループ不透明度： <span class="prop-name">opacity</span> プロパティ</h2>

<p class="T">
SVG にはいくつかの不透明度プロパティがある：
<span lang="en">
There are several opacity properties within SVG:
</span></p>

<ul>

<li class="T">
フィル操作の不透明度を指定する
<a href="painting.html#FillOpacityProperty"><span class="prop-name">fill-opacity</span></a>
<span lang="en">
‘fill-opacity’, which specifies the opacity of a fill operation;
</span></li>

<li class="T">
ストローク操作の不透明度を指定する
<a href="painting.html#StrokeOpacityProperty"><span class="prop-name">stroke-opacity</span></a>
<span lang="en">
‘stroke-opacity’, which specifies the opacity of a stroking operation;
</span></li>

<li class="T">
グラデーションストップの不透明度を指定する
<a href="pservers.html#StopOpacityProperty"><span class="prop-name">stop-opacity</span></a>
<span lang="en">
‘stop-opacity’, which specifies the opacity of a gradient stop; and
</span></li>

<li class="T">
この節で述べるオブジェクト／グループ不透明度を指定する
<a href="masking.html#OpacityProperty"><span class="prop-name">opacity</span></a>
<span lang="en">
‘opacity’, which specifies object/group opacity and which is described in this section.
</span></li>
</ul>

<p class="T">
オブジェクト／グループ不透明度（下で説明する）を除く，他のすべての不透明度プロパティは、中間描画演算に伴うものである。
オブジェクト／グループ不透明度は後処理演算と考えることができる。
概念的には、オブジェクト／グループが RGBA オフスクリーン画像に描画されるされた後で，オブジェクト／グループ不透明度の設定が、どのようにオフスクリーン画像を現在の背景に混色させるかを定める。
<span lang="en">
Except for object/group opacity (described just below), all other opacity properties are involved in intermediate rendering operations. Object/group opacity can be thought of conceptually as a postprocessing operation. Conceptually, after the object/group is rendered into an RGBA offscreen image, the object/group opacity setting specifies how to blend the offscreen image into the current background.
</span></p>


    <div class="propdef">
      <dl><dt id="OpacityProperty"><span class="propdef-title prop-name">opacity</span></dt><dd>
          <table class="propinfo"><tbody>
<tr><th>値：</th><td>&lt;opacity-value&gt; |
<a class="noxref" href="http://www.w3.org/TR/2008/REC-CSS2-20080411/cascade.html#value-def-inherit"><span class="value-inst-inherit noxref">inherit</span></a>
</td></tr>
<tr><th>初期値：</th><td>1</td></tr>
<tr><th>適用対象：</th><td title="container elements (except ‘mask’) and graphics elements">
<a href="intro.html#TermContainerElement">コンテナ要素</a>,
<a href="intro.html#TermGraphicsElement">グラフィックス要素</a>
（
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
を除く）<!-- PR -->
</td></tr>
<tr><th>継承：</th><td>されない</td></tr>
<tr><th>百分率：</th><td>N/A</td></tr>
<tr><th>メディア：</th><td>視覚</td></tr>
<tr><th><a href="animate.html#Animatable">アニメーション：</a></th><td>可</td></tr></tbody></table>
        </dd></dl>
    </div>

<dl><dt><span class="prop-value">&lt;opacity-value&gt;</span></dt>

<dd class="T">
<a href="types.html#DataTypeNumber">&lt;number&gt;</a>
で与えられる，オブジェクト全体に渡り一様に適用される不透明度。

値 0.0 （完全透明）から 1.0 （完全不透明）の範囲外の値はこの範囲に切り詰められる（
<a href="implnote.html#RangeClamping">特定の範囲への値の切り詰め</a>
を見よ）。
オブジェクトが
<a href="struct.html#GElement"><span class="element-name">g</span></a>
などのコンテナ要素ならば、
<a href="struct.html#GElement"><span class="element-name">g</span></a>
の内容が、各画素が値 &lt;opacity-value&gt; であるようなマスクを用いて，現在の背景に混色される（
<a href="masking.html#SimpleAlphaBlending">単純アルファ組成法</a>
を見よ）。
<span lang="en">
The uniform opacity setting to be applied across an entire object, as a &lt;number&gt;. Any values outside the range 0.0 (fully transparent) to 1.0 (fully opaque) will be clamped to this range. (See Clamping values which are restricted to a particular range.) If the object is a container element such as a ‘g’, then the effect is as if the contents of the ‘g’ were blended against the current background using a mask where the value of each pixel of the mask is &lt;opacity-value&gt;. (See Simple alpha compositing.)
</span>
</dd>
</dl>

<p class="T" id="ExampleOpacity01">
<span class="example-ref">Example opacity01</span>
は、要素とグループにおける
<a href="masking.html#OpacityProperty"><span class="prop-name">opacity</span></a>
プロパティの様々な利用を示している。
<span lang="en">
Example opacity01 illustrates various usage of the ‘opacity’ property on elements and groups.
</span></p>


<pre class="xml">&lt;?xml version="1.0" standalone="no"?&gt;
&lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"&gt;
&lt;svg width="12cm" height="3.5cm" viewBox="0 0 1200 350"
     xmlns="http://www.w3.org/2000/svg" version="1.1"&gt;
  &lt;desc&gt;Example opacity01 - <span title="opacity property"
  >不透明度プロパティ</span>&lt;/desc&gt;

  &lt;rect x="1" y="1" width="1198" height="348"
        fill="none" stroke="blue" /&gt;

  &lt;!-- <span title="Background blue rectangle"
  >背景の青色矩形</span> --&gt;
  &lt;rect x="100" y="100" width="1000" height="150" fill="#0000ff"  /&gt;

  &lt;!-- <span title="Red circles going from opaque to nearly transparent"
  >不透明からほぼ透明に近づいていく赤色の円</span> --&gt;
  &lt;circle cx="200" cy="100" r="50" fill="red" opacity="1"  /&gt;
  &lt;circle cx="400" cy="100" r="50" fill="red" opacity=".8"  /&gt;
  &lt;circle cx="600" cy="100" r="50" fill="red" opacity=".6"  /&gt;
  &lt;circle cx="800" cy="100" r="50" fill="red" opacity=".4"  /&gt;
  &lt;circle cx="1000" cy="100" r="50" fill="red" opacity=".2"  /&gt;

  &lt;!-- <span title="Opaque group, opaque circles"
  >不透明なグループと不透明な円</span> --&gt;
  &lt;g opacity="1" &gt;
    &lt;circle cx="182.5" cy="250" r="50" fill="red" opacity="1"  /&gt;
    &lt;circle cx="217.5" cy="250" r="50" fill="green" opacity="1"  /&gt;
  &lt;/g&gt;
  &lt;!-- <span title="Group opacity: .5, opacity circles"
  >グループ不透明度 0.5, 不透明な円</span> --&gt;
  &lt;g opacity=".5" &gt;
    &lt;circle cx="382.5" cy="250" r="50" fill="red" opacity="1"  /&gt;
    &lt;circle cx="417.5" cy="250" r="50" fill="green" opacity="1"  /&gt;
  &lt;/g&gt;
  &lt;!-- <span title="Opaque group, semi-transparent green over red"
  >不透明なグループ, 半透明な赤色の上の半透明な緑色</span> --&gt;
  &lt;g opacity="1" &gt;
    &lt;circle cx="582.5" cy="250" r="50" fill="red" opacity=".5"  /&gt;
    &lt;circle cx="617.5" cy="250" r="50" fill="green" opacity=".5"  /&gt;
  &lt;/g&gt;
  &lt;!-- <span title="Opaque group, semi-transparent red over green"
  >不透明なグループ, 半透明な緑色の上の半透明な赤色</span> --&gt;
  &lt;g opacity="1" &gt;
    &lt;circle cx="817.5" cy="250" r="50" fill="green" opacity=".5"  /&gt;
    &lt;circle cx="782.5" cy="250" r="50" fill="red" opacity=".5"  /&gt;
  &lt;/g&gt;
  &lt;!-- <span title="Group opacity .5, semi-transparent green over red"
  >グループ不透明度 0.5, 半透明な赤色の上の半透明な緑色</span> --&gt;
  &lt;g opacity=".5" &gt;
    &lt;circle cx="982.5" cy="250" r="50" fill="red" opacity=".5"  /&gt;
    &lt;circle cx="1017.5" cy="250" r="50" fill="green" opacity=".5"  /&gt;
  &lt;/g&gt;
&lt;/svg&gt;</pre><table><caption>Example opacity01</caption><tbody><tr><td><img title="Example opacity01 — opacity property" alt="Example opacity01 — opacity property" src="images/masking/opacity01.png"></td></tr></tbody></table>
<p class="view-as-svg"><a href="images/masking/opacity01.svg">この例を SVG で表示（ SVG 対応ブラウザのみ）</a></p>

<p class="T">
上の例では，画像の上段の円は、 1.0 から 0.2 までの，それぞれ異なる不透明度を持っている。
画像の下段に対応する５つの
<a href="struct.html#GElement"><span class="element-name">g</span></a>
要素それぞれは、次の様な，部分的に重なる赤色と緑色の円を含んでいる：
<span lang="en">
In the example above, the top row of circles have differing opacities, ranging from 1.0 to 0.2. The bottom row illustrates five ‘g’ elements, each of which contains overlapping red and green circles, as follows:
</span></p>


<ul>

<li class="T">
最初のグループは基準となる不透明な場合を示している。
グループと円の両方とも不透明度は 1 である。
<span lang="en">
The first group shows the opaque case for reference. The group has opacity of 1, as do the circles.
</span></li>

<li class="T">
２番目のグループはグループ内の要素が不透明なときのグループ不透明度の効果を示している。
<span lang="en">
The second group shows group opacity when the elements in the group are opaque.
</span></li>

<li class="T">
３番目と４番目のグループは（描画順序において）不透明度が非可換なことを示している。
３番目のグループ（不透明度 1 ）では、半透明の緑色の円が半透明の赤色の円の上に描かれている一方で，４番目のグループでは逆の順序で描かれている。
２つの円が交わる領域の色が異なっていることに注意（３番目では濃い緑色である一方，４番目では濃い赤色）。
<span lang="en">
The third and fourth group show that opacity is not commutative. In the third group (which has opacity of 1), a semi-transparent green circle is drawn on top of a semi-transparent red circle, whereas in the fourth group a semi-transparent red circle is drawn on top of a semi-transparent green circle. Note that area where the two circles intersect display different colors. The third group shows more green color in the intersection area, whereas the fourth group shows more red color.
</span></li>

<li class="T">
５番目のグループは不透明度を累積した場合の効果を示している。
円とグループ自身の両方とも不透明度 0.5 である。
緑色の円と重ならない赤色の円の領域（赤色の円の左側）の上側は累積不透明度 0.25 （= 0.5 * 0.5 ）で青色の矩形に混色された結果、赤色が 25%, 青色が 75% になっている。
<span lang="en">
The fifth group shows the multiplicative effect of opacity settings. Both the circles and the group itself have opacity settings of .5. The result is that the portion of the red circle which does not overlap with the green circle (i.e., the top/right of the red circle) will blend into the blue rectangle with accumulative opacity of .25 (i.e., .5*.5), which, after blending into the blue rectangle, results in a blended color which is 25% red and 75% blue.
</span></li>
</ul>

<h2 title="14.6 DOM interfaces" id="DOMInterfaces">14.6 DOM インタフェース</h2>

<h3 title="14.6.1 Interface SVGClipPathElement" id="InterfaceSVGClipPathElement">14.6.1 インタフェース SVGClipPathElement</h3>

<p class="T">
<a class="idlinterface" href="masking.html#InterfaceSVGClipPathElement">SVGClipPathElement</a>
インタフェースは
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素に対応する。
<span lang="en">
The SVGClipPathElement interface corresponds to the ‘clipPath’ element.
</span></p>


<pre class="idl">interface <b>SVGClipPathElement</b> : <a class="idlinterface" href="types.html#InterfaceSVGElement">SVGElement</a>,
                               <a class="idlinterface" href="types.html#InterfaceSVGTests">SVGTests</a>,
                               <a class="idlinterface" href="types.html#InterfaceSVGLangSpace">SVGLangSpace</a>,
                               <a class="idlinterface" href="types.html#InterfaceSVGExternalResourcesRequired">SVGExternalResourcesRequired</a>,
                               <a class="idlinterface" href="types.html#InterfaceSVGStylable">SVGStylable</a>,
                               <a class="idlinterface" href="types.html#InterfaceSVGTransformable">SVGTransformable</a>,
                               <a class="idlinterface" href="types.html#InterfaceSVGUnitTypes">SVGUnitTypes</a> {
  readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="masking.html#__svg__SVGClipPathElement__clipPathUnits">clipPathUnits</a>;
};</pre><dl class="interface"><dt>属性</dt><dd><dl class="attributes">
<dt id="__svg__SVGClipPathElement__clipPathUnits"><b>clipPathUnits</b><span class="idl-type-parenthetical"> (readonly
<a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a>)</span></dt><dd>

<p class="T">
<a href="masking.html#ClipPathElement"><span class="element-name">clipPath</span></a>
要素の
<a href="masking.html#ClipPathElementClipPathUnitsAttribute"><span class="attr-name">clipPathUnits</span></a>
属性に対応する。
<a class="idlinterface" href="types.html#InterfaceSVGUnitTypes">SVGUnitTypes</a>
で定義される定数のいずれかを値にとる。
<span lang="en">
Corresponds to attribute ‘clipPathUnits’ on the given ‘clipPath’ element. Takes one of the constants defined in SVGUnitTypes.
</span></p>

</dd></dl></dd></dl>


<h3 title="14.6.2 Interface SVGMaskElement" id="InterfaceSVGMaskElement">14.6.2 インタフェース SVGMaskElement</h3>

<p class="T">
<a class="idlinterface" href="masking.html#InterfaceSVGMaskElement">SVGMaskElement</a>
インタフェースは
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素に対応する。
<span lang="en">
The SVGMaskElement interface corresponds to the ‘mask’ element.
</span></p>


<pre class="idl">interface <b>SVGMaskElement</b> : <a class="idlinterface" href="types.html#InterfaceSVGElement">SVGElement</a>,
                           <a class="idlinterface" href="types.html#InterfaceSVGTests">SVGTests</a>,
                           <a class="idlinterface" href="types.html#InterfaceSVGLangSpace">SVGLangSpace</a>,
                           <a class="idlinterface" href="types.html#InterfaceSVGExternalResourcesRequired">SVGExternalResourcesRequired</a>,
                           <a class="idlinterface" href="types.html#InterfaceSVGStylable">SVGStylable</a>,
                           <a class="idlinterface" href="types.html#InterfaceSVGUnitTypes">SVGUnitTypes</a> {
  readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="masking.html#__svg__SVGMaskElement__maskUnits">maskUnits</a>;
  readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="masking.html#__svg__SVGMaskElement__maskContentUnits">maskContentUnits</a>;
  readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="masking.html#__svg__SVGMaskElement__x">x</a>;
  readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="masking.html#__svg__SVGMaskElement__y">y</a>;
  readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="masking.html#__svg__SVGMaskElement__width">width</a>;
  readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="masking.html#__svg__SVGMaskElement__height">height</a>;
};</pre><dl class="interface"><dt>属性</dt><dd><dl class="attributes">
<dt id="__svg__SVGMaskElement__maskUnits"><b>maskUnits</b><span class="idl-type-parenthetical"> (readonly
<a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a>)</span></dt><dd>

<p class="T">
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素の
<a href="masking.html#MaskElementMaskUnitsAttribute"><span class="attr-name">maskUnits</span></a>
属性に対応する。
<a class="idlinterface" href="types.html#InterfaceSVGUnitTypes">SVGUnitTypes</a>
で定義される定数のいずれかを値にとる。
<span lang="en">
Corresponds to attribute ‘maskUnits’ on the given ‘mask’ element. Takes one of the constants defined in SVGUnitTypes.
</span></p>

</dd>
<dt id="__svg__SVGMaskElement__maskContentUnits"><b>maskContentUnits</b><span class="idl-type-parenthetical"> (readonly
<a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a>)</span></dt><dd>

<p class="T">
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素の
<a href="masking.html#MaskElementMaskContentUnitsAttribute"><span class="attr-name">maskContentUnits</span></a>
属性に対応する。
<a class="idlinterface" href="types.html#InterfaceSVGUnitTypes">SVGUnitTypes</a>
で定義される定数のいずれかを値にとる。
<span lang="en">
Corresponds to attribute ‘maskContentUnits’ on the given ‘mask’ element. Takes one of the constants defined in SVGUnitTypes.
</span></p>

</dd>
<dt id="__svg__SVGMaskElement__x"><b>x</b><span class="idl-type-parenthetical"> (readonly
<a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a>)</span></dt><dd>

<p class="T">
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素の
<a href="masking.html#MaskElementXAttribute"><span class="attr-name">x</span></a>
属性に対応する。
<span lang="en">
Corresponds to attribute ‘x’ on the given ‘mask’ element.
</span></p>

</dd>
<dt id="__svg__SVGMaskElement__y"><b>y</b><span class="idl-type-parenthetical"> (readonly
<a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a>)</span></dt><dd>

<p class="T">
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素の
<a href="masking.html#MaskElementYAttribute"><span class="attr-name">y</span></a>
属性に対応する。
<span lang="en">
Corresponds to attribute ‘y’ on the given ‘mask’ element.
</span></p>

</dd>
<dt id="__svg__SVGMaskElement__width"><b>width</b><span class="idl-type-parenthetical"> (readonly
<a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a>)</span></dt><dd>

<p class="T">
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素の
<a href="masking.html#MaskElementWidthAttribute"><span class="attr-name">width</span></a>
属性に対応する。
<span lang="en">
Corresponds to attribute ‘width’ on the given ‘mask’ element.
</span></p>

</dd>
<dt id="__svg__SVGMaskElement__height"><b>height</b><span class="idl-type-parenthetical"> (readonly
<a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a>)</span></dt><dd>

<p class="T">
<a href="masking.html#MaskElement"><span class="element-name">mask</span></a>
要素の
<a href="masking.html#MaskElementHeightAttribute"><span class="attr-name">height</span></a>
属性に対応する。
<span lang="en">
Corresponds to attribute ‘height’ on the given ‘mask’ element.
</span></p>

</dd></dl></dd></dl>


<div class="header bottom">
<a href="index.html#minitoc">目次</a> ⋅
<a href="expanded-toc.html">詳細目次</a> ⋅
<a href="pservers.html">前章</a> ⋅
<a href="filters.html">次章</a> ⋅
<a href="eltindex.html">要素</a> ⋅
<a href="attindex.html">属性</a> ⋅
<a href="propidx.html">プロパティ</a>
</div><script src="style/expanders.js" type="text/javascript"> </script>


</body>
</html>
