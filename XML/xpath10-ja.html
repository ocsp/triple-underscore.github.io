<!DOCTYPE html>

<html lang="ja">

<head>
	<meta charset="utf-8" />

	<meta name="Description" content="XPATH 1.0 仕様の日本語訳" />
	<meta name="Keywords" content="XPATH,XML,仕様,訳" />

<title title="XML Path Language (XPath)">XML パス言語 (XPath) 1.0</title>

<!-- 
<link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-REC">
 -->

<style >

body {
  padding: 2em;
  margin: 0;
  font-family: sans-serif;
  color: black;
  background-color: white;
}


h1, h2, h3, h4, h5, h6 {
	text-align: left;
	color: #005A9C;
	font-family: sans-serif;
}
h1 { font-size: 170%;}
h2 { font-size: 140%;}
h3 { font-size: 120%;}
h4 { font-size: 110%;}
h5 { font-size: 105%;}
h6 { font-size: 100%;}

blockquote {
	background-color:#EFE;
	border: inset  2px;
	padding: 1em;
}
blockquote > p {
	margin:0;
}

pre {
	margin-left: 2em;
	background-color:#FFE;
	color: #410;
	font-family: monospace;
}

code {
	font-family: monospace;
	color: #731;
	font-weight: bolder;
}

table.scrap {
	padding: 1em;
	background-color:#FFE;
}
table.scrap td {
	vertical-align:top;
}
table.scrap td:first-child {
	text-align:left;
	padding-right: 1em;
}
table.scrap td:first-child + td + td {
	padding-right: 1em;
	padding-left: 1em;
}


/* errata
	background-color:#DFF;
 */
.errata, ins {
	color:#011;
}
del {
	color:gray;
}

/* translation annotations */
.trans-note {
	color:#131;
	background-color:#DFD;
}

.trans-meta {
	border: double #BB3333 6px; padding:0.5em 1em;
	margin-bottom: 1em;
}

/* source view */

#sample-source-style,
p > span:lang(en) {
	background-color:#EEF;
	display:block;
}

body.hide_source p > span:lang(en) {
	display: none;
}

section, aside, footer, header, nav, hgroup {
	display:block;
}

section {
	border-left:solid #DDD 1px;
	padding-left: 3px;
}


nav ul {
	list-style-type: none;
}

/* was h5 in the source
	text-align: left;
	color: #005A9C;
*/
caption {
	font-weight: bold;
}

dfn {
	font-weight: bold;
}

</style>



<script >

function switch_view(mode){
	document.body.className = mode;
}

// 原文表示開閉
function toggle_source(event){
	var target = event.target || window.event.srcElement;
	while(target){
		var tag = target.tagName;
		if(!tag) return;
		if(target.getAttribute('lang') === 'en') return;
		if(tag.toUpperCase() === 'P') {
			var en = target.lastElementChild;
			if(en.getAttribute('lang') !== 'en') return;
			en.style.display = en.style.display ? '' : 'block';
			return;
		}
		target = target.parentNode;
	}
};

</script>

</head>

<body ondblclick="toggle_source(event)">


<aside class="trans-meta" >
<h2 style="">XML Path Language (XPath) 1.0 日本語訳</h2>
<p>
この文書は、<a href="http://www.w3.org/">W3C</a> が作成し、勧告として公開された
<a href="http://www.w3.org/TR/xpath">XML Path Language (XPath) Version 1.0</a>
を日本語に翻訳したものです。
</p>
<ul>
    <li><strong >この翻訳には翻訳上の誤りがあるかもしれませんし、正確性は保証されません。
</strong></li>
    <li>XPath 1.0 仕様書の公式な文書は英語版であり、この日本語訳は公式のものではありません。
</li>
    <li>この翻訳は二次著作物にあたり、原著作権は<a href="#copyright-notice">原著作物に帰するもの</a>です。
</li>
</ul>
この訳には原文仕様に対する公式の修正も統合されています：
<a href="#about-translation" >その他, この翻訳に関する詳細</a>
</aside>

<div style="background-color:#DFD; border:solid 1px;">
<a href="#contents" >目次へ飛ぶ</a>&nbsp;&nbsp;
<span >原文表示：
	<label >
		<input type="radio" id="show_source" name="source_view" tabindex="0" checked="checked" 
			onchange="switch_view('show_source')" />
		常に表示
	</label>
	<label >
		<input type="radio" id="hide_source" name="source_view" tabindex="0" 
			onchange="switch_view('hide_source')" />
		常に隠す（本文ダブルクリックで開閉）
	</label>
</span>
</div>

<header class="head">

<a href="http://www.w3.org/">W3C Home
<!-- <img src="http://www.w3.org/Icons/WWW/w3c_home" alt="W3C" height="48" width="72"> -->
</a>

<h1 title="XML Path Language (XPath) Version 1.0">XML パス言語 (XPath) 1.0</h1>
<h2 title="W3C Recommendation 16 November 1999">W3C 勧告 1999年 11月 16日</h2>
<dl>
<dt title="This version:">この版：</dt>
<dd>
<a href="http://www.w3.org/TR/1999/REC-xpath-19991116">http://www.w3.org/TR/1999/REC-xpath-19991116</a>
<span title="(available in XML or HTML)">（
<a href="http://www.w3.org/TR/1999/REC-xpath-19991116.xml">XML 版</a>
<a href="http://www.w3.org/TR/1999/REC-xpath-19991116.html">HTML 版</a>
）
</span>
</dd>
<dt title="Latest version:">最新版：</dt>
<dd>
<a href="http://www.w3.org/TR/xpath">http://www.w3.org/TR/xpath</a>
</dd>
<dt title="Previous versions:">以前の版</dt>
<dd>
<a href="http://www.w3.org/TR/1999/PR-xpath-19991008">http://www.w3.org/TR/1999/PR-xpath-19991008</a>
<br />
<a href="http://www.w3.org/1999/08/WD-xpath-19990813">http://www.w3.org/1999/08/WD-xpath-19990813</a>
<br />
<a href="http://www.w3.org/1999/07/WD-xpath-19990709">http://www.w3.org/1999/07/WD-xpath-19990709</a>
<br />
<a href="http://www.w3.org/TR/1999/WD-xslt-19990421">http://www.w3.org/TR/1999/WD-xslt-19990421</a>
<br />
</dd>
<dt title="Editors:">編集</dt>
<dd>
James Clark
<a href="mailto:jjc@jclark.com">&lt;jjc@jclark.com&gt;</a>
<br />
Steve DeRose
 (Inso Corp. and Brown University) 
<a href="mailto:Steven_DeRose@Brown.edu">&lt;Steven_DeRose@Brown.edu&gt;</a>
<br />
</dd>
</dl>

<small class="copyright">
<a href="http://www.w3.org/Consortium/Legal/ipr-notice.html#Copyright">Copyright</a>
&copy; 1999
<a href="http://www.w3.org">W3C</a><sup>&reg;</sup>
(<a href="http://www.lcs.mit.edu">MIT</a>,
<a href="http://www.inria.fr/">INRIA</a>,
<a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C
<a href="http://www.w3.org/Consortium/Legal/ipr-notice.html#Legal_Disclaimer">liability</a>,
<a href="http://www.w3.org/Consortium/Legal/ipr-notice.html#W3C_Trademarks">trademark</a>,
<a href="http://www.w3.org/Consortium/Legal/copyright-documents.html">document use</a>
and
<a href="http://www.w3.org/Consortium/Legal/copyright-software.html">software licensing</a>
rules apply.
<!-- 
<span lang="en">
Copyright &copy; 1999 W3C&reg; (MIT, INRIA, Keio), All Rights Reserved. W3C liability, trademark, document use and software licensing rules apply.</span>
 -->
</small>
</header>

<hr title="Separator for header" />


<div >
<h2 id="abstract" title="Abstract">要約</h2>
<p>
XPath は XSLT と XPointer からの利用を念頭に置いて設計された、 XML 文書の一部分をアドレス指定するための言語である。
<span lang="en">
XPath is a language for addressing parts of an XML document, designed to be used by both XSLT and XPointer.</span>
</p>
</div>

<div>

<h2 id="status" title="Status of this document">この文書の位置付け</h2>

<p>
この文書は、W3C のメンバおよびその他の関係者が評価し、W3C
<a href="http://www.w3.org/Consortium/Process/#RecsW3C">勧告</a>
として担当の責任者が承認したものである。
今後変更される可能性はなく、他の文書において参考資料として使用したり、あるいは基準となる参考文献として引用することができる。
勧告の策定にあたって W3C が担う役割は、この仕様への注目を集めて広く普及させることにある。
これにより Web の機能性と相互運用性を向上させることができる。
<span lang="en">
This document has been reviewed by W3C Members and other interested parties and has been endorsed by the Director as a W3C Recommendation.
It is a stable document and may be used as reference material or cited as a normative reference from other documents.
W3C's role in making the Recommendation is to draw attention to the specification and to promote its widespread deployment.
This enhances the functionality and interoperability of the Web.</span>
</p>

<p>
この仕様の正誤表は
<a href="http://www.w3.org/1999/11/REC-xpath-19991116-errata">http://www.w3.org/1999/11/REC-xpath-19991116-errata</a>
から入手できる。
<span class="trans-note">【当訳にはこのページ更新日までの修正が取り込まれています】</span>
<span lang="en">
The list of known errors in this specification is available at http://www.w3.org/1999/11/REC-xpath-19991116-errata.</span>
</p>

<p>
この仕様に関するコメントは
<a href="mailto:www-xpath-comments@w3.org">www-xpath-comments@w3.org</a>
宛に。
コメントの
<a href="http://lists.w3.org/Archives/Public/www-xpath-comments">アーカイブ</a>
も利用できる。
<span lang="en">
Comments on this specification may be sent to www-xpath-comments@w3.org; archives of the comments are available.</span>
</p>

<p>
この仕様の正式な版は英語版のみになる。
各国語の翻訳版は
<a href="http://www.w3.org/Style/XSL/translations.html">http://www.w3.org/Style/XSL/translations.html</a>
を参照。
<span lang="en">
The English version of this specification is the only normative version.
However, for translations of this document, see http://www.w3.org/Style/XSL/translations.html.</span>
</p>

<p>
W3C 勧告の一覧その他の技術文書は
<a href="http://www.w3.org/TR">http://www.w3.org/TR</a>
から入手できる。
<span lang="en">
A list of current W3C Recommendations and other technical documents can be found at http://www.w3.org/TR.</span>
</p>

<p>
この仕様は XSL Working Group と XML Linking Working Group による協同成果であり、
<a href="http://www.w3.org/Style/Activity">W3C Style activity</a>
および
<a href="http://www.w3.org/XML/Activity">W3C XML activity</a>
の一部でもある。
<span lang="en">
This specification is joint work of the XSL Working Group and the XML Linking Working Group and so is part of the W3C Style activity and of the W3C XML activity.</span>
</p>

</div>

<nav>
<h2 id="contents" title="Table of contents">目次</h2>

<ul>
<li>1 <a href="#section-Introduction" title="Introduction">概要</a></li>
<li>2 <a href="#location-paths" title="Location Paths">ロケーションパス</a>
	<ul>
		<li>2.1 <a href="#section-Location-Steps" title="Location Steps">ロケーションステップ</a></li>
		<li>2.2 <a href="#axes" title="Axes">軸</a></li>
		<li>2.3 <a href="#node-tests" title="Node Tests">ノードテスト</a></li>
		<li>2.4 <a href="#predicates" title="Predicates">述語</a></li>
		<li>2.5 <a href="#path-abbrev" title="Abbreviated Syntax">省略構文</a></li>
	</ul>
</li>
<li>3 <a href="#section-Expressions" title="Expressions">式</a>
	<ul>
		<li>3.1 <a href="#section-Basics" title="Basics">基本</a></li>
		<li>3.2 <a href="#section-Function-Calls" title="Function Calls">関数呼び出し</a></li>
		<li>3.3 <a href="#node-sets" title="Node-sets">ノード集合</a></li>
		<li>3.4 <a href="#booleans" title="Booleans">ブール</a></li>
		<li>3.5 <a href="#numbers" title="Numbers">数</a></li>
		<li>3.6 <a href="#strings" title="Strings">文字列</a></li>
		<li>3.7 <a href="#exprlex" title="Lexical Structure">字句構造</a></li>
	</ul>
</li>
<li>4 <a href="#corelib" title="Core Function Library">コア関数ライブラリ</a>
	<ul>
		<li>4.1 <a href="#section-Node-Set-Functions" title="Node Set Functions">ノード集合関数</a></li>
		<li>4.2 <a href="#section-String-Functions" title="String Functions">文字列関数</a></li>
		<li>4.3 <a href="#section-Boolean-Functions" title="Boolean Functions">ブール関数</a></li>
		<li>4.4 <a href="#section-Number-Functions" title="Number Functions">数値関数</a></li>
	</ul>
</li>
<li>5 <a href="#data-model" title="Data Model">データモデル</a>
	<ul>
		<li>5.1 <a href="#root-node" title="Root Node">ルートノード</a></li>
		<li>5.2 <a href="#element-nodes" title="Element Nodes">要素ノード</a></li>
		<li>5.2.1 <a href="#unique-id" title="Unique IDs">一意 ID</a></li>
		<li>5.3 <a href="#attribute-nodes" title="Attribute Nodes">属性ノード</a></li>
		<li>5.4 <a href="#namespace-nodes" title="Namespace Nodes">名前空間ノード</a></li>
		<li>5.5 <a href="#section-Processing-Instruction-Nodes" title="Processing Instruction Nodes">処理命令ノード</a></li>
		<li>5.6 <a href="#section-Comment-Nodes" title="Comment Nodes">コメントノード</a></li>
		<li>5.7 <a href="#section-Text-Nodes" title="Text Nodes">テキストノード</a></li>
	</ul>
</li>
<li>6 <a href="#section-Conformance" title="Conformance">適合性</a></li>

</ul>

<h3 title="Appendices">付録</h3>

<ul>
<li>A <a href="#section-References" title="References">参照文献</a>
	<ul>
		<li>A.1 <a href="#section-Normative-References" title="Normative References">参照文献（規定）</a></li>
		<li>A.2 <a href="#section-Other-References" title="Other References">その他の参照文献</a></li>
	</ul>
</li>
<li >B <a href="#infoset" title="XML Information Set Mapping (Non-Normative)">XML 情報セットとの対応関係</a>（規定外）
	<ul class="errata">
		<li title="The Root Node"><a href="#IDAUDAS">B.1 ルートノード</a></li>
		<li title="Element Nodes"><a href="#I.S.element-nodes">B.2 要素ノード</a></li>
		<li title="Attribute Nodes"><a href="#IDAOHAS">B.3 属性ノード</a></li>
		<li title="Text Nodes"><a href="#IDA1IAS">B.4 テキストノード</a></li>
		<li title="Processing Instruction Nodes"><a href="#IDA4JAS">B.5 処理命令ノード</a></li>
		<li title="Comment Nodes"><a href="#IDAILAS">B.6 コメントノード</a></li>
		<li title="Namespace Nodes"><a href="#IDAHMAS">B.7 名前空間ノード</a></li>
		<li title="XML Information Set Conformance"><a href="#IDAJNAS">B.8 XML 情報セットへの適合性</a></li>
	</ul>
</li>
</ul>

</nav>

<hr />

<section>

<h2 id="section-Introduction" title="1 Introduction">1 概要</h2>

<p>
XPath は、 XSL Transformations
<a href="#XSLT">[XSLT]</a>
と XPointer
<a href="#XPTR">[XPointer]</a>
が共有する機能に共通の構文と意味内容を盛り込む試みの成果である。
XPath の主な目的は XML
<a href="#XML">[XML]</a>
文書の一部分をアドレス指定する所にある。
これをサポートするため、 XPath では文字列, 数, 真偽値を操作する基本機能も提供している。
URI や XML 属性値の内部での利用を容易にするため、 XPath は XML 構文を利用しないコンパクトな構文を用いる。
XPath は XML 文書の表面的な構文ではなく XML 文書の抽象的な論理構造の上で処理を行う。
XPath という名称は、 XML 文書の階層構造を辿る際に URL と同様のパス表記法を採用している所から命名されている。
<span lang="en">
XPath is the result of an effort to provide a common syntax and semantics for functionality shared between XSL Transformations [XSLT] and XPointer [XPointer].
The primary purpose of XPath is to address parts of an XML [XML] document.
In support of this primary purpose, it also provides basic facilities for manipulation of strings, numbers and booleans.
XPath uses a compact, non-XML syntax to facilitate use of XPath within URIs and XML attribute values.
XPath operates on the abstract, logical structure of an XML document, rather than its surface syntax.
XPath gets its name from its use of a path notation as in URLs for navigating through the hierarchical structure of an XML document.</span>
</p>

<p>
アドレス指定の機能に加え、 XPath は、照合（ノードがパターンに合致するかどうかのテスト）に利用できるサブセットが本来的に備わるように設計されている。
XPath のこのような利用については
<a href="xslt10-ja.html#patterns">XSLT</a>
で述べられている。
<span lang="en">
In addition to its use for addressing, XPath is also designed so that it has a natural subset that can be used for matching (testing whether or not a node matches a pattern); this use of XPath is described in XSLT.</span>
</p>

<p>
XPath は XML 文書をノードのツリーとしてモデル化する。
要素ノード, 属性ノード, テキストノードなど、ノードにはいろいろな型がある。
XPath はこれらのノード型のそれぞれに対し
<a href="#dt-string-value">文字列値</a>
を計算する方法を定める。
一部のノード型は名前も持つ。
XPath は XML 名前空間
<a href="#XMLNAMES">[XML Names]</a>
を完全にサポートする。
ノードの名前は局所部（ local part ）と（ null も含む）名前空間 URI のペアからなる。
これは
<a href="#dt-expanded-name">展開名</a>
と呼ばれる。
これらのデータモデルについては
<a href="#data-model">[<b>5 データモデル</b>]</a>
の中で詳細に述べる。
<span lang="en">
XPath models an XML document as a tree of nodes.
There are different types of nodes, including element nodes, attribute nodes and text nodes.
XPath defines a way to compute a string-value for each type of node.
Some types of nodes also have names.
XPath fully supports XML Namespaces [XML Names].
Thus, the name of a node is modeled as a pair consisting of a local part and a possibly null namespace URI; this is called an expanded-name.
The data model is described in detail in [5 Data Model].</span>
</p>

<p>
XPath の構文構造の主体になるのは式である。
式は生成規則
<a href="#NT-Expr">Expr</a>
に一致する。
式が評価されると、次の４つの基本型のうちのいずれかのオブジェクトが生成される。
<span lang="en">
The primary syntactic construct in XPath is the expression.
An expression matches the production Expr.
An expression is evaluated to yield an object, which has one of the following four basic types:</span>
</p>

<ul>
<li>
<p >
ノード集合（重複の無い、順序を持たないノードの集合） 
<span lang="en">
node-set (an unordered collection of nodes without duplicates)</span>
</p>
</li>
<li>
<p >
ブール値（真または偽）
<span lang="en">
boolean (true or false)</span>
</p>
</li>
<li>
<p >
数値（浮動小数点数）
<span lang="en">
number (a floating-point number)</span>
</p>
</li>
<li>
<p >
文字列（一連の UCS 文字）
<span lang="en">string (a sequence of UCS characters)</span>
</p>
</li>
</ul>

<p>
式は文脈（ context ）に基づいて評価される。
XSLT と XPointer では XPath 式を評価する際の文脈の決定方法を規定している。
文脈は次のものから構成される：
<span lang="en">
Expression evaluation occurs with respect to a context.
XSLT and XPointer specify how the context is determined for XPath expressions used in XSLT and XPointer respectively.
The context consists of:</span>
</p>

<ul>
<li>
<p >
ノード（ <dfn id="dt-context-node">文脈ノード</dfn> ）
<span lang="en">
a node (the context node)</span>
</p>
</li>
<li>
<p >
一組の正整数（ <dfn id="dt-context-position">文脈位置</dfn> と <dfn id="dt-context-size">文脈サイズ</dfn> ）
<span lang="en">
a pair of non-zero positive integers (the context position and the context size)</span>
</p>
</li>
<li>
<p >
変数束縛の集合
<span lang="en">
a set of variable bindings</span>
</p>
</li>
<li>
<p >
関数ライブラリ
<span lang="en">
a function library</span>
</p>
</li>
<li>
<p >
式のスコープに入る名前空間宣言の集合
<span class="trans-note">【「文脈に有効な名前空間宣言」という言い回しも用いる】</span>
<span lang="en">
the set of namespace declarations in scope for the expression</span>
</p>
</li>

</ul>

<p>
文脈位置の値は、常に文脈サイズの値以下となる。
<span lang="en">
The context position is always less than or equal to the context size.</span>
</p>

<p>
変数束縛は変数名から変数値への対応付けからなる。
変数の値は１つのオブジェクトであり、式の値として生じ得る任意の型を持ち得る。
また、ここでは規定されていない追加の型も持ち得る。
<span lang="en">
The variable bindings consist of a mapping from variable names to variable values.
The value of a variable is an object, which can be of any of the types that are possible for the value of an expression, and may also be of additional types not specified here.</span>
</p>

<p>
関数ライブラリは関数名から関数への対応付けからなる。
それぞれの関数は 0 個以上の引数をとり、 1 個の結果を返す。
この文書では、XPath のどの実装も必ずサポートしなければならないコア関数ライブラリを定める（
<a href="#corelib">[<b>4 コア関数ライブラリ</b>]</a>
参照）。
コア関数ライブラリに属する関数については、引数や結果の返り値は上の４つの基本型のいずれかになる。
XSLT と XPointer のいずれも、追加の関数を定義して XPath を拡張している。
これらの関数の中には、４つの基本型に対して処理を行うものもあれば、 XSLT や XPointer で定義された追加のデータ型に対して処理を行うものもある。
<span lang="en">
The function library consists of a mapping from function names to functions.
Each function takes zero or more arguments and returns a single result.
This document defines a core function library that all XPath implementations must support (see [4 Core Function Library]).
For a function in the core function library, arguments and result are of the four basic types.
Both XSLT and XPointer extend XPath by defining additional functions; some of these functions operate on the four basic types; others operate on additional data types defined by XSLT and XPointer.</span>
</p>

<p>
名前空間宣言は、接頭辞から名前空間 URI への対応付けからなる。
<span lang="en">
The namespace declarations consist of a mapping from prefixes to namespace URIs.</span>
</p>

<p>
部分式を評価する際に利用される変数束縛, 関数ライブラリ, 名前空間宣言は、その部分式を含む式を評価する際に利用される文脈のものと常に同じである。
<!-- □ -->
しかしながら、部分式を評価する際に利用される文脈ノード, 文脈位置, 文脈サイズについては、その部分式を含む式を評価する際に利用される文脈のものから変化し得る。
いくつかの種類の式は文脈ノードを変更する。
文脈位置や文脈サイズを変更するのは述語のみになる（
<a href="#predicates">[<b>2.4 述語</b>]</a>
参照）。
式の評価について述べる際は、文脈ノード, 文脈位置, 文脈サイズが部分式の評価によって変化する場合は常にその変化内容について明示的に定められる。
これらについて何も述べていなければ、それらは変更されない。
<span lang="en">
The variable bindings, function library and namespace declarations used to evaluate a subexpression are always the same as those used to evaluate the containing expression.
The context node, context position, and context size used to evaluate a subexpression are sometimes different from those used to evaluate the containing expression.
Several kinds of expressions change the context node; only predicates change the context position and context size (see [2.4 Predicates]).
When the evaluation of a kind of expression is described, it will always be explicitly stated if the context node, context position, and context size change for the evaluation of subexpressions; if nothing is said about the context node, context position, and context size, they remain unchanged for the evaluation of subexpressions of that kind of expression.</span>
</p>

<p>
多くの場合、 XPath 式は XML 属性の中で記述される。
この節で規定する文法は、 XML 1.0 による正規化後の属性値に適用される。
従って、例えば文法内の文字 <code>&lt;</code> は、そのまま XML ソース内に <code>&lt;</code> を記述してはならず、 <code>&amp;lt;</code> のように XML 1.0 の規定に従ってクオートしなければならない。
式内部のリテラル文字列は一重引用符または二重引用符で括られるが、これらの引用符は XML 属性値を括るためにも用いられる。
式内部の引用符は、 XML プロセッサから誤って属性値の終端と解釈されないよう、文字参照（ <code>&amp;quot;</code> または <code>&amp;apos;</code> ）を用いて入力するか、あるいは XML 属性が二重引用符で括られているのであれば式では一重引用符を用いるようにするか、その逆にする。
<span lang="en">
XPath expressions often occur in XML attributes.
The grammar specified in this section applies to the attribute value after XML 1.0 normalization.
So, for example, if the grammar uses the character &lt;, this must not appear in the XML source as &lt; but must be quoted according to XML 1.0 rules by, for example, entering it as &amp;lt;.
Within expressions, literal strings are delimited by single or double quotation marks, which are also used to delimit XML attributes.
To avoid a quotation mark in an expression being interpreted by the XML processor as terminating the attribute value the quotation mark can be entered as a character reference (&amp;quot; or &amp;apos;).
Alternatively, the expression can use single quotation marks if the XML attribute is delimited with double quotation marks or vice-versa.</span>
</p>

<p>
式の中でもロケーションパスは重要な種類になる。
ロケーションパスは文脈ノードに相対的なノードの集合を選択する。
ロケーションパスの評価結果は、そのロケーションパスによって選択されたノードの集合になる。
ロケーションパスでは、式を入れ子にしてノードの集合を更にふるいにかけることも可能である。
ロケーションパスの生成規則は
<a href="#NT-LocationPath">LocationPath</a>
である。
<span lang="en">
One important kind of expression is a location path.
A location path selects a set of nodes relative to the context node.
The result of evaluating an expression that is a location path is the node-set containing the nodes selected by the location path.
Location paths can recursively contain expressions that are used to filter sets of nodes.
A location path matches the production LocationPath.</span>
</p>

<p>
以降に示す文法では、非終端の
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
と
<a href="http://www.w3.org/TR/REC-xml-names#NT-NCName">NCName</a>
は
<a href="#XMLNAMES">[XML Names]</a>
で定義され、
<a href="http://www.w3.org/TR/REC-xml#NT-S">S</a>
は
<a href="#XML">[XML]</a>
で定義されるものとする。
この文法では
<a href="#XML">[XML]</a>
と同じ EBNF 記法を用いる（文法記号の頭文字が常に大文字になる所だけが異なる）。
<span lang="en">
In the following grammar, the non-terminals QName and NCName are defined in [XML Names], and S is defined in [XML].
The grammar uses the same EBNF notation as [XML] (except that grammar symbols always have initial capital letters).</span>
</p>

<p>
式の構文解析では、まず最初に解析対象の文字列がトークンに分割され、結果の一連のトークンが解析される。
トークンの間には空白を自由に挟める。
トークン化のプロセスについては
<a href="#exprlex">[<b>3.7 字句構造</b>]</a>
で述べる。
<span lang="en">
Expressions are parsed by first dividing the character string to be parsed into tokens and then parsing the resulting sequence of tokens.
Whitespace can be freely used between tokens.
The tokenization process is described in [3.7 Lexical Structure].</span>
</p>

<p class="errata">
<ins >
加えて、簡便のためこの仕様では XML 1.0 と XML Names 1.0 を参照する。
しかしながら、実装は
<a href="http://www.w3.org/TR/1999/REC-xpath-19991116#XML">[XML]</a>
と
<a href="http://www.w3.org/TR/1999/REC-xpath-19991116#XMLNAMES">[XML Names]</a>
の字句構造仕様、あるいは
<a href="#XML11">[XML 1.1]</a>
と
<a href="#XMLNames11">[XML Names 1.1]</a>
の字句構造仕様のいずれのサポートを選択してもよい。
したがって、常に IRI を通した URI 参照もサポートしてもよい。
一部の場合では XML 1.0 と XML 1.1 の定義は完全に一致する。
</ins>
<span lang="en">
<ins >
In addition, XML 1.0 and XML Names 1.0 references are always used for convenience.
However, an implementation may choose to support [XML] and [XML Names]., or [XML 1.1] and [XML Names 1.1] lexical specification.
Thus, URI references are also always used though IRI may also be supported.
In some cases, the XML 1.0 and XML 1.1 definitions may be exactly the same.</ins>
</span>
</p>


</section>
<section>


<h2 id="location-paths" title="2 Location Paths">2 ロケーションパス</h2>

<p>
ロケーションパスは、 XPath 言語の中では最上位の文法上の構成要素ではないが（
<a href="#NT-LocationPath">LocationPath</a>
は
<a href="#NT-Expr">Expr</a>
の特殊なケースになる）、最も重要なので最初に述べる。
<span lang="en">
Although location paths are not the most general grammatical construct in the language (a LocationPath is a special case of an Expr), they are the most important construct and will therefore be described first.</span>
</p>

<p>
すべてのロケーションパスには、冗長だが確実な構文による表記がある。
より簡潔な表記による省略構文も数多く用意されている。
この節ではまず、非省略構文を用いたロケーションパスの意味内容について述べる。
しかる後、省略構文がどのように非省略構文に展開されるかについて述べる（
<a href="#path-abbrev">[<b>2.5 省略構文</b>]</a>
参照）。
<span lang="en">
Every location path can be expressed using a straightforward but rather verbose syntax.
There are also a number of syntactic abbreviations that allow common cases to be expressed concisely.
This section will explain the semantics of location paths using the unabbreviated syntax.
The abbreviated syntax will then be explained by showing how it expands into the unabbreviated syntax (see [2.5 Abbreviated Syntax]).</span>
</p>

<p>
非省略構文によるロケーションパスの例を以下に挙げる：
<span lang="en">
Here are some examples of location paths using the unabbreviated syntax:</span>
</p>

<ul>

<li>
<p>
<code>child::para</code> は文脈ノードの子の <code>para</code> 要素すべてを選択する。
<span lang="en">
child::para selects the para element children of the context node</span>
</p>
</li>

<li>
<p>
<code>child::*</code> は文脈ノードの子要素すべてを選択する。
<span lang="en">
child::* selects all element children of the context node</span>
</p>
</li>

<li>
<p>
<code>child::text()</code> は文脈ノードの、すべての子テキストノードを選択する。
<span lang="en">
child::text() selects all text node children of the context node</span>
</p>
</li>

<li>
<p>
<code>child::node()</code> はノード型に関係なく、文脈ノードのすべての子ノードを選択する。
<span lang="en">
child::node() selects all the children of the context node, whatever their node type</span>
</p>
</li>

<li>
<p>
<code>attribute::name</code> は文脈ノードの <code>name</code> 属性を選択する。
<span lang="en">
attribute::name selects the name attribute of the context node</span>
</p>
</li>

<li>
<p>
<code>attribute::*</code> は文脈ノードのすべての属性を選択する。
<span lang="en">
attribute::* selects all the attributes of the context node</span>
</p>
</li>

<li>
<p>
<code>descendant::para</code> は文脈ノードの子孫の <code>para</code> 要素すべてを選択する。
<span lang="en">
descendant::para selects the para element descendants of the context node</span>
</p>
</li>

<li>
<p>
<code>ancestor::div</code> は文脈ノードの先祖の <code>div</code> 要素すべてを選択する。
<span lang="en">
ancestor::div selects all div ancestors of the context node</span>
</p>
</li>

<li>
<p>
<code>ancestor-or-self::div</code> は文脈ノードの先祖の <code>div</code> 要素すべてに加え、文脈ノード自身が <code>div</code> 要素ならば自身も選択する。
<span lang="en">
ancestor-or-self::div selects the div ancestors of the context node and, if the context node is a div element, the context node as well</span>
</p>
</li>

<li>
<p>
<code>descendant-or-self::para</code> は文脈ノードの子孫の <code>para</code> 要素すべてに加え、文脈ノード自身が <code>para</code> 要素ならば自身も選択する。
<span lang="en">
descendant-or-self::para selects the para element descendants of the context node and, if the context node is a para element, the context node as well</span>
</p>
</li>

<li>
<p>
<code>self::para</code> は文脈ノード自身が <code>para</code> 要素ならば自身を選択し、そうでなければ何も選択しない。
<span lang="en">
self::para selects the context node if it is a para element, and otherwise selects nothing</span>
</p>
</li>

<li>
<p>
<code>child::chapter/descendant::para</code> は文脈ノードの子の <code>chapter</code> 要素すべての子孫の <code>para</code> 要素すべてを選択する。
<span lang="en">
child::chapter/descendant::para selects the para element descendants of the chapter element children of the context node</span>
</p>
</li>

<li>
<p>
<code>child::*/child::para</code> は文脈ノードの孫（子の子）の <code>para</code> 要素すべてを選択する。
<span lang="en">
child::*/child::para selects all para grandchildren of the context node</span>
</p>
</li>

<li>
<p>
<code>/</code> は文書ルートを選択する（文書ルートは常に文書要素の親となる）。
<span lang="en">
/ selects the document root (which is always the parent of the document element)</span>
</p>
</li>

<li>
<p>
<code>/descendant::para</code> は文脈ノードと同じ文書内の <code>para</code> 要素すべてを選択する。
<span lang="en">
/descendant::para selects all the para elements in the same document as the context node</span>
</p>
</li>

<li>
<p>
<code>/descendant::olist/child::item</code> は文脈ノードと同じ文書内にある <code>item</code> 要素のうち、 <code>olist</code> 要素を親に持つものすべてを選択する。
<span lang="en">
/descendant::olist/child::item selects all the item elements that have an olist parent and that are in the same document as the context node</span>
</p>
</li>

<li>
<p>
<code>child::para[position()=1]</code> は文脈ノードの子の <code>para</code> 要素のうち、最初のものを選択する。
<span lang="en">
child::para[position()=1] selects the first para child of the context node</span>
</p>
</li>

<li>
<p>
<code>child::para[position()=last()]</code> は文脈ノードの子の <code>para</code> 要素のうち、最後のものを選択する。
<span lang="en">
child::para[position()=last()] selects the last para child of the context node</span>
</p>
</li>

<li>
<p>
<code>child::para[position()=last()-1]</code> は文脈ノードの最後から 2 番目の <code>para</code> 子要素を選択する。
<span class="trans-note">【「最後から 2 番目の para 子要素」 - 子ノードであってノード種が要素であって要素名が para のものの中で最後から 2 番目。最後から 2 番目の子ノードではない。以下同様】</span>
<span lang="en">
child::para[position()=last()-1] selects the last but one para child of the context node</span>
</p>
</li>

<li>
<p>
<code>child::para[position()&gt;1]</code> は文脈ノードの <code>para</code> 子要素のうち、最初のものを除くすべてを選択する。
<span lang="en">
child::para[position()&gt;1] selects all the para children of the context node other than the first para child of the context node</span>
</p>
</li>

<li>
<p>
<code>following-sibling::chapter[position()=1]</code> は文脈ノードの次の <code>chapter</code> 同胞要素を選択する。
<span class="trans-note">【同胞 - 'sibling' ：同じ親を持つ同種のノード（兄弟ノード）】</span>
<span lang="en">
following-sibling::chapter[position()=1] selects the next chapter sibling of the context node</span>
</p>
</li>

<li>
<p>
<code>preceding-sibling::chapter[position()=1]</code> は文脈ノードの前の <code>chapter</code> 同胞要素を選択する。
<span lang="en">
preceding-sibling::chapter[position()=1] selects the previous chapter sibling of the context node</span>
</p>
</li>

<li>
<p>
<code>/descendant::figure[position()=42]</code> は文書内の 42 番目の <code>figure</code> 要素を選択する。
<span lang="en">
/descendant::figure[position()=42] selects the forty-second figure element in the document</span>
</p>
</li>

<li>
<p>
<code>/child::doc/child::chapter[position()=5]/child::section[position()=2]</code> は文書要素 <code>doc</code> の 5 番目の <code>chapter</code> 子要素の、2 番目の <code>section</code> 子要素を選択する。
<span class="trans-note">【 <code>doc</code> は自動的に文書要素にあたるものになる】</span>
<span lang="en">
/child::doc/child::chapter[position()=5]/child::section[position()=2] selects the second section of the fifth chapter of the doc document element</span>
</p>
</li>

<li>
<p>
<code>child::para[attribute::type="warning"]</code> は文脈ノードの <code>para</code> 子要素のうち、 <code>type</code> 属性の値が <code>warning</code> のものすべてを選択する。
<span lang="en">
child::para[attribute::type="warning"] selects all para children of the context node that have a type attribute with value warning</span>
</p>
</li>

<li>
<p>
<code>child::para[attribute::type='warning'][position()=5]</code> は文脈ノードの <code>para</code> 子要素で  <code>type</code> 属性の値が <code>warning</code> のものから、 5 番目の要素を選択する。
<!-- □ -->
<span lang="en">
child::para[attribute::type='warning'][position()=5] selects the fifth para child of the context node that has a type attribute with value warning</span>
</p>
</li>

<li>
<p>
<code>child::para[position()=5][attribute::type="warning"]</code> は、文脈ノードの 5 番目の <code>para</code> 子要素の <code>type</code> 属性の値が <code>warning</code> であれば、その <code>para</code> 子要素を選択する。
<span lang="en">
child::para[position()=5][attribute::type="warning"] selects the fifth para child of the context node if that child has a type attribute with value warning</span>
</p>
</li>

<li>
<p>
<code>child::chapter[child::title='Introduction']</code> は、文脈ノードの <code>chapter</code> 子要素のうち、
<a href="#dt-string-value">文字列値</a>
が <code>Introduction</code> になる <code>title</code> 要素を子要素に１個以上持つものすべてを選択する。
<span lang="en">
child::chapter[child::title='Introduction'] selects the chapter children of the context node that have one or more title children with string-value equal to Introduction</span>
</p>
</li>

<li>
<p>
<code>child::chapter[child::title]</code> は、文脈ノードの <code>chapter</code> 子要素のうち、 <code>title</code> 子要素を１個以上持つものすべてを選択する。
<span lang="en">
child::chapter[child::title] selects the chapter children of the context node that have one or more title children</span>
</p>
</li>

<li>
<p>
<code>child::*[self::chapter or self::appendix]</code> は、文脈ノードの <code>chapter</code> 子要素すべてと <code>appendix</code> 子要素すべてを選択する。
<span lang="en">
child::*[self::chapter or self::appendix] selects the chapter and appendix children of the context node</span>
</p>
</li>

<li>
<p>
<code>child::*[self::chapter or self::appendix][position()=last()]</code> は、文脈ノードの <code>chapter</code> 子要素すべてと <code>appendix</code> 子要素すべてを併せた中から最後のものを選択する。
<span lang="en">
child::*[self::chapter or self::appendix][position()=last()] selects the last chapter or appendix child of the context node</span>
</p>
</li>

</ul>

<p>
ロケーションパスには相対ロケーションパスと絶対ロケーションパスの２種類がある。
<span lang="en">
There are two kinds of location path: relative location paths and absolute location paths.</span>
</p>

<p>
相対ロケーションパスは <code>/</code> で区切られた１つ以上のロケーションステップを順に並べたものから構成される。
各ステップは左から右に結合され、それぞれが文脈ノードに対して相対的なノードの集合を順次選択する。
各ステップの最初のシーケンスは、次のような方法で後続のステップと結合される。
各ステップの最初のシーケンスでは、文脈ノードに対して相対的なノードの集合を選択する。
その集合に属する各ノードは、後続のステップの文脈ノードに使用される。
後段のステップで特定されたノードの集合は１つに併合され、この併合されたノード集合が、ステップの結合により特定されるノード集合となる。
例えば <code>child::div/child::para</code> は文脈ノードの <code>div</code> 子要素の <code>para</code> 子要素を選択する。
言い換えれば <code>div</code> 要素を親に持つ <code>para</code> 孫要素を選択する。
<!-- □ -->
<span lang="en">
A relative location path consists of a sequence of one or more location steps separated by /.
The steps in a relative location path are composed together from left to right.
Each step in turn selects a set of nodes relative to a context node.
An initial sequence of steps is composed together with a following step as follows.
The initial sequence of steps selects a set of nodes relative to a context node.
Each node in that set is used as a context node for the following step.
The sets of nodes identified by that step are unioned together.
The set of nodes identified by the composition of the steps is this union.
For example, child::div/child::para selects the para element children of the div element children of the context node, or, in other words, the para element grandchildren that have div parents.</span>
</p>

<p>
絶対ロケーションパスは <code>/</code> とオプションで後続する相対ロケーションパスから構成される。
<code>/</code> 自体は文脈ノードを含んでいる文書のルートノードを選択する。
相対ロケーションパスを後続させた場合、そのロケーションパスは文脈ノードを含む文書のルートノードに対し相対的なノードの集合、すなわち、文脈ノードがルートノードだったとするときに相対ロケーションパスを単独で適用した結果選択されることになるノードの集合を選択する。
<span lang="en">
An absolute location path consists of / optionally followed by a relative location path.
A / by itself selects the root node of the document containing the context node.
If it is followed by a relative location path, then the location path selects the set of nodes that would be selected by the relative location path relative to the root node of the document containing the context node.</span>
</p>

<table class="scrap">
<caption title="Location Paths">ロケーションパス</caption>
<tbody>
<tr id="NT-LocationPath">
<td>[1]</td><td>LocationPath</td><td>::=</td><td><a href="#NT-RelativeLocationPath">RelativeLocationPath</a><br />
| <a href="#NT-AbsoluteLocationPath">AbsoluteLocationPath</a></td>
</tr>
<tr id="NT-AbsoluteLocationPath">
<td>[2]</td><td>AbsoluteLocationPath</td><td>::=</td><td>'/' <a href="#NT-RelativeLocationPath">RelativeLocationPath</a>?<br />
| <a href="#NT-AbbreviatedAbsoluteLocationPath">AbbreviatedAbsoluteLocationPath</a></td>
</tr>
<tr id="NT-RelativeLocationPath">
<td>[3]</td><td>RelativeLocationPath</td><td>::=</td><td><a href="#NT-Step">Step</a><br />
| <a href="#NT-RelativeLocationPath">RelativeLocationPath</a> '/' <a href="#NT-Step">Step</a><br />
| <a href="#NT-AbbreviatedRelativeLocationPath">AbbreviatedRelativeLocationPath</a></td>
</tr>
</tbody>
</table>

	<section>


<h3 id="section-Location-Steps" title="2.1 Location Steps">2.1 ロケーションステップ</h3>

<p>
ロケーションステップは次の３つの部分からなる：
<span lang="en">
A location step has three parts:</span>
</p>

<ul>
<li>
<p>
軸。
ロケーションステップにより選択されるノードと、文脈ノードとの間のツリー関係を指定する。
<span lang="en">
an axis, which specifies the tree relationship between the nodes selected by the location step and the context node,</span>
</p>
</li>

<li>
<p>
ノードテスト。
ロケーションステップで選択されるノードのノード型と
<a href="#dt-expanded-name">展開名</a>
を指定する。
<span lang="en">
a node test, which specifies the node type and expanded-name of the nodes selected by the location step, and</span>
</p>
</li>

<li>
<p>
０個以上の述語。
ロケーションステップで選択されるノードの集合を、任意の式により更に選別する。
<span lang="en">
zero or more predicates, which use arbitrary expressions to further refine the set of nodes selected by the location step.</span>
</p>
</li>

</ul>

<p>
ロケーションステップの構文では、軸名とノードテストを二重コロンで区切り、角括弧で括られた式（述語）を０個以上後続させる。
例えば <code>child::para[position()=1]</code> では、 <code>child</code> が軸名, <code>para</code> がノードテスト, <code>[position()=1]</code> が述語になる。
<span lang="en">
The syntax for a location step is the axis name and node test separated by a double colon, followed by zero or more expressions each in square brackets.
For example, in child::para[position()=1], child is the name of the axis, para is the node test and [position()=1] is a predicate.</span>
</p>

<p>
ロケーションステップによるノード集合の選択においては、まず、軸とノードテストから初期ノード集合が生成され、その集合に対し述語により順次ふるいがかけられる。
<span lang="en">
The node-set selected by the location step is the node-set that results from generating an initial node-set from the axis and node-test, and then filtering that node-set by each of the predicates in turn.</span>
</p>

<p>
この初期ノード集合は、文脈ノードとの間に軸で指定された関係を持ち、かつ、ノードテストで指定したノード型と
<a href="#dt-expanded-name">展開名</a>
を持つノードからなる。
例えばロケーションステップ <code>descendant::para</code> は、文脈ノードの子孫の <code>para</code> 要素すべてを選択する。
この <code>descendant</code> は初期ノード集合に属する各ノードが文脈ノードの子孫でなければならないことを指定し, <code>para</code> は初期ノード集合に属する各ノードが <code>para</code> 要素でなければならないことを指定する。
どのような軸を利用できるのかについては
<a href="#axes">[<b>2.2 軸</b>]</a>
にて述べる。
またノードテストについては
<a href="#node-tests">[<b>2.3 ノードテスト</b>]</a>
にて述べる。
一部のノードテストは、軸により意味が変わり得る。
<span lang="en">
The initial node-set consists of the nodes having the relationship to the context node specified by the axis, and having the node type and expanded-name specified by the node test.
For example, a location step descendant::para selects the para element descendants of the context node: descendant specifies that each node in the initial node-set must be a descendant of the context; para specifies that each node in the initial node-set must be an element named para.
The available axes are described in [2.2 Axes].
The available node tests are described in [2.3 Node Tests].
The meaning of some node tests is dependent on the axis.</span>
</p>

<p>
１つめの述語により、初期ノード集合はふるいにかけられ、新しいノード集合が生成される。
この新たなノード集合は更に２つめの述語でふるいにかけられ、以下同様に処理が続けられる。
このようにして最終的に残ったノード集合が、ロケーションステップにより選択されるノード集合になる。
各述語の式がどのように評価されるかは軸にも左右され、述語の意味内容は軸に関連して定義される。
<a href="#predicates">[<b>2.4 述語</b>]</a>
参照。
<span lang="en">
The initial node-set is filtered by the first predicate to generate a new node-set; this new node-set is then filtered using the second predicate, and so on.
The final node-set is the node-set selected by the location step.
The axis affects how the expression in each predicate is evaluated and so the semantics of a predicate is defined with respect to an axis.
See [2.4 Predicates].</span>
</p>

<table class="scrap">
<caption title="Location Steps">ロケーションステップ</caption>
<tbody>
<tr id="NT-Step">
<td>[4]</td><td>Step</td><td>::=</td><td><a href="#NT-AxisSpecifier">AxisSpecifier</a>
<a href="#NT-NodeTest">NodeTest</a>
<a href="#NT-Predicate">Predicate</a>*<br />
| <a href="#NT-AbbreviatedStep">AbbreviatedStep</a></td>
</tr>
<tr id="NT-AxisSpecifier">
<td>[5]</td><td>AxisSpecifier</td><td>::=</td><td><a href="#NT-AxisName">AxisName</a> '::'<br />
| <a href="#NT-AbbreviatedAxisSpecifier">AbbreviatedAxisSpecifier</a>
</td>
</tr>
</tbody>
</table>


	</section>
	<section>

<h3 id="axes" title="2.2 Axes">2.2 軸</h3>

<p>
次に挙げる軸が利用できる：
<span lang="en">
The following axes are available:</span>
</p>

<ul>

<li>
<p>
<code>child</code> 軸は文脈ノードの子ノードすべてを選択する。
<span lang="en">
the child axis contains the children of the context node</span>
</p>
</li>

<li>
<p>
<code>descendant</code> 軸は文脈ノードの子孫ノードすべてを選択する。
子孫ノードとは、子ノード, 子ノードの子ノード, ... 等々である。
従って <code>descendant</code> 軸に属性ノードや名前空間ノードが含まれることはない。
<span lang="en">
the descendant axis contains the descendants of the context node; a descendant is a child or a child of a child and so on; thus the descendant axis never contains attribute or namespace nodes</span>
</p>
</li>

<li>
<p>
<code>parent</code> 軸は、文脈ノードの
<a href="#dt-parent">親ノード</a>
を（存在するならば）選択する。
<span lang="en">
the parent axis contains the parent of the context node, if there is one</span>
</p>
</li>

<li>
<p>
<code>ancestor</code> 軸は文脈ノードの先祖ノードすべてを選択する。
文脈ノードの先祖ノードとは、文脈ノードの
<a href="#dt-parent">親ノード</a>, 親ノードの親ノード, ... 等々である。
従って、文脈ノードがルートノードの場合を除き、 <code>ancestor</code> 軸には常にルートノードも含まれることになる。
<span lang="en">
the ancestor axis contains the ancestors of the context node; the ancestors of the context node consist of the parent of context node and the parent's parent and so on; thus, the ancestor axis will always include the root node, unless the context node is the root node</span>
</p>
</li>

<li>
<p>
<code>following-sibling</code> 軸は文脈ノードに後続する同胞ノードすべてを選択する。
文脈ノードが属性ノードまたは名前空間ノードの場合、 <code>following-sibling</code> 軸は空になる。
<span lang="en">
the following-sibling axis contains all the following siblings of the context node; if the context node is an attribute node or namespace node, the following-sibling axis is empty</span>
</p>
</li>

<li>
<p>
<code>preceding-sibling</code> 軸は文脈ノードの前にある同胞ノードすべてを選択する。
文脈ノードが属性ノードまたは名前空間ノードの場合、 <code>preceding-sibling</code> 軸は空になる。
<span lang="en">
the preceding-sibling axis contains all the preceding siblings of the context node; if the context node is an attribute node or namespace node, the preceding-sibling axis is empty</span>
</p>
</li>

<li>
<p>
<code>following</code> 軸は文脈ノードと同じ文書内で文書順で文脈ノード以降にあるノードすべてを選択する。
ただし子孫ノード, 属性ノード, 名前空間ノードは除外される。
<span lang="en">
the following axis contains all nodes in the same document as the context node that are after the context node in document order, excluding any descendants and excluding attribute nodes and namespace nodes</span>
</p>
</li>

<li>
<p>
<code>preceding</code> 軸は、文脈ノードと同じ文書内で文書順で文脈ノードより前にあるノードすべてを選択する。
ただし先祖ノード, 属性ノード, 名前空間ノードは除外される。
<span lang="en">
the preceding axis contains all nodes in the same document as the context node that are before the context node in document order, excluding any ancestors and excluding attribute nodes and namespace nodes</span>
</p>
</li>

<li>
<p>
<code>attribute</code> 軸は文脈ノードの属性すべてを選択する。
文脈ノードが要素でなければ、この軸は空になる。
<span lang="en">
the attribute axis contains the attributes of the context node; the axis will be empty unless the context node is an element</span>
</p>
</li>

<li>
<p>
<code>namespace</code> 軸は文脈ノードの名前空間ノードすべてを選択する。
文脈ノードが要素でなければ、この軸は空になる。
<span lang="en">
the namespace axis contains the namespace nodes of the context node; the axis will be empty unless the context node is an element</span>
</p>
</li>

<li>
<p>
<code>self</code> 軸は文脈ノード自身のみを選択する。
<span lang="en">
the self axis contains just the context node itself</span>
</p>
</li>

<li>
<p>
<code>descendant-or-self</code> 軸は文脈ノードの子孫ノードすべてに加え、文脈ノード自身も選択する。
<span lang="en">
the descendant-or-self axis contains the context node and the descendants of the context node</span>
</p>
</li>

<li>
<p>
<code>ancestor-or-self</code> 軸は文脈ノードの先祖ノードすべてに加え、文脈ノード自身も選択する。
従って <code>ancestor-or-self</code> 軸には常にルートノードも含まれることになる。
<span lang="en">
the ancestor-or-self axis contains the context node and the ancestors of the context node; thus, the <del class="errata">ancestor</del> <ins class="errata">ancestor-or-self</ins> axis will always include the root node</span>
</p>
</li>

</ul>

<blockquote>
<p>
<b>注記：</b>
（属性ノードと名前空間ノードを無視するなら）一つの文書は軸 <code>ancestor</code>, <code>descendant</code>, <code>following</code>, <code>preceding</code>, <code>self</code> により分割される：これらの軸に互いに重複する部分はなく、文書内のすべてのノードはこれらの軸のいずれかに含まれる。
<span lang="en">
NOTE: The ancestor, descendant, following, preceding and self axes partition a document (ignoring attribute and namespace nodes): they do not overlap and together they contain all the nodes in the document.</span>
</p>
</blockquote>


<table class="scrap">
<caption title="Axis">軸</caption>
<tbody>
<tr id="NT-AxisName">
<td>[6]</td><td>AxisName</td><td>::=</td><td>'ancestor'<br />
| 'ancestor-or-self'<br />
| 'attribute'<br />
| 'child'<br />
| 'descendant'<br />
| 'descendant-or-self'<br />
| 'following'<br />
| 'following-sibling'<br />
| 'namespace'<br />
| 'parent'<br />
| 'preceding'<br />
| 'preceding-sibling'<br />
| 'self'</td>
</tr>
</tbody>
</table>


	</section>
	<section>


<h3 id="node-tests" title="2.3 Node Tests">2.3 ノードテスト</h3>

<p>
どの軸にも <dfn id="dt-principal-node-type">主ノード型</dfn> がある。
軸が要素を選択する場合、主ノード型は要素である。
それ以外は軸が選択するノードの型が主ノード型になる。
従って、
<span lang="en">
Every axis has a principal node type.
If an axis can contain elements, then the principal node type is element; otherwise, it is the type of the nodes that the axis can contain.
Thus,</span>
</p>
<ul>
<li>
<p >
attribute 軸の主ノード型は属性である。
<span lang="en">
For the attribute axis, the principal node type is attribute.</span>
</p>
</li>
<li>
<p >
namespace 軸の主ノード型は名前空間である。
<span lang="en">
For the namespace axis, the principal node type is namespace.</span>
</p>
</li>
<li>
<p >
その他の軸の主ノード型は要素である。
<span lang="en">
For other axes, the principal node type is element.</span>
</p>
</li>
</ul>

<p>
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
によるノードテストでは、ノードの型（
<a href="#data-model">[<b>5 データモデル</b>]</a>
参照）が主ノード型に一致し、かつ、ノードの
<a href="#dt-expanded-name">展開名</a>
が
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
が指定する
<a href="#dt-expanded-name">展開名</a>
に一致するとき、そのときに限り、真と評価される。
例えば <code>child::para</code> は、文脈ノードの子の <code>para</code> 要素を選択するが、文脈ノードの子に <code>para</code> 要素が存在しない場合、選択されるノード集合は空になる。
<code>attribute::href</code> は文脈ノードの <code>href</code> 属性を選択するが、文脈ノードに <code>href</code> 属性が存在しない場合、選択されるノード集合は空になる。
<span lang="en">
A node test that is a QName is true if and only if the type of the node (see [5 Data Model]) is the principal node type and has an expanded-name equal to the expanded-name specified by the QName.
For example, child::para selects the para element children of the context node; if the context node has no para children, it will select an empty set of nodes.
attribute::href selects the href attribute of the context node; if the context node has no href attribute, it will select an empty set of nodes.</span>
</p>

<p>
ノードテストにおける
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
は、式の文脈に有効な名前空間宣言を用いて
<a href="#dt-expanded-name">展開名</a>
に展開される。
これは開始タグや終了タグの要素型名（タグ名）の展開と同じ方法である。
ただし、 <code>xmlns</code> で宣言された既定の名前空間は利用されない。
従って、
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
に接頭辞が与えられていない場合、名前空間 URI は null になる（属性名の展開と同じ方法になる）。
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
に接頭辞が与えられていて、式の文脈においてその接頭辞の名前空間宣言が存在しない場合、エラーとする。
<span lang="en">
A QName in the node test is expanded into an expanded-name using the namespace declarations from the expression context.
This is the same way expansion is done for element type names in start and end-tags except that the default namespace declared with xmlns is not used: if the QName does not have a prefix, then the namespace URI is null (this is the same way attribute names are expanded).
It is an error if the QName has a prefix for which there is no namespace declaration in the expression context.</span>
</p>

<p>
ノードテスト <code>*</code> は、主ノード型のノードであればどのノードでも真になる。
例えば <code>child::*</code> は文脈ノードのすべての子要素を選択し、 <code>attribute::*</code> は文脈ノードのすべての属性を選択する。
<span lang="en">
A node test * is true for any node of the principal node type.
For example, child::* will select all element children of the context node, and attribute::* will select all attributes of the context node.</span>
</p>

<p>
ノードテストは
<a href="http://www.w3.org/TR/REC-xml-names#NT-NCName">NCName</a><code>:*</code>
の形式もとれる。
この場合、接頭辞（ NCName の部分）が、文脈に有効な名前空間宣言を用いて
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
と同じように展開される。
式の文脈に有効な名前空間宣言にこの接頭辞に対応するものが存在しない場合、エラーとする。
このノードテストでは、主ノード型の任意のノードに対し、その
<a href="#dt-expanded-name">展開名</a>
の名前空間 URI がこの接頭辞を展開した名前空間 URI に一致するとき（局所部が何であれ）真になる。
<span class="trans-note">【 * はすべての局所部に一致するワイルドカードと見なせる】</span>
<span lang="en">
A node test can have the form NCName:*.
In this case, the prefix is expanded in the same way as with a QName, using the context namespace declarations.
It is an error if there is no namespace declaration for the prefix in the expression context.
The node test will be true for any node of the principal type whose expanded-name has the namespace URI to which the prefix expands, regardless of the local part of the name.</span>
</p>

<p>
ノードテスト <code>text()</code> は、どのテキストノードに対しても真になる。
例えば <code>child::text()</code> は文脈ノードの子テキストノードを選択する。
同様に、ノードテスト <code>comment()</code> もすべてのコメントノードに対し真になり, ノードテスト <code>processing-instruction()</code> もすべての処理命令に対し真になる。
ノードテスト <code>processing-instruction()</code> は
<a href="#NT-Literal">Literal</a>
引数もとり得る。
この場合、
<a href="#NT-Literal">Literal</a>
の値と同じ名前を持つ処理命令すべてに対し真になる。
<span lang="en">
The node test text() is true for any text node.
For example, child::text() will select the text node children of the context node.
Similarly, the node test comment() is true for any comment node, and the node test processing-instruction() is true for any processing instruction.
The processing-instruction() test may have an argument that is Literal; in this case, it is true for any processing instruction that has a name equal to the value of the Literal.</span>
</p>

<p>
ノードテスト <code>node()</code> は、どのような型のノードでも真になる。
<span lang="en">
A node test node() is true for any node of any type whatsoever.</span>
</p>

<table class="scrap">
<tbody>
<tr id="NT-NodeTest">
<td>[7]</td><td>NodeTest</td><td>::=</td><td><a href="#NT-NameTest">NameTest</a><br />
| <a href="#NT-NodeType">NodeType</a> '(' ')'<br />
| 'processing-instruction' '(' <a href="#NT-Literal">Literal</a> ')'</td>
</tr>
</tbody>
</table>

	</section>
	<section>

<h3 id="predicates" title="2.4 Predicates">2.4 述語</h3>

<p>
軸は正順軸または逆順軸のいずれかである。
正順軸は文脈ノード自身か
<a href="#dt-document-order">文書順</a>
で文脈ノードより後にあるノードのみを選択の対象にする。
逆順軸は文脈ノード自身か
<a href="#dt-document-order">文書順</a>
で文脈ノードより前にあるノードだけを選択の対象にする。
すなわち、 ancestor, ancestor-or-self, preceding, preceding-sibling は逆順軸であり、それ以外はすべて正順軸になる。
self 軸は常に高々１個のノードしか含まれないため、正順軸と逆順軸のどちらに解釈しても同じになる。
軸に関するノード集合に属するノードの <dfn id="dt-proximity-position">近さ</dfn> （ proximity position ）は、正順軸の場合は文書順のまま、逆順軸の場合は文書順と逆順によるノード集合内でのノードの位置から定まるものとする。
最初の位置は 1 である。
<span lang="en">
An axis is either a forward axis or a reverse axis.
An axis that only ever contains the context node or nodes that are after the context node in document order is a forward axis.
An axis that only ever contains the context node or nodes that are before the context node in document order is a reverse axis.
Thus, the ancestor, ancestor-or-self, preceding, and preceding-sibling axes are reverse axes; all other axes are forward axes.
Since the self axis always contains at most one node, it makes no difference whether it is a forward or reverse axis.
The proximity position of a member of a node-set with respect to an axis is defined to be the position of the node in the node-set ordered in document order if the axis is a forward axis and ordered in reverse document order if the axis is a reverse axis.
The first position is 1.</span>
</p>

<p>
述語は軸を基にしてノード集合をふるいにかけ、新しいノード集合を生成する。
ふるいの対象のノード集合に属する各ノードに対し、そのノードを文脈ノードとして
<a href="#NT-PredicateExpr">PredicateExpr</a>
を評価する。
このとき、ノード集合内のノード数を文脈サイズに用い、軸におけるノード集合内のノードの
<a href="#dt-proximity-position">近さ</a>
を文脈位置に用いる。
ノードに対する
<a href="#NT-PredicateExpr">PredicateExpr</a>
の評価結果が真になれば、そのノードは新しいノード集合に入り、偽の場合は入らない。
<span lang="en">
A predicate filters a node-set with respect to an axis to produce a new node-set.
For each node in the node-set to be filtered, the PredicateExpr is evaluated with that node as the context node, with the number of nodes in the node-set as the context size, and with the proximity position of the node in the node-set with respect to the axis as the context position; if PredicateExpr evaluates to true for that node, the node is included in the new node-set; otherwise, it is not included.</span>
</p>

<p>
<a href="#NT-PredicateExpr">PredicateExpr</a>
の評価においては
<a href="#NT-Expr">Expr</a>
の評価結果がブール値に変換される。
結果が数値の場合、それが文脈位置と同じなら真、そうでないなら偽に変換される。
結果が数値以外の場合、
<b><a href="#function-boolean">boolean</a></b>
関数を呼び出したかのように変換される。
従って、ロケーションパス <code>para[3]</code> は <code>para[position()=3]</code> と等価になる。
<span lang="en">
A PredicateExpr is evaluated by evaluating the Expr and converting the result to a boolean.
If the result is a number, the result will be converted to true if the number is equal to the context position and will be converted to false otherwise; if the result is not a number, then the result will be converted as if by a call to the boolean function.
Thus a location path para[3] is equivalent to para[position()=3].</span>
</p>

<table class="scrap">
<caption title="Predicates">述語</caption>
<tbody>
<tr id="NT-Predicate">
<td>[8]</td><td>Predicate</td><td>::=</td><td>'[' <a href="#NT-PredicateExpr">PredicateExpr</a> ']'</td>
</tr>
<tr id="NT-PredicateExpr">
<td>[9]</td><td>PredicateExpr</td><td>::=</td><td><a href="#NT-Expr">Expr</a></td>
</tr>
</tbody>
</table>


	</section>
	<section>


<h3 id="path-abbrev" title="2.5 Abbreviated Syntax">2.5 省略構文</h3>

<p>
省略構文を用いたロケーションパスの例を以下に挙げる：
<span lang="en">
Here are some examples of location paths using abbreviated syntax:</span>
</p>

<ul>

<li>
<p>
<code>para</code> は文脈ノードの <code>para</code> 子要素すべてを選択する。
<span lang="en">
para selects the para element children of the context node</span>
</p>
</li>

<li>
<p>
<code>*</code> は文脈ノードの子要素すべてを選択する。
<span lang="en">
* selects all element children of the context node</span>
</p>
</li>

<li>
<p>
<code>text()</code> は文脈ノードの子テキストノードすべてを選択する。
<span lang="en">
text() selects all text node children of the context node</span>
</p>
</li>

<li>
<p>
<code>@name</code> は文脈ノードの <code>name</code> 属性を選択する。
<span lang="en">
@name selects the name attribute of the context node</span>
</p>
</li>

<li>
<p>
<code>@*</code> は文脈ノードの属性すべてを選択する。
<span lang="en">
@* selects all the attributes of the context node</span>
</p>
</li>

<li>
<p>
<code>para[1]</code> は文脈ノードの最初の <code>para</code> 子要素を選択する。
<span lang="en">
para[1] selects the first para child of the context node</span>
</p>
</li>

<li>
<p>
<code>para[last()]</code> は文脈ノードの最後の <code>para</code> 子要素を選択する。
<span lang="en">
para[last()] selects the last para child of the context node</span>
</p>
</li>

<li>
<p>
<code>*/para</code> は文脈ノードの <code>para</code> 孫要素すべてを選択する。
<span lang="en">
*/para selects all para grandchildren of the context node</span>
</p>
</li>

<li>
<p>
<code>/doc/chapter[5]/section[2]</code> はルートノードの <code>doc</code> 子要素（文書要素）の 5 番目の <code>chapter</code> 子要素の２番目の <code>section</code> 子要素を選択する。
<span lang="en">
/doc/chapter[5]/section[2] selects the second section of the fifth chapter of the doc</span>
</p>
</li>

<li>
<p>
<code>chapter//para</code> は文脈ノードの <code>chapter</code> 子要素の <code>para</code> 子孫要素すべてを選択する。
<span lang="en">
chapter//para selects the para element descendants of the chapter element children of the context node</span>
</p>
</li>

<li>
<p>
<code>//para</code> は文書ルートの <code>para</code> 子孫要素すべてを選択する。
すなわち、文脈ノードと同じ文書内の <code>para</code> 要素すべてを選択する。
<span lang="en">
//para selects all the para descendants of the document root and thus selects all para elements in the same document as the context node</span>
</p>
</li>

<li>
<p>
<code>//olist/item</code> は、文脈ノードと同じ文書内にある <code>item</code> 要素のうち、<code>olist</code>  要素を親に持つものすべてを選択する。
<span lang="en">
//olist/item selects all the item elements in the same document as the context node that have an olist parent</span>
</p>
</li>

<li>
<p>
<code>.</code> は文脈ノードを選択する。
<span lang="en">
. selects the context node</span>
</p>
</li>

<li>
<p>
<code>.//para</code> は文脈ノードの <code>para</code> 子孫要素すべてを選択する。
<span lang="en">
.//para selects the para element descendants of the context node</span>
</p>
</li>

<li>
<p>
<code>..</code> は文脈ノードの親ノードを選択する。
<span lang="en">
.. selects the parent of the context node</span>
</p>
</li>

<li>
<p>
<code>../@lang</code> は文脈ノードの親ノードの <code>lang</code> 属性を選択する。
<span lang="en">
../@lang selects the lang attribute of the parent of the context node</span>
</p>
</li>

<li>
<p>
<code>para[@type="warning"]</code> は文脈ノードの <code>para</code> 子要素のうち、 <code>type</code> 属性の値が <code>warning</code> になるものすべてを選択する。
<span lang="en">
para[@type="warning"] selects all para children of the context node that have a type attribute with value warning</span>
</p>
</li>

<li>
<p>
<code>para[@type="warning"][5]</code> は文脈ノードの <code>para</code> 子要素のうち、 <code>type</code> 属性の値が <code>warning</code> になるものの中から 5 番目のものを選択する。
<span lang="en">
para[@type="warning"][5] selects the fifth para child of the context node that has a type attribute with value warning</span>
</p>
</li>

<li>
<p>
<code>para[5][@type="warning"]</code> は、文脈ノードの 5 番目の <code>para</code> 子要素の <code>type</code> 属性の値が <code>warning</code> ならば、その子要素を選択する。
<span lang="en">
para[5][@type="warning"] selects the fifth para child of the context node if that child has a type attribute with value warning</span>
</p>
</li>

<li>
<p>
<code>chapter[title="Introduction"]</code> は、文脈ノードの <code>chapter</code> 子要素のうち、
<a href="#dt-string-value">文字列値</a>
が <code>Introduction</code> になる <code>title</code> 子要素を１個以上持つものすべてを選択する。
<span lang="en">
chapter[title="Introduction"] selects the chapter children of the context node that have one or more title children with string-value equal to Introduction</span>
</p>
</li>

<li>
<p>
<code>chapter[title]</code> は文脈ノードの <code>chapter</code> 子要素のうち、 <code>title</code> 子要素を１個以上持つものすべてを選択する。
<span lang="en">
chapter[title] selects the chapter children of the context node that have one or more title children</span>
</p>
</li>

<li>
<p>
<code>employee[@secretary and @assistant]</code> は文脈ノードの <code>employee</code> 子要素のうち、 <code>secretary</code> 属性と <code>assistant</code> 属性の両方を持つものすべてを選択する。
<span lang="en">
employee[@secretary and @assistant] selects all the employee children of the context node that have both a secretary attribute and an assistant attribute</span>
</p>
</li>

</ul>

<p>
省略構文で最も重要なのは、ロケーションステップから <code>child::</code> を省略できることである。
事実上、 <code>child</code> が既定の軸になる。
例えばロケーションパス <code>div/para</code> は <code>child::div/child::para</code> の省略形になる。
<span lang="en">
The most important abbreviation is that child:: can be omitted from a location step.
In effect, child is the default axis.
For example, a location path div/para is short for child::div/child::para.</span>
</p>

<p>
また、 attribute 軸にも省略形がある。
<code>attribute::</code> は <code>@</code> に省略できる。
例えばロケーションパス <code>para[@type="warning"]</code> は <code>child::para[attribute::type="warning"]</code> の省略形であり、 <code>type</code> 属性の値が <code>warning</code> の <code>para</code> 子要素を選択する。
<span lang="en">
There is also an abbreviation for attributes: attribute:: can be abbreviated to @.
For example, a location path para[@type="warning"] is short for child::para[attribute::type="warning"] and so selects para children with a type attribute with value equal to warning.</span>
</p>

<p>
<code>//</code> は <code>/descendant-or-self::node()/</code> の省略形である。
例えば <code>//para</code> は <code>/descendant-or-self::node()/child::para</code> の省略形であり、文書内のあらゆる <code>para</code> 要素を選択する（ <code>para</code> が文書要素であっても、文書要素ノードはルートノードの子なので選択されることになる）。
<code>div//para</code> は <code>child::div/descendant-or-self::node()/child::para</code> の省略形であり、 <code>div</code> 子要素（すべて）の <code>para</code> 子孫要素すべてを選択する。
<span lang="en">
// is short for /descendant-or-self::node()/.
For example, //para is short for /descendant-or-self::node()/child::para and so will select any para element in the document (even a para element that is a document element will be selected by //para since the document element node is a child of the root node); div//para is short for <ins class="errata">child::</ins>div/descendant-or-self::node()/child::para and so will select all para descendants of div children.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
ロケーションパス <code>//para[1]</code> はロケーションパス <code>/descendant::para[1]</code> と<em>同じではない</em>。
後者は、最初の <code>para</code> 子孫要素を選択する一方、前者は、その要素の親にとって最初の <code>para</code> 子要素になるような <code>para</code> 子孫要素すべてを選択する。
<span lang="en">
NOTE: The location path //para[1] does not mean the same as the location path /descendant::para[1].
The latter selects the first descendant para element; the former selects all descendant para elements that are the first para children of their parents.</span>
</p>
</blockquote>

<p>
ロケーションステップ <code>.</code> は <code>self::node()</code> の省略形である。
この省略形は特に <code>//</code> と併用すると有用になる。
例えばロケーションパス <code>.//para</code> は、
<span lang="en">
A location step of . is short for self::node().
This is particularly useful in conjunction with //.
For example, the location path .//para is short for</span>
</p>

<pre>self::node()/descendant-or-self::node()/child::para</pre>

<p>
の省略形であり、文脈ノードの <code>para</code> 子孫要素すべてを選択する。
<!-- 
<span class="trans-note">【 descendant::para と同じになる】</span>
 -->
<span lang="en">
and so will select all para descendant elements of the context node.</span>
</p>

<p>
同様に、ロケーションステップ <code>..</code> は <code>parent::node()</code> の省略形である。
例えば <code>../title</code> は <code>parent::node()/child::title</code> の省略形であり、文脈ノードの親ノードの <code>title</code> 子要素すべてを選択する。
<span lang="en">
Similarly, a location step of .. is short for parent::node().
For example, ../title is short for parent::node()/child::title and so will select the title children of the parent of the context node.</span>
</p>

<table class="scrap">
<caption title="Abbreviations">省略構文</caption>
<tbody>
<tr id="NT-AbbreviatedAbsoluteLocationPath">
<td>[10]</td><td>AbbreviatedAbsoluteLocationPath</td><td>::=</td><td>'//' <a href="#NT-RelativeLocationPath">RelativeLocationPath</a></td>
</tr>
<tr id="NT-AbbreviatedRelativeLocationPath">
<td>[11]</td><td>AbbreviatedRelativeLocationPath</td><td>::=</td><td><a href="#NT-RelativeLocationPath">RelativeLocationPath</a> '//' <a href="#NT-Step">Step</a></td>
</tr>
<tr id="NT-AbbreviatedStep">
<td>[12]</td><td>AbbreviatedStep</td><td>::=</td><td>'.'<br />
| '..'</td>
</tr>
<tr id="NT-AbbreviatedAxisSpecifier">
<td>[13]</td><td>AbbreviatedAxisSpecifier</td><td>::=</td><td>'@'?</td>
</tr>
</tbody>
</table>


	</section>
</section>

<section>

<h2 id="section-Expressions" title="3 Expressions">3 式</h2>


	<section>
<h3 id="section-Basics" title="3.1 Basics">3.1 基本</h3>

<p>
<a href="#NT-VariableReference">VariableReference</a>
（「変数参照」）は、文脈における変数束縛の集合の中で、その変数名に結びつけられている値に評価される。
式の文脈における変数束縛の集合で、その変数名がどの値にも結びつけられていない場合、エラーとする。
<span lang="en">
A VariableReference evaluates to the value to which the variable name is bound in the set of variable bindings in the context.
It is an error if the variable name is not bound to any value in the set of variable bindings in the expression context.</span>
</p>

<p>
グループ化には括弧が用いられる。
<span lang="en">
Parentheses may be used for grouping.</span>
</p>

<table class="scrap">
<tbody>
<tr id="NT-Expr">
<td>[14]</td><td>Expr</td><td>::=</td><td><a href="#NT-OrExpr">OrExpr</a></td>
</tr>
<tr id="NT-PrimaryExpr">
<td>[15]</td><td>PrimaryExpr</td><td>::=</td><td><a href="#NT-VariableReference">VariableReference</a><br />
| '(' <a href="#NT-Expr">Expr</a> ')'<br />
| <a href="#NT-Literal">Literal</a><br />
| <a href="#NT-Number">Number</a><br />
| <a href="#NT-FunctionCall">FunctionCall</a></td>
</tr>
</tbody>
</table>


	</section>
	<section>


<h3 id="section-Function-Calls" title="3.2 Function Calls">3.2 関数呼び出し</h3>

<p>
<a href="#NT-FunctionCall">FunctionCall</a>
式の評価においては、まず
<a href="#NT-FunctionName">FunctionName</a>
を用いてその式が評価される文脈の関数ライブラリの関数が特定され、各
<a href="#NT-Argument">引数</a>
は評価されてから関数が必要とする型に変換され、最終的にそれらを引数に関数が呼び出される。
引数の個数が誤っていたり、引数を必要な型に変換できない場合、エラーとする。
関数の返り値が
<a href="#NT-FunctionCall">FunctionCall</a>
式の結果になる。
<span lang="en">
A FunctionCall expression is evaluated by using the FunctionName to identify a function in the expression evaluation context function library, evaluating each of the Arguments, converting each argument to the type required by the function, and finally calling the function, passing it the converted arguments.
It is an error if the number of arguments is wrong or if an argument cannot be converted to the required type.
The result of the FunctionCall expression is the result returned by the function.</span>
</p>

<p>
引数は
<b><a href="#function-string">string</a></b>
関数を呼び出したかのように文字列型に変換されたり、
<b><a href="#function-number">number</a></b>
関数を呼び出したかのように数値型に変換されたり、
<b><a href="#function-boolean">boolean</a></b>
関数を呼び出したかのようにブール型に変換される。
ノード集合型でない引数がノード集合に変換されることはない。
<span lang="en">
An argument is converted to type string as if by calling the string function.
An argument is converted to type number as if by calling the number function.
An argument is converted to type boolean as if by calling the boolean function.
An argument that is not of type node-set cannot be converted to a node-set.</span>
</p>

<table class="scrap">
<tbody>
<tr id="NT-FunctionCall">
<td>[16]</td><td>FunctionCall</td><td>::=</td><td><a href="#NT-FunctionName">FunctionName</a> '(' ( <a href="#NT-Argument">Argument</a> ( ',' <a href="#NT-Argument">Argument</a> )* )? ')'</td>
</tr>
<tr id="NT-Argument">
<td>[17]</td><td>Argument</td><td>::=</td><td><a href="#NT-Expr">Expr</a></td>
</tr>
</tbody>
</table>

	</section>
	<section>

<h3 id="node-sets" title="3.3 Node-sets">3.3 ノード集合</h3>

<p>
ロケーションパスを式として用いることもできる。
この式は、パスが選択するノードの集合を返す。
<span lang="en">
A location path can be used as an expression.
The expression returns the set of nodes selected by the path.</span>
</p>

<p>
演算子 <code>|</code> はノード集合の和に用いられる。
オペランドはノード集合でなければならない。
<span lang="en">
The | operator computes the union of its operands, which must be node-sets.</span>
</p>

<p>
<a href="#NT-Predicate">述語</a>
を用いてロケーションパスと同じ方法で式にふるいをかけられる。
ふるいをかけられた式の評価結果がノード集合にならない場合、エラーとする。
<a href="#NT-Predicate">述語</a>
は、child 軸を基にノード集合をふるいにかける。
<span lang="en">
Predicates are used to filter expressions in the same way that they are used in location paths.
It is an error if the expression to be filtered does not evaluate to a node-set.
The Predicate filters the node-set with respect to the child axis.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
<a href="#NT-Predicate">述語</a>
の意味は、適用する軸に大きく依存する。
例えば <code>preceding::foo[1]</code> は、述語 <code>[1]</code> を適用する軸が preceding 軸になるので、<em>逆文書順</em>で最初の <code>foo</code> 要素を返す。
一方、 <code>(preceding::foo)[1]</code> では、述語 <code>[1]</code> を適用する軸が child 軸になるので、<em>文書順</em>で最初の <code>foo</code> 要素を返す。
<span lang="en">
NOTE: The meaning of a Predicate depends crucially on which axis applies.
For example, preceding::foo[1] returns the first foo element in reverse document order, because the axis that applies to the [1] predicate is the preceding axis; by contrast, (preceding::foo)[1] returns the first foo element in document order, because the axis that applies to the [1] predicate is the child axis.</span>
</p>
</blockquote>

<p>
演算子 <code>/</code> と演算子 <code>//</code> は、式と相対ロケーションパスを組み合わせる。
式の評価がノード集合にならない場合、エラーとする。
演算子 <code>/</code> は <code>/</code> をロケーションパスで用いるときと同じように合成を行う。
ロケーションパスの場合と同様、 <code>//</code> は <code>/descendant-or-self::node()/</code> の省略形である。
<span lang="en">
The / and // operators compose an expression and a relative location path.
It is an error if the expression does not evaluate to a node-set.
The / operator does composition in the same way as when / is used in a location path.
As in location paths, // is short for /descendant-or-self::node()/.</span>
</p>

<p>
ノード集合に変換できる型のオブジェクトはない。
<span lang="en">
There are no types of objects that can be converted to node-sets.</span>
</p>

<table class="scrap">
<tbody>
<tr id="NT-UnionExpr">
<td>[18]</td><td>UnionExpr</td><td>::=</td><td><a href="#NT-PathExpr">PathExpr</a><br />
| <a href="#NT-UnionExpr">UnionExpr</a> '|' <a href="#NT-PathExpr">PathExpr</a></td>
</tr>
<tr id="NT-PathExpr">
<td>[19]</td><td>PathExpr</td><td>::=</td><td><a href="#NT-LocationPath">LocationPath</a><br />
| <a href="#NT-FilterExpr">FilterExpr</a><br />
| <a href="#NT-FilterExpr">FilterExpr</a> '/' <a href="#NT-RelativeLocationPath">RelativeLocationPath</a><br />
| <a href="#NT-FilterExpr">FilterExpr</a> '//' <a href="#NT-RelativeLocationPath">RelativeLocationPath</a></td>
</tr>
<tr id="NT-FilterExpr">
<td>[20]</td><td>FilterExpr</td><td>::=</td><td><a href="#NT-PrimaryExpr">PrimaryExpr</a><br />
| <a href="#NT-FilterExpr">FilterExpr</a> <a href="#NT-Predicate">Predicate</a></td>
</tr>
</tbody>
</table>

	</section>
	<section>

<h3 id="booleans" title="3.4 Booleans">3.4 ブール</h3>

<p>
ブール型のオブジェクトは、真と偽の２つの値いずれかをとる。
<span lang="en">
An object of type boolean can have one of two values, true and false.</span>
</p>

<p>
<code>or</code> 式の評価においては、まず各オペランドが評価され、その値が
<b><a href="#function-boolean">boolean</a></b>
関数を呼び出したかのようにブール型に変換される。
評価結果はどちらかの値が真ならば真、それ以外は偽になる。
左側のオペランドが真と評価された場合、右側のオペランドは評価されない。
<span lang="en">
An or expression is evaluated by evaluating each operand and converting its value to a boolean as if by a call to the boolean function.
The result is true if either value is true and false otherwise.
The right operand is not evaluated if the left operand evaluates to true.</span>
</p>

<p>
<code>and</code> 式の評価においても、まず各オペランドが評価され、その値が
<b><a href="#function-boolean">boolean</a></b>
関数を呼び出したかのようにブール型に変換されたる。
評価結果は両方の値が真ならば真、それ以外は偽になる。
左側のオペランドが偽と評価された場合は、右側のオペランドは評価されない。
<span lang="en">
An and expression is evaluated by evaluating each operand and converting its value to a boolean as if by a call to the boolean function.
The result is true if both values are true and false otherwise.
The right operand is not evaluated if the left operand evaluates to false.</span>
</p>

<p>
（
<a href="#NT-RelationalExpr">RelationalExpr</a>
より広い）
<a href="#NT-EqualityExpr">EqualityExpr</a>
と（
<a href="#NT-AdditiveExpr">AdditiveExpr</a>
より広い）
<a href="#NT-RelationalExpr">RelationalExpr</a>
は、２つのオペランドを評価した結果のオブジェクトの比較により評価される。
ここではこの比較を、下の３段落に分けて定義する：
まず、ノード集合を含む比較は、ノード集合を含まない比較を用いて定義する。
これは <code>=</code>, <code>!=</code>, <code>&lt;=</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&gt;</code> に対し、統一的に定義される。
次に、ノード集合を含まない比較を = と != に対し定義する。
最後に、ノード集合を含まない比較を <code>&lt;=</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&gt;</code> に対し定義する。
<span lang="en">
An EqualityExpr (that is not just a RelationalExpr) or a RelationalExpr (that is not just an AdditiveExpr) is evaluated by comparing the objects that result from evaluating the two operands.
Comparison of the resulting objects is defined in the following three paragraphs.
First, comparisons that involve node-sets are defined in terms of comparisons that do not involve node-sets; this is defined uniformly for =, !=, &lt;=, &lt;, &gt;= and &gt;.
Second, comparisons that do not involve node-sets are defined for = and !=.
Third, comparisons that do not involve node-sets are defined for &lt;=, &lt;, &gt;= and &gt;.</span>
</p>

<p>
ノード集合を含む比較は次のようにして定義される：オペランドが (1) 両方ともノード集合の場合、一方のノード集合に属するノードと、もう一方のノード集合に属するノードの中で
<a href="#dt-string-value">文字列値</a>
の比較結果が真になるような２つのノードが存在するとき、そのときに限り、比較結果を真とする。
(2) 一方がノード集合でもう一方が数値の場合、ノード集合に属するノードの中で、そのノードの
<a href="#dt-string-value">文字列値</a>
を
<b><a href="#function-number">number</a></b>
関数で数値に変換してから２つの数値を比較した結果が真になるようなノードが存在するとき、そのときに限り、比較結果を真とする。
(3) 一方がノード集合でもう一方が文字列の場合、ノード集合に属するノードの中で、その
<a href="#dt-string-value">文字列値</a>
ともう一方の文字列との比較結果が真になるようなノードが存在するとき、そのときに限り、比較結果を真とする。
(4) 一方がノード集合でもう一方がブール値の場合、ノード集合を
<b><a href="#function-boolean">boolean</a></b>
関数を用いてブール値に変換した後２つのブール値を比較した結果が真になるとき、そのときに限り、比較結果を真とする。
<span lang="en">
If both objects to be compared are node-sets, then the comparison will be true if and only if there is a node in the first node-set and a node in the second node-set such that the result of performing the comparison on the string-values of the two nodes is true.
If one object to be compared is a node-set and the other is a number, then the comparison will be true if and only if there is a node in the node-set such that the result of performing the comparison on the number to be compared and on the result of converting the string-value of that node to a number using the number function is true.
If one object to be compared is a node-set and the other is a string, then the comparison will be true if and only if there is a node in the node-set such that the result of performing the comparison on the string-value of the node and the other string is true.
If one object to be compared is a node-set and the other is a boolean, then the comparison will be true if and only if the result of performing the comparison on the boolean and on the result of converting the node-set to a boolean using the boolean function is true.</span>
</p>

<p>
演算子 <code>=</code>, <code>!=</code> における、ノード集合を含まない比較は次のようにして定義される：
まず比較対象のオブジェクトを共通の型に変換する：
(1) オペランドの少なくともいずれか一方がブール値の場合、それぞれを
<b><a href="#function-boolean">boolean</a></b>
関数でブール値に変換する。
(2) (1) でなく、かつ、オペランドの少なくともいずれか一方が数値の場合、それぞれを
<b><a href="#function-number">number</a></b>
関数で数値に変換する。
(3) (1) (2) 以外の場合は、オペランドを
<b><a href="#function-string">string</a></b>
関数で文字列に変換する。
<code>=</code> による比較は、オブジェクトが等しいときに限り、真とする。
<code>!=</code> による比較は、オブジェクトが等しくないときに限り、真とする。
数値は、 IEEE 754
<a href="#IEEE754">[IEEE 754]</a>
に従って等しいかどうかを比較する。
２つのブール値は、共に真または共に偽のとき、等しいものとする。
２つの文字列は、それらが同じ並びの UCS 文字列になるとき、等しいものとする。
<span lang="en">
When neither object to be compared is a node-set and the operator is = or !=, then the objects are compared by converting them to a common type as follows and then comparing them.
If at least one object to be compared is a boolean, then each object to be compared is converted to a boolean as if by applying the boolean function.
Otherwise, if at least one object to be compared is a number, then each object to be compared is converted to a number as if by applying the number function.
Otherwise, both objects to be compared are converted to strings as if by applying the string function.
The = comparison will be true if and only if the objects are equal; the != comparison will be true if and only if the objects are not equal.
Numbers are compared for equality according to IEEE 754 [IEEE 754].
Two booleans are equal if either both are true or both are false.
Two strings are equal if and only if they consist of the same sequence of UCS characters.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
<code>$x</code> がノード集合に結びつけられている場合、 <code>$x="foo"</code> と <code>not($x!="foo")</code> は同じにならない。
前者は <code>$x</code> 内の<em>いずれか</em>のノードの文字列値が <code>foo</code> になるときに限り真になる一方、後者は <code>$x</code> 内の<em>すべて</em>のノードの文字列値が <code>foo</code> になるときに限り真になる。
<span lang="en">
NOTE: If $x is bound to a node-set, then $x="foo" does not mean the same as not($x!="foo"): the former is true if and only if some node in $x has the string-value foo; the latter is true if and only if all nodes in $x have the string-value foo.</span>
</p>
</blockquote>

<p>
演算子 <code>&lt;=</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&gt;</code> における、ノード集合を含まない比較では、まず両方のオブジェクトが数値に変換され、それらの数値が IEEE 754 に従って比較される。
<code>&lt;</code> による比較は、左辺値が右辺値より小さいときに限り真になる。
<code>&lt;=</code> による比較は、左辺値が右辺値以下のときに限り真になる。
<code>&gt;</code> による比較は、左辺値が右辺値より大きいときに限り真になる。
<code>&gt;=</code> による比較は、左辺値が右辺値以上のときに限り真になる。
<span lang="en">
When neither object to be compared is a node-set and the operator is &lt;=, &lt;, &gt;= or &gt;, then the objects are compared by converting both objects to numbers and comparing the numbers according to IEEE 754.
The &lt; comparison will be true if and only if the first number is less than the second number.
The &lt;= comparison will be true if and only if the first number is less than or equal to the second number.
The &gt; comparison will be true if and only if the first number is greater than the second number.
The &gt;= comparison will be true if and only if the first number is greater than or equal to the second number.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
XPath 式を XML 文書内で用いる際は、演算子の <code>&lt;</code>, <code>&lt;=</code> などはすべて XML 1.0 に従い、例えば <code>&amp;lt;</code> や <code>&amp;lt;=</code> のようにクオートしなければならない。
次の例は、 <code>test</code> 属性の値が XPath 式になっている：
<span lang="en">
When an XPath expression occurs in an XML document, any &lt; and &lt;= operators must be quoted according to XML 1.0 rules by using, for example, &amp;lt; and &amp;lt;=.
In the following example the value of the test attribute is an XPath expression:</span>
</p>

<pre>&lt;xsl:if test="@value &amp;lt; 10"&gt;...&lt;/xsl:if&gt;</pre>

</blockquote>

<table class="scrap">
<tbody>
<tr id="NT-OrExpr">
<td>[21]</td><td>OrExpr</td><td>::=</td><td><a href="#NT-AndExpr">AndExpr</a><br />
| <a href="#NT-OrExpr">OrExpr</a> 'or' <a href="#NT-AndExpr">AndExpr</a></td>
</tr>
<tr id="NT-AndExpr">
<td>[22]</td><td>AndExpr</td><td>::=</td><td><a href="#NT-EqualityExpr">EqualityExpr</a><br />
| <a href="#NT-AndExpr">AndExpr</a> 'and' <a href="#NT-EqualityExpr">EqualityExpr</a></td>
</tr>
<tr id="NT-EqualityExpr">
<td>[23]</td><td>EqualityExpr</td><td>::=</td><td><a href="#NT-RelationalExpr">RelationalExpr</a><br />
| <a href="#NT-EqualityExpr">EqualityExpr</a> '=' <a href="#NT-RelationalExpr">RelationalExpr</a><br />
| <a href="#NT-EqualityExpr">EqualityExpr</a> '!=' <a href="#NT-RelationalExpr">RelationalExpr</a></td>
</tr>
<tr id="NT-RelationalExpr">
<td>[24]</td><td>RelationalExpr</td><td>::=</td><td><a href="#NT-AdditiveExpr">AdditiveExpr</a><br />
| <a href="#NT-RelationalExpr">RelationalExpr</a> '&lt;' <a href="#NT-AdditiveExpr">AdditiveExpr</a><br />
| <a href="#NT-RelationalExpr">RelationalExpr</a> '&gt;' <a href="#NT-AdditiveExpr">AdditiveExpr</a><br />
| <a href="#NT-RelationalExpr">RelationalExpr</a> '&lt;=' <a href="#NT-AdditiveExpr">AdditiveExpr</a><br />
| <a href="#NT-RelationalExpr">RelationalExpr</a> '&gt;=' <a href="#NT-AdditiveExpr">AdditiveExpr</a></td>
</tr>
</tbody>
</table>

<blockquote>
<p>
<b>注記：</b>
上の構文において演算子の優先順位は低い方から次のようになる：
<span lang="en">
NOTE: The effect of the above grammar is that the order of precedence is (lowest precedence first):</span>
</p>

<ul>
<li ><code>or</code></li>
<li ><code>and</code></li>
<li ><code>=</code>, <code>!=</code></li>
<li ><code>&lt;=</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&gt;</code></li>
</ul>

<p>
また、演算子はすべて左から結合される。
例えば <code>3 &gt; 2 &gt; 1</code> は <code>(3 &gt; 2) &gt; 1</code> と等価であり、偽になる。
<span lang="en">
and the operators are all left associative.
For example, 3 &gt; 2 &gt; 1 is equivalent to (3 &gt; 2) &gt; 1, which evaluates to false.</span>
</p>

</blockquote>

	</section>
	<section>

<h3 id="numbers" title="3.5 Numbers">3.5 数</h3>

<p>
数は浮動小数点数を表す。
数は、倍精度 64 ビット形式の IEEE 754 の値
<a href="#IEEE754">[IEEE 754]</a>
を取ることができる。
これには、特別な値 "Not-a-Number" (NaN) , 正の無限大と負の無限大, 正のゼロ, 負のゼロも含まれる。
IEEE 754 標準における主な規則の概要については
<a href="#JLS">[JLS]</a>
の
<a href="http://java.sun.com/docs/books/jls/html/4.doc.html#9208">4.2.3 節</a>
を参照。
<span lang="en">
A number represents a floating-point number.
A number can have any double-precision 64-bit format IEEE 754 value [IEEE 754].
These include a special "Not-a-Number" (NaN) value, positive and negative infinity, and positive and negative zero.
See Section 4.2.3 of [JLS] for a summary of the key rules of the IEEE 754 standard.</span>
</p>

<p>
数値演算子は
<b><a href="#function-number">number</a></b>
関数を呼び出したかのように、オペランドを数に変換する。
<span lang="en">
The numeric operators convert their operands to numbers as if by calling the number function.</span>
</p>

<p>
<code>+</code> 演算子は加算を実行する。
<span lang="en">
The + operator performs addition.</span>
</p>

<p>
<ins class="errata">二項</ins> <code>-</code> 演算子は減算を実行する。
<ins class="errata">単項 <code>-</code> 演算子は符号反転を実行する。
-0 は負のゼロに評価されることに注意。
</ins>
<span lang="en">
The <ins >binary</ins> - operator performs subtraction.
<ins >The unary <code>-</code> operator performs negation.
Note that <code>-0</code> evaluates to negative zero.</ins></span>
</p>

<blockquote>
<p>
<b>注記：</b>
XML では名前に <code>-</code> を使えるため、通常、 <code>-</code> 
演算子の前に空白を入れる必要がある。
例えば <code>foo-bar</code> は <code>foo-bar</code> 子要素を含むノード集合になる。
<code>foo - bar</code> は、最初の <code>foo</code> 子要素の
<a href="#dt-string-value">文字列値</a>
を数値に変換した結果と、最初の <code>bar</code> 子要素の
<a href="#dt-string-value">文字列値</a>
を数値に変換した結果との差になる。
<span lang="en">
NOTE: Since XML allows - in names, the - operator typically needs to be preceded by whitespace.
For example, foo-bar evaluates to a node-set containing the child elements named foo-bar; foo - bar evaluates to the difference of the result of converting the string-value of the first foo child element to a number and the result of converting the string-value of the first bar child to a number.</span>
</p>

<p class="errata">
<ins ><code>*</code> 演算子は IEEE 754 に基づいた浮動小数点の掛け算を実行する。
結果は NaN でないならば、２つのオペランドの符号が等しいときに限り、正になる。
</ins>
<span lang="en">
<ins >The * operator performs floating-point multiplication according to IEEE 754.
Note that, if the result is not NaN, the result is positive if and only if both operands have the same sign.</ins></span>
</p>

</blockquote>


<p>
<code>div</code> 演算子は IEEE 754 に基づいた浮動小数点の割り算を実行する。
<ins class="errata">結果は NaN でないならば、２つのオペランドの符号が等しいときに限り、正になる。
</ins>
<span lang="en">
The div operator performs floating-point division according to IEEE 754.
<ins >Note that, if the result is not NaN, the result is positive if and only if both operands have the same sign.</ins></span>
</p>

<p>
<code>mod</code> 演算子は、切り捨て除算による余りを返す。例えば、
<span lang="en">
The mod operator returns the remainder from a truncating division.
For example,</span>
</p>

<ul>
<li>
<p>
<code>5 mod 2</code> は <code>1</code> を返す
<span lang="en">
5 mod 2 returns 1</span>
</p>
</li>
<li>
<p>
<code>5 mod -2</code> は <code>1</code> を返す
<span lang="en">
5 mod -2 returns 1</span>
</p>
</li>
<li>
<p>
<code>-5 mod 2</code> は <code>-1</code> を返す
<span lang="en">
-5 mod 2 returns -1</span>
</p>
</li>
<li>
<p>
<code>-5 mod -2</code> は <code>-1</code> を返す
<span lang="en">
-5 mod -2 returns -1</span>
</p>
</li>
</ul>

<blockquote>
<p>
<b>注記：</b>
これは Java や ECMAScript の <code>%</code> 演算子と同じである。
<span lang="en">
NOTE: This is the same as the % operator in Java and ECMAScript.</span>
</p>
</blockquote>

<blockquote>
<p>
<b>注記：</b>
丸め除算による余りを返す IEEE 754 の仕様とは異なる。
<span class="trans-note">【参考： java.lang.Math の IEEEremainder 】</span>
<span lang="en">
NOTE: This is not the same as the IEEE 754 remainder operation, which returns the remainder from a rounding division.</span>
</p>
</blockquote>

<table class="scrap">
<caption title="Numeric Expressions">算術式</caption>
<tbody>
<tr id="NT-AdditiveExpr">
<td>[25]</td><td>AdditiveExpr</td><td>::=</td><td><a href="#NT-MultiplicativeExpr">MultiplicativeExpr</a><br />
| <a href="#NT-AdditiveExpr">AdditiveExpr</a> '+' <a href="#NT-MultiplicativeExpr">MultiplicativeExpr</a><br />
| <a href="#NT-AdditiveExpr">AdditiveExpr</a> '-' <a href="#NT-MultiplicativeExpr">MultiplicativeExpr</a></td>
</tr>
<tr id="NT-MultiplicativeExpr">
<td>[26]</td><td>MultiplicativeExpr</td><td>::=</td><td><a href="#NT-UnaryExpr">UnaryExpr</a><br />
| <a href="#NT-MultiplicativeExpr">MultiplicativeExpr</a> <a href="#NT-MultiplyOperator">MultiplyOperator</a> <a href="#NT-UnaryExpr">UnaryExpr</a><br />
| <a href="#NT-MultiplicativeExpr">MultiplicativeExpr</a> 'div' <a href="#NT-UnaryExpr">UnaryExpr</a><br />
| <a href="#NT-MultiplicativeExpr">MultiplicativeExpr</a> 'mod' <a href="#NT-UnaryExpr">UnaryExpr</a></td>
</tr>
<tr id="NT-UnaryExpr">
<td>[27]</td><td>UnaryExpr</td><td>::=</td><td><a href="#NT-UnionExpr">UnionExpr</a><br />
| '-' <a href="#NT-UnaryExpr">UnaryExpr</a></td>
</tr>
</tbody>
</table>


	</section>
	<section>

<h3 id="strings" title="3.6 Strings">3.6 文字列</h3>

<p>
文字列は０個以上の文字の並びである。
文字の定義は XML 勧告
<a href="#XML">[XML]</a>
と同じである。
従って XPath 内の文字１個は Unicode スカラ値１個を伴う１個の Unicode 抽象文字に対応する（
<a href="#UNICODE">[Unicode]</a>
参照）。
これは 16 ビット Unicode 符号値と同じではない： U+FFFF より大きい Unicode スカラ値を伴う抽象文字の Unicode 符号による文字表現は 16 ビット Unicode 符号値のペアになる（サロゲートペア）。
多くのプログラミング言語では文字列を 16 ビット Unicode 符号値の並びで表現する。
そのような言語で XPath を実装する際は、このサロゲートペアが XPath 文字の１文字として正しく扱われるように注意しなければならない。
<span lang="en">
Strings consist of a sequence of zero or more characters, where a character is defined as in the XML Recommendation [XML].
A single character in XPath thus corresponds to a single Unicode abstract character with a single corresponding Unicode scalar value (see [Unicode]); this is not the same thing as a 16-bit Unicode code value: the Unicode coded character representation for an abstract character with Unicode scalar value greater that U+FFFF is a pair of 16-bit Unicode code values (a surrogate pair).
In many programming languages, a string is represented by a sequence of 16-bit Unicode code values; implementations of XPath in such languages must take care to ensure that a surrogate pair is correctly treated as a single XPath character.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
Unicode においては、 Unicode 抽象文字の並びとしては異なるにも関わらず、同一のものとして扱われるべき文字列が存在する。
例えば一部のアクセント付き文字は合成済形と分解形のいずれの形式でも表現し得る。
従って XPath 式内の文字と XML 文書内の文字のいずれかが正準形に正規化されていない場合、 XPath 式は予期しない結果を返し得る。
<a href="#CHARMOD">[Character Model]</a>
参照。
<span lang="en">
NOTE: It is possible in Unicode for there to be two strings that should be treated as identical even though they consist of the distinct sequences of Unicode abstract characters.
For example, some accented characters may be represented in either a precomposed or decomposed form.
Therefore, XPath expressions may return unexpected results unless both the characters in the XPath expression and in the XML document have been normalized into a canonical form.
See [Character Model].</span>
</p>
</blockquote>


	</section>
	<section>

<h3 id="exprlex" title="3.7 Lexical Structure">3.7 字句構造</h3>

<p>
トークン化においては、常に可能な限り長いトークンが返される。
<span lang="en">
When tokenizing, the longest possible token is always returned.</span>
</p>

<p>
可読性のため、文法で明示的に許されていない所でも、式の中の
<a href="#NT-ExprToken">ExprToken</a>
の前後には空白
<a href="#NT-ExprWhitespace">ExprWhitespace</a>
を自由に追加できる。
<span lang="en">
For readability, whitespace may be used in expressions even though not explicitly allowed by the grammar: ExprWhitespace may be freely added within <del >patterns</del> <ins >expressions</ins> before or after any ExprToken.
<ins >, but not in the middle of an ExprToken</ins></span>
</p>

<p>
<a href="#NT-ExprToken">ExprToken</a>
の文法的多義性を回避するため、次に挙げる特別なトークン化規則が順に適用されなければならない：
<span lang="en">
The following special tokenization rules must be applied in the order specified to disambiguate the ExprToken grammar:</span>
</p>

<ul>

<li>
<p>
前にトークンがあり、そのトークンが '<code>@</code>', '<code>::</code>', '<code>(</code>', '<code>[</code>', '<code>,</code>',
<a href="#NT-Operator">Operator</a>
のいずれでもない場合、 '<code>*</code>' は
<a href="#NT-MultiplyOperator">MultiplyOperator</a>
に、
<a href="http://www.w3.org/TR/REC-xml-names#NT-NCName">NCName</a>
は
<a href="#NT-OperatorName">OperatorName</a>
に解釈されなければならない。
<span lang="en">
If there is a preceding token and the preceding token is not one of @, ::, (, [, , or an Operator, then a * must be recognized as a MultiplyOperator and an NCName must be recognized as an OperatorName.</span>
</p>
</li>

<li>
<p>
<!-- 
<del class="errata"><a href="http://www.w3.org/TR/REC-xml-names#NT-NCName">NCName</a></del>
 -->
<ins class="errata"><a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a></ins>
に後続する文字が '<code>(</code>' の場合（ '<code>(</code>' の前に
<a href="#NT-ExprWhitespace">ExprWhitespace</a>
が挟まれていてもよい）、そのトークンは
<a href="#NT-NodeType">NodeType</a>
または
<a href="#NT-FunctionName">FunctionName</a>
に解釈されなければならない。
<span lang="en">
If the character following an <del >NCName</del> <ins >QName</ins> (possibly after intervening ExprWhitespace) is (, then the token must be recognized as a NodeType or a FunctionName.</span>
</p>
</li>

<li>
<p>
<a href="http://www.w3.org/TR/REC-xml-names#NT-NCName">NCName</a>
に後続する２文字が '<code>::</code>' の場合（
<a href="#NT-ExprWhitespace">ExprWhitespace</a>
が間に挟まれていてもよい）、そのトークンは
<a href="#NT-AxisName">AxisName</a>
に解釈されなければならない。
<span lang="en">
If the two characters following an NCName (possibly after intervening ExprWhitespace) are ::, then the token must be recognized as an AxisName.</span>
</p>
</li>

<li>
<p>
上記以外の場合はトークンを
<a href="#NT-MultiplyOperator">MultiplyOperator</a>,
<a href="#NT-OperatorName">OperatorName</a>,
<a href="#NT-NodeType">NodeType</a>,
<a href="#NT-FunctionName">FunctionName</a>,
<a href="#NT-AxisName">AxisName</a>
のいずれにも解釈してはならない。
<span lang="en">
Otherwise, the token must not be recognized as a MultiplyOperator, an OperatorName, a NodeType, a FunctionName, or an AxisName.</span>
</p>
</li>

</ul>

<table class="scrap">
<caption title="Expression Lexical Structure">式の字句構造</caption>
<tbody>
<tr id="NT-ExprToken">
<td>[28]</td><td>ExprToken</td><td>::=</td><td>'(' | ')' | '[' | ']' | '.' | '..' | '@' | ',' | '::'<br />
| <a href="#NT-NameTest">NameTest</a><br />
| <a href="#NT-NodeType">NodeType</a><br />
| <a href="#NT-Operator">Operator</a><br />
| <a href="#NT-FunctionName">FunctionName</a><br />
| <a href="#NT-AxisName">AxisName</a><br />
| <a href="#NT-Literal">Literal</a><br />
| <a href="#NT-Number">Number</a><br />
| <a href="#NT-VariableReference">VariableReference</a></td>
</tr>
<tr id="NT-Literal">
<td>[29]</td><td>Literal</td><td>::=</td><td>'"' [^"]* '"'<br />
| "'" [^']* "'"</td>
</tr>
<tr id="NT-Number">
<td>[30]</td><td>Number</td><td>::=</td><td><a href="#NT-Digits">Digits</a> ('.' <a href="#NT-Digits">Digits</a>?)?<br />
| '.' <a href="#NT-Digits">Digits</a></td>
</tr>
<tr id="NT-Digits">
<td>[31]</td><td>Digits</td><td>::=</td><td>[0-9]+</td>
</tr>
<tr id="NT-Operator">
<td>[32]</td><td>Operator</td><td>::=</td><td><a href="#NT-OperatorName">OperatorName</a><br />
| <a href="#NT-MultiplyOperator">MultiplyOperator</a><br />
| '/' | '//' | '|' | '+' | '-' | '=' | '!=' | '&lt;' | '&lt;=' | '&gt;' | '&gt;='</td>
</tr>
<tr id="NT-OperatorName">
<td>[33]</td><td>OperatorName</td><td>::=</td><td>'and' | 'or' | 'mod' | 'div'</td>
</tr>
<tr id="NT-MultiplyOperator">
<td>[34]</td><td>MultiplyOperator</td><td>::=</td><td>'*'</td>
</tr>
<tr id="NT-FunctionName">
<td>[35]</td><td>FunctionName</td><td>::=</td><td>
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
- <a href="#NT-NodeType">NodeType</a>
</td>
</tr>
<tr id="NT-VariableReference">
<td>[36]</td><td>VariableReference</td><td>::=</td><td>'$' <a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a></td>
</tr>
<tr id="NT-NameTest">
<td>[37]</td><td>NameTest</td><td>::=</td><td>'*'<br />
| <a href="http://www.w3.org/TR/REC-xml-names#NT-NCName">NCName</a> ':' '*'<br />
| <a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a></td>
</tr>
<tr id="NT-NodeType">
<td>[38]</td><td>NodeType</td><td>::=</td><td>'comment'<br />
| 'text'<br />
| 'processing-instruction'<br />
| 'node'</td>
</tr>
<tr id="NT-ExprWhitespace">
<td>[39]</td><td>ExprWhitespace</td><td>::=</td><td><a href="http://www.w3.org/TR/REC-xml#NT-S">S</a></td>
</tr>
</tbody>
</table>


<blockquote>
<p class="errata">
<ins >
ホスト言語は
<a href="#XML">[XML]</a>
と
<a href="#XMLNAMES">[XML Names]</a>
の字句規則に従うか、
<a href="#XML11">[XML 1.1]</a>
と
<a href="#XMLNames11">[XML Names 1.1]</a>
の字句規則に従うかいずれを選択してもよい。
</ins>
<span lang="en">
<ins >A host language may choose whether the lexical rules of [XML]  and [XML Names] are followed, or alternatively, the lexical rules of [XML 1.1] and [XML Names 1.1] are followed.</ins> </span>
</p>
</blockquote>

	</section>
</section>
<section>

<h2 id="corelib" title="4 Core Function Library">4 コア関数ライブラリ</h2>

<p>
この節では、XPath を実装する際に、式の評価に利用する関数ライブラリに必ず含めなければならない関数について述べる。
<span lang="en">
This section describes functions that XPath implementations must always include in the function library that is used to evaluate expressions.</span>
</p>

<p>
関数ライブラリの各関数は、関数の返り値の型, 関数名, 引数の型を与える関数プロトタイプで指定される。
型に疑問符が付いている引数はオプションである。
疑問符が付いていない引数は必須である。
<span lang="en">
Each function in the function library is specified using a function prototype, which gives the return type, the name of the function, and the type of the arguments.
If an argument type is followed by a question mark, then the argument is optional; otherwise, the argument is required.</span>
</p>

	<section>

<h3 id="section-Node-Set-Functions" title="4.1 Node Set Functions">4.1 ノード集合関数</h3>

<dl >

<dt id="function-last"><b>関数：</b> <i>number</i> <b>last</b>()</dt>
<dd>
<p>
<b><a href="#function-last">last</a></b>
関数は、式の評価文脈における
<a href="#dt-context-size">文脈サイズ</a>
に等しい数を返す。
<span lang="en">
The last function returns a number equal to the context size from the expression evaluation context.</span>
</p>
</dd>

<dt id="function-position"><b>関数：</b> <i>number</i> <b>position</b>()</dt>
<dd>
<p>
<b><a href="#function-position">position</a></b>
関数は、式の評価文脈における
<a href="#dt-context-position">文脈位置</a>
に等しい数を返す。
<span lang="en">
The position function returns a number equal to the context position from the expression evaluation context.</span>
</p>
</dd>

<dt id="function-count"><b>関数：</b> <i>number</i> <b>count</b> ( <i>node-set</i> )</dt>
<dd>
<p>
<b><a href="#function-count">count</a></b>
関数は、引数に指定されたノード集合に含まれるノードの個数を返す。
<span lang="en">
The count function returns the number of nodes in the argument node-set.</span>
</p>
</dd>

<dt id="function-id"><b>関数：</b> <i>node-set</i> <b>id</b> ( <i>object</i> )</dt>
<dd>
<p>
<b><a href="#function-id">id</a></b>
関数は、一意 ID により要素を選択する（
<a href="#unique-id">[<b>5.2.1 一意 ID</b>]</a>
参照）。
引数の型がノード集合の場合、引数に指定されたノード集合内の各ノードの
<a href="#dt-string-value">文字列値</a>
に
<b><a href="#function-id">id</a></b>
関数を適用した結果の集合が結果になる。
引数が他の型の場合、
<b><a href="#function-string">string</a></b>
関数を呼び出したかのように引数を文字列に変換し、この文字列を空白区切りのトークンのリストに分解する（空白とは、 XML の生成規則
<a href="http://www.w3.org/TR/REC-xml#NT-S">S</a>
に一致する任意の文字列を指す）。
結果は、文脈ノードと同じ文書内で、一意 ID がこのリストに含まれるトークンのいずれかに等しくなる要素の集合になる。
<span lang="en">
The id function selects elements by their unique ID (see [5.2.1 Unique IDs]).
When the argument to id is of type node-set, then the result is the union of the result of applying id to the string-value of each of the nodes in the argument node-set.
When the argument to id is of any other type, the argument is converted to a string as if by a call to the string function; the string is split into a whitespace-separated list of tokens (whitespace is any sequence of characters matching the production S); the result is a node-set containing the elements in the same document as the context node that have a unique ID equal to any of the tokens in the list.</span>
</p>


<ul>
<li>
<p>
<code>id("foo")</code> は一意 ID  <code>foo</code> を持つ要素を選択する。
<span lang="en">
id("foo") selects the element with unique ID foo</span>
</p>
</li>
<li>
<p>
<code>id("foo")/child::para[position()=5]</code> は一意 ID <code>foo</code> を持つ要素の 5 番目の <code>para</code> 子要素を選択する。
<span lang="en">
id("foo")/child::para[position()=5] selects the fifth para child of the element with unique ID foo</span>
</p>
</li>
</ul>

</dd>

<dt id="function-local-name"><b>関数：</b> <i>string</i> <b>local-name</b> ( <i>node-set</i> ? )</dt>
<dd>
<p>
<b><a href="#function-local-name">local-name</a></b>
関数は、引数に渡されたノード集合の中で
<a href="#dt-document-order">文書順</a>
で最初になるノードの
<a href="#dt-expanded-name">展開名</a>
の局所部を返す。
引数のノード集合が空であったり, 最初のノードが
<a href="#dt-expanded-name">展開名</a>
を持たない場合、空文字列を返す。
引数が省略された場合、文脈ノード１個からなるノード集合が既定の引数として用いられる。
<span lang="en">
The local-name function returns the local part of the expanded-name of the node in the argument node-set that is first in document order.
If the argument node-set is empty or the first node has no expanded-name, an empty string is returned.
If the argument is omitted, it defaults to a node-set with the context node as its only member.</span>
</p>
</dd>

<dt id="function-namespace-uri"><b>関数：</b> <i>string</i> <b>namespace-uri</b> ( <i>node-set</i> ? )</dt>
<dd>
<p>
<b><a href="#function-namespace-uri">namespace-uri</a></b>
関数は、引数に渡されたノード集合の中で
<a href="#dt-document-order">文書順</a>
で最初になるノードの
<a href="#dt-expanded-name">展開名</a>
の名前空間 URI を返す。
引数のノード集合が空であったり, 最初のノードが
<a href="#dt-expanded-name">展開名</a>
を持っていなかったり,
<a href="#dt-expanded-name">展開名</a>
の名前空間 URI が null だった場合、空文字列を返す。
引数が省略された場合、文脈ノード１個からなるノード集合が既定の引数として用いられる。
<span lang="en">
The namespace-uri function returns the namespace URI of the expanded-name of the node in the argument node-set that is first in document order.
If the argument node-set is empty, the first node has no expanded-name, or the namespace URI of the expanded-name is null, an empty string is returned.
If the argument is omitted, it defaults to a node-set with the context node as its only member.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
<b><a href="#function-namespace-uri">namespace-uri</a></b>
関数が返す文字列は、要素ノードと属性ノード以外は空になる。
<span lang="en">
NOTE: The string returned by the namespace-uri function will be empty except for element nodes and attribute nodes.</span>
</p>
</blockquote>

</dd>


<dt id="function-name"><b>関数：</b> <i>string</i> <b>name</b> ( <i>node-set</i> ? )</dt>
<dd>
<p>
<b><a href="#function-name">name</a></b>
関数は、引数に渡されたノード集合の中で
<a href="#dt-document-order">文書順</a>
で最初のノードの
<a href="#dt-expanded-name">展開名</a>
を表現する
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
を返す。
この
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
はノードにおいて有効な名前空間宣言を利用する展開による
<a href="#dt-expanded-name">展開名</a>
を表現しなければならない。
これは通常、XML ソースの中の
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
になるが、複数の接頭辞がノードにおいて有効な名前空間宣言により同じ名前空間に結びつけられている場合、そうなる必要はない。
しかしながら、実装においては、ノードの表現に元の接頭辞の情報も含ませることにより、 name 関数が常に XML ソースで用いられている
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
と同じ文字列を返すようにもできる。
引数のノード集合が空であったり, 最初のノードが
<a href="#dt-expanded-name">展開名</a>
を持たない場合、空文字列を返す。
引数が省略された場合、文脈ノード１個からなるノード集合が既定の引数として用いられる。
<span lang="en">
The name function returns a string containing a QName representing the expanded-name of the node in the argument node-set that is first in document order.
The QName must represent the expanded-name with respect to the namespace declarations in effect on the node whose expanded-name is being represented.
Typically, this will be the QName that occurred in the XML source.
This need not be the case if there are namespace declarations in effect on the node that associate multiple prefixes with the same namespace.
However, an implementation may include information about the original prefix in its representation of nodes; in this case, an implementation can ensure that the returned string is always the same as the QName used in the XML source.
If the argument node-set is empty or the first node has no expanded-name, an empty string is returned.
If the argument it omitted, it defaults to a node-set with the context node as its only member.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
要素ノードと属性ノードを除き、<b><a href="#function-name">name</a></b>
関数が返す文字列は
<b><a href="#function-local-name">local-name</a></b>
関数が返す文字列と同じである。
<span lang="en">
NOTE: The string returned by the name function will be the same as the string returned by the local-name function except for element nodes and attribute nodes.</span>
</p>
</blockquote>

</dd>


</dl>

	</section>
	<section>

<h3 id="section-String-Functions" title="4.2 String Functions">4.2 文字列関数</h3>

<dl >

<dt id="function-string"><b>関数：</b> <i>string</i> <b>string</b> ( <i>object</i> ? )</dt>


<dd>
<p>
<b><a href="#function-string">string</a></b>
関数は、次のようにオブジェクトを文字列に変換する：
<span lang="en">
The string function converts an object to a string as follows:</span>
</p>

<ul>

<li>
<p>
ノード集合は、その中の
<a href="#dt-document-order">文書順</a>
で最初のノードの
<a href="#dt-string-value">文字列値</a>
に変換される。
ノード集合が空だった場合、空文字列が返される。
<span lang="en">
A node-set is converted to a string by returning the string-value of the node in the node-set that is first in document order.
If the node-set is empty, an empty string is returned.</span>
</p>
</li>

<li>
<p>
数値は以下のように文字列に変換される：
<span lang="en">
A number is converted to a string as follows</span>
</p>

<ul>

<li>
<p>
NaN は文字列 <code>NaN</code> に変換される。
<span lang="en">
NaN is converted to the string NaN</span>
</p>
</li>

<li>
<p>
正のゼロは文字列 <code>0</code> に変換される。
<span lang="en">
positive zero is converted to the string 0</span>
</p>
</li>

<li>
<p>
負のゼロは文字列 <code>0</code> に変換される。
<span lang="en">
negative zero is converted to the string 0</span>
</p>
</li>

<li>
<p>
正の無限大は文字列 <code>Infinity</code> に変換される。
<span lang="en">
positive infinity is converted to the string Infinity</span>
</p>
</li>

<li>
<p>
負の無限大は文字列 <code>-Infinity</code> に変換される。
<span lang="en">
negative infinity is converted to the string -Infinity</span>
</p>
</li>

<li>
<p>
数値が整数の場合、小数点もゼロも前置されない
<a href="#NT-Number">Number</a>
として十進形式で表現される。
負数にはマイナス符号（ <code>-</code> ）が前置される。
<span lang="en">
if the number is an integer, the number is represented in decimal form as a Number with no decimal point and no leading zeros, preceded by a minus sign (-) if the number is negative</span>
</p>
</li>

<li>
<p>
数値が整数でない場合、
<a href="#NT-Number">Number</a>
として、小数点とその前後に少なくとも１桁以上の数字が含まれる十進形式で表現される。
負数にはマイナス符号（ <code>-</code> ）が前置される。
整数部の桁は、小数点の直前に必要なる１桁を除き、ゼロから開始されてはならない。
小数部の桁は、小数点の直後に必要な１桁を除き、他のすべての IEEE 754 数値と一意的に区別するために必要かつ十分な桁数にしなければならない。
<span lang="en">
otherwise, the number is represented in decimal form as a Number including a decimal point with at least one digit before the decimal point and at least one digit after the decimal point, preceded by a minus sign (-) if the number is negative; there must be no leading zeros before the decimal point apart possibly from the one required digit immediately before the decimal point; beyond the one required digit after the decimal point there must be as many, but only as many, more digits as are needed to uniquely distinguish the number from all other IEEE 754 numeric values.</span>
</p>
</li>

</ul>

</li>

<li>
<p>
ブール値の偽は文字列 <code>false</code> に変換される。
ブール値の真は、文字列 <code>true</code> に変換される。
<span lang="en">
The boolean false value is converted to the string false.
The boolean true value is converted to the string true.</span>
</p>
</li>

<li>
<p>
４つの基本型以外の型のオブジェクトは、その型に応じた方法で文字列に変換される。
<span lang="en">
An object of a type other than the four basic types is converted to a string in a way that is dependent on that type.</span>
</p>
</li>

</ul>

<p>
引数が省略された場合、文脈ノード１個からなるノード集合が既定の引数として用いられる。
<span lang="en">
If the argument is omitted, it defaults to a node-set with the context node as its only member.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
<code>string</code> 関数による数値の文字列への変換には、利用者に対する表示目的は意図されていない。
この目的には
<a href="#XSLT">[XSLT]</a>
の <code>format-number</code> 関数と <code>xsl:number</code> 要素が提供されている。
<span lang="en">
NOTE: The string function is not intended for converting numbers into strings for presentation to users.
The format-number function and xsl:number element in [XSLT] provide this functionality.</span>
</p>
</blockquote>

</dd>


<dt id="function-concat"><b>関数：</b> <i>string</i> <b>concat</b> ( <i>string</i>, <i>string</i>, <i>string</i> * )</dt>
<dd>
<p>
<b><a href="#function-concat">concat</a></b>
関数は引数を連結して返す。
<span lang="en">
The concat function returns the concatenation of its arguments.</span>
</p>
</dd>

<dt id="function-starts-with"><b>関数：</b> <i>boolean</i> <b>starts-with</b> ( <i>string</i>, <i>string</i> )</dt>
<dd>
<p>
<b><a href="#function-starts-with">starts-with</a></b>
関数は、第１引数の文字列が第２引数の文字列で開始されていれば真を返し、そうでなければ偽を返す。
<ins class="errata">第２引数が空文字列だった場合、真を返す。
</ins>
<!-- If the second argument string is the empty string, then true is returned. -->
<span lang="en">
The starts-with function returns true if the first argument string starts with the second argument string, and otherwise returns false.
<ins >If the second argument string is the empty string, then true is returned.</ins>
</span>
</p>
</dd>

<dt id="function-contains"><b>関数：</b> <i>boolean</i> <b>contains</b> ( <i>string</i>, <i>string</i> )</dt>
<dd>
<p>
<b><a href="#function-contains">contains</a></b>
関数は、第１引数の文字列に第２引数の文字列が含まれていれば真を返し、そうでなければ偽を返す。
<ins class="errata">第２引数が空文字列だった場合、真を返す。
</ins>
<span lang="en">
The contains function returns true if the first argument string contains the second argument string, and otherwise returns false.
<ins >If the second argument string is the empty string, then true is returned.</ins></span>
</p>
</dd>

<dt id="function-substring-before"><b>関数：</b> <i>string</i> <b>substring-before</b> ( <i>string</i>, <i>string</i> )</dt>
<dd>
<p>
<b><a href="#function-substring-before">substring-before</a></b>
関数は、第２引数の文字列が第１引数の文字列の中に現れるならば、最初に現れる所より前の部分の第１引数の部分文字列を返す。
第２引数の文字列が第１引数の文字列の中に現れない場合、空文字列を返す。
例えば <code>substring-before("1999/04/01","/")</code> は <code>1999</code> を返す。
<ins class="errata">第２引数の文字列が空文字列だった場合、空文字列を返す。
</ins>
<span lang="en">
The substring-before function returns the substring of the first argument string that precedes the first occurrence of the second argument string in the first argument string, or the empty string if the first argument string does not contain the second argument string.
For example, substring-before("1999/04/01","/") returns 1999.
<ins >If the second argument string is the empty string, then the empty string is returned.</ins></span>
</p>
</dd>

<dt id="function-substring-after"><b>関数：</b> <i>string</i> <b>substring-after</b> ( <i>string</i>, <i>string</i> )</dt>
<dd>
<p>
<b><a href="#function-substring-after">substring-after</a></b>
関数は、第２引数の文字列が第１引数の文字列の中に現れるならば、最初に現れる所より後の部分の第１引数の部分文字列を返す。
第２引数の文字列が第１引数の文字列の中に現れない場合は空文字列を返す。
例えば <code>substring-after("1999/04/01","/")</code> は <code>04/01</code> を返し、 <code>substring-after("1999/04/01","19")</code> は <code>99/04/01</code> を返す。
<ins class="errata">第２引数の文字列が空文字列だった場合、第１引数の文字列を返す。
</ins>
<span lang="en">
The substring-after function returns the substring of the first argument string that follows the first occurrence of the second argument string in the first argument string, or the empty string if the first argument string does not contain the second argument string.
For example, substring-after("1999/04/01","/") returns 04/01, and substring-after("1999/04/01","19") returns 99/04/01.
<ins >If the second argument string is the empty string, then the first argument string is returned.</ins></span>
</p>
</dd>

<dt id="function-substring"><b>関数：</b> <i>string</i> <b>substring</b> ( <i>string</i>, <i>number</i>, <i>number</i> ? )</dt>
<dd>
<p>
<b >substring</b>
関数は、第１引数の文字列の中で、第２引数で指定される位置から始まり、第３引数で指定される長さの部分文字列を返す。
例えば <code>substring("12345",2,3)</code> は <code>"234"</code> を返す。
第３引数が指定されなかった場合、第２引数で指定した位置から最後までの部分文字列を返す。
例えば <code>substring("12345",2)</code> は <code>"2345"</code> を返す。
<span lang="en">
The substring function returns the substring of the first argument starting at the position specified in the second argument with length specified in the third argument.
For example, substring("12345",2,3) returns "234".
If the third argument is not specified, it returns the substring starting at the position specified in the second argument and continuing to the end of the string.
For example, substring("12345",2) returns "2345".</span>
</p>

<p>
より厳密には、文字列内の各文字は（
<a href="#strings">[<b>3.6 文字列</b>]</a>
参照）数としての位置を持つものと見なされる。
すなわち、最初の文字は１, ２番目の文字は２, 等々, 以下同様に続く。
<span lang="en">
More precisely, each character in the string (see [3.6 Strings]) is considered to have a numeric position: the position of the first character is 1, the position of the second character is 2 and so on.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
これは <code>String.substring</code> メソッドで最初の文字位置を０とみなす Java や ECMAScript とは異なる。
<span lang="en">
NOTE: This differs from Java and ECMAScript, in which the String.substring method treats the position of the first character as 0.</span>
</p>
</blockquote>

<p>
<p>
返り値の部分文字列は、文字位置が第２引数を丸めた値から（第３引数を指定した場合）第２引数を丸めた値と第３引数を丸めた値の和までの範囲に入る文字からなる。
ここで用いられる比較や加算は、標準の IEEE 754 規則に従う：数値の丸めは
<b><a href="#function-round">round</a></b>
関数が呼び出されたかのように行われる。
様々な特殊な場合の例を以下に示す：
<span lang="en">
The returned substring contains those characters for which the position of the character is greater than or equal to the rounded value of the second argument and, if the third argument is specified, less than the sum of the rounded value of the second argument and the rounded value of the third argument; the comparisons and addition used for the above follow the standard IEEE 754 rules; rounding is done as if by a call to the round function.
The following examples illustrate various unusual cases:</span>
</p>

<ul>

<li>
<p>

<code>substring("12345", 1.5, 2.6)</code> は <code>"234"</code> を返す。
<span lang="en">
substring("12345", 1.5, 2.6) returns "234"</span>
</p>
</li>

<li>
<p>
<code>substring("12345", 0, 3)</code> は <code>"12"</code> を返す。
<span lang="en">
substring("12345", 0, 3) returns "12"</span>
</p>
</li>

<li>
<p>
<code>substring("12345", 0 div 0, 3)</code> は <code>""</code> を返す。
<span lang="en">
substring("12345", 0 div 0, 3) returns ""</span>
</p>
</li>

<li>
<p>
<code>substring("12345", 1, 0 div 0)</code> は <code>""</code> を返す。
<span lang="en">
substring("12345", 1, 0 div 0) returns ""</span>
</p>
</li>

<li>
<p>
<code>substring("12345", -42, 1 div 0)</code> は <code>"12345"</code> を返す。
<span lang="en">
substring("12345", -42, 1 div 0) returns "12345"</span>
</p>
</li>

<li>
<p>
<code>substring("12345", -1 div 0, 1 div 0)</code> は <code>""</code> を返す。
<span lang="en">
substring("12345", -1 div 0, 1 div 0) returns ""</span>
</p>
</li>

</ul>

</dd>

<dt id="function-string-length"><b>関数：</b> <i>number</i> <b>string-length</b> ( <i>string</i> ? )</dt>
<dd>
<p>
<b><a href="#function-string-length">string-length</a></b>
関数は文字列に含まれる文字数を返す（
<a href="#strings">[<b>3.6 文字列</b>]</a>
参照）。
引数が省略された場合、文脈ノードを文字列に変換したもの、すなわち文脈ノードの
<a href="#dt-string-value">文字列値</a>
が既定の引数として用いられる。
<span lang="en">
The string-length returns the number of characters in the string (see [3.6 Strings]).
If the argument is omitted, it defaults to the context node converted to a string, in other words the string-value of the context node.</span>
</p>
</dd>

<dt id="function-normalize-space"><b>関数：</b> <i>string</i> <b>normalize-space</b> ( <i>string</i> ? )</dt>
<dd>
<p>
<b><a href="#function-normalize-space">normalize-space</a></b>
関数は、引数の文字列から空白を正規化して返す：先頭と末尾の空白は取り除かれ、連続する空白は１個のスペース文字に置換される。
空白とは、 XML の生成規則
<a href="http://www.w3.org/TR/REC-xml#NT-S">S</a>
に一致する任意の文字列を指す。
引数が省略された場合、文脈ノードを文字列に変換したもの、すなわち文脈ノードの
<a href="#dt-string-value">文字列値</a>
が既定の引数として用いられる。
<span lang="en">
The normalize-space function returns the argument string with whitespace normalized by stripping leading and trailing whitespace and replacing sequences of whitespace characters by a single space.
Whitespace characters are the same as those allowed by the S production in XML.
If the argument is omitted, it defaults to the context node converted to a string, in other words the string-value of the context node.</span>
</p>
</dd>

<dt id="function-translate"><b>関数：</b> <i>string</i> <b>translate</b> ( <i>string</i>, <i>string</i>, <i>string</i> )</dt>
<dd>
<p>
<b><a href="#function-translate">translate</a></b>
関数は、第１引数の文字列の中の各文字について、もしその文字が第２引数の文字列に含まれているなら、その文字を第３引数の文字列の中の（第２引数の文字位置に）対応する位置の文字に置換し、その結果の文字列を返す。
例えば <code>translate("bar","abc","ABC")</code> は <code>BAr</code> を返す。
（第２引数の文字列が第３引数の文字列よりも長いなどの理由で）置換の際に第２引数の文字位置に対応する文字が第３引数の文字列に存在しない場合、第１引数の当該文字は削除される。
例えば <code>translate("--aaa--","abc-","ABC")</code> は <code>"AAA"</code> を返す。
第２引数の文字列に同じ文字が複数含まれている場合、それらのうち最初の文字が置換する文字を決定する。
第３引数の文字列が第２引数の文字列よりも長い場合、余分な文字は無視される。
<span lang="en">
The translate function returns the first argument string with occurrences of characters in the second argument string replaced by the character at the corresponding position in the third argument string.
For example, translate("bar","abc","ABC") returns the string BAr.
If there is a character in the second argument string with no character at a corresponding position in the third argument string (because the second argument string is longer than the third argument string), then occurrences of that character in the first argument string are removed.
For example, translate("--aaa--","abc-","ABC") returns "AAA".
If a character occurs more than once in the second argument string, then the first occurrence determines the replacement character.
If the third argument string is longer than the second argument string, then excess characters are ignored.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
この
<b><a href="#function-translate">translate</a></b>
関数は、すべての言語に満足に通用するような文字の大小変換を供するものではない。
XPath の将来版では文字の大小変換に利用できる追加の関数が考えられている。
<span lang="en">
NOTE: The translate function is not a sufficient solution for case conversion in all languages.
A future version of XPath may provide additional functions for case conversion.</span>
</p>
</blockquote>

</dd>

</dl>

	</section>
	<section>

<h3 id="section-Boolean-Functions" title="4.3 Boolean Functions">4.3 ブール関数</h3>

<dl >

<dt id="function-boolean"><b>関数：</b> <i>boolean</i> <b>boolean</b> ( <i>object</i> )</dt>
<dd>
<p>
<b><a href="#function-boolean">boolean</a></b>
関数は、次のように引数をブール値に変換する：
<span lang="en">
The boolean function converts its argument to a boolean as follows:</span>
</p>

<ul>
<li>
<p>
数値は、正や負のゼロ, NaN のいずれでもない場合に限り真。
<span lang="en">
a number is true if and only if it is neither positive or negative zero nor NaN</span>
</p>
</li>

<li>
<p>
ノード集合は空でない場合に限り真。
<span lang="en">
a node-set is true if and only if it is non-empty</span>
</p>
</li>

<li>
<p>
文字列は、長さがゼロでない場合に限り真。
<span lang="en">
a string is true if and only if its length is non-zero</span>
</p>
</li>

<li>
<p>
４つの基本型以外のオブジェクト型の場合、その型に応じた方法でブール値に変換される。
<span lang="en">
an object of a type other than the four basic types is converted to a boolean in a way that is dependent on that type</span>
</p>
</li>

</ul>
</dd>

<dt id="function-not"><b>関数：</b> <i>boolean</i> <b>not</b> ( <i>boolean</i> )</dt>
<dd>
<p>
<b><a href="#function-not">not</a></b>
関数は、引数が偽ならば真、真ならば偽を返す。
<span class="trans-note">【原文 "false otherwise" を文面のまま受け取ると例えば引数が数値の０でも偽を返すと解釈しそうだが、引数はまず関数の引数型に<a href="#section-Function-Calls" >変換される</a>ことに注意。数値型の０はまずブール型の偽に変換されるので結果は真になる。】</span>
<span lang="en">
The not function returns true if its argument is false, and false otherwise.</span>
</p>
</dd>

<dt id="function-true"><b>関数：</b> <i>boolean</i> <b>true</b>()</dt>
<dd>
<p>
<b><a href="#function-true">true</a></b>
関数は真を返す。
<span lang="en">
The true function returns true.</span>
</p>
</dd>

<dt id="function-false"><b>関数：</b> <i>boolean</i> <b>false</b>()</dt>
<dd>
<p>
<b><a href="#function-false">false</a></b>
関数は偽を返す。
<span lang="en">
The false function returns false.</span>
</p>
</dd>

<dt id="function-lang"><b>関数：</b> <i>boolean</i> <b>lang</b> ( <i>string</i> )</dt>
<dd>
<p>
<b><a href="#function-lang">lang</a></b>
関数は、 <code>xml:lang</code> 属性で指定されている文脈ノードの言語が引数に指定した言語と同じまたはその "副言語"（方言, 言語変種）になるとき、真を返す。
文脈ノードの言語は、文脈ノードの <code>xml:lang</code> 属性の値、あるいは、文脈ノードに <code>xml:lang</code> 属性が与えられていない場合は文脈ノードに最も近い先祖要素の <code>xml:lang</code> 属性の値から決定される。
そのような属性が与えられていない場合、
<b><a href="#function-lang">lang</a></b>
関数は偽を返す。
そのような属性が与えられている場合、
<b><a href="#function-lang">lang</a></b>
関数は文字の大小を区別せずに引数と比較し、属性値と引数が等しいか、あるいは属性値に文字 <code>-</code> で始まる接尾辞が含まれる場合はその接尾辞を無視した上で引数に等しくなるならば真を返す。
例えば、文脈ノードが次の５要素いずれであったとしても <code>lang("en")</code> は真を返す：
<span lang="en">
The lang function returns true or false depending on whether the language of the context node as specified by xml:lang attributes is the same as or is a sublanguage of the language specified by the argument string.
The language of the context node is determined by the value of the xml:lang attribute on the context node, or, if the context node has no xml:lang attribute, by the value of the xml:lang attribute on the nearest ancestor of the context node that has an xml:lang attribute.
If there is no such attribute, then lang returns false.
If there is such an attribute, then lang returns true if the attribute value is equal to the argument ignoring case, or if there is some suffix starting with - such that the attribute value is equal to the argument ignoring that suffix of the attribute value and ignoring case.
For example, lang("en") would return true if the context node is any of these five elements:</span>
</p>

<pre>&lt;para xml:lang="en"/&gt;
&lt;div xml:lang="en"&gt;&lt;para/&gt;&lt;/div&gt;
&lt;para xml:lang="EN"/&gt;
&lt;para xml:lang="en-us"/&gt;</pre>

</dd>

</dl>

	</section>
	<section>

<h3 id="section-Number-Functions" title="4.4 Number Functions">4.4 数値関数</h3>

<dl >

<dt id="function-number"><b>関数：</b> <i>number</i> <b>number</b> ( <i>object</i> ? )</dt>
<dd>
<p>
<b><a href="#function-number">number</a></b>
関数は、次のように引数を数値に変換する：
<span lang="en">
The number function converts its argument to a number as follows:</span>
</p>

<ul>

<li>
<p>
空白（オプション）, 負符号（オプション）, 
<a href="#NT-Number">Number</a>,
空白（オプション）がこの順で連なる文字列は、（ IEEE 754 の round-to-nearest 規則に従って）その文字列が表現する数学的値に最も近い IEEE 754 数値に変換される。
それ以外の文字列は NaN に変換される。
<span lang="en">
a string that consists of optional whitespace followed by an optional minus sign followed by a Number followed by whitespace is converted to the IEEE 754 number that is nearest (according to the IEEE 754 round-to-nearest rule) to the mathematical value represented by the string; any other string is converted to NaN</span>
</p>
</li>

<li>
<p>
ブール値の真は 1, 偽は 0 に変換される。
<span lang="en">
boolean true is converted to 1; boolean false is converted to 0</span>
</p>
</li>

<li>

<p>
ノード集合の場合、最初に
<b><a href="#function-string">string</a></b>
関数を呼び出したかのように文字列に変換され、その文字列が引数が文字列の場合の変換と同じ方法で数値に変換される。
<span lang="en">
a node-set is first converted to a string as if by a call to the string function and then converted in the same way as a string argument</span>
</p>

</li>

<li>
<p>
４つの基本型以外の型のオブジェクトの場合、その型に応じた方法で数値に変換される。
<span lang="en">
an object of a type other than the four basic types is converted to a number in a way that is dependent on that type</span>
</p>
</li>

</ul>

<p>
引数が省略された場合、文脈ノード１個からなるノード集合が既定の引数として用いられる。
<span lang="en">
If the argument is omitted, it defaults to a node-set with the context node as its only member.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
<b><a href="#function-number">number</a></b>
関数を XML 文書の要素内の数値データの変換に用いるべきではない - 
要素の型がそれらを言語中立な形式で表現するものでない限り（概して利用者への表示目的で言語特有の形式に変換されている）。
また、言語中立な形式であっても、 XPath の
<a href="#NT-Number">Number</a>
構文と整合していなければ
<b><a href="#function-number">number</a></b>
関数を用いることはできない。
<span lang="en">
NOTE: The number function should not be used for conversion of numeric data occurring in an element in an XML document unless the element is of a type that represents numeric data in a language-neutral format (which would typically be transformed into a language-specific format for presentation to a user).
In addition, the number function cannot be used unless the language-neutral format used by the element is consistent with the XPath syntax for a Number.</span>
</p>
</blockquote>

</dd>

<dt id="function-sum"><b>関数：</b> <i>number</i> <b>sum</b> ( <i>node-set</i> )</dt>
<dd>
<p>
<b><a href="#function-sum">sum</a></b>
関数は、引数に与えたノード集合に属する各ノードの
<a href="#dt-string-value">文字列値</a>
を数値に変換し、それらの合計を返す。
<span lang="en">
The sum function returns the sum, for each node in the argument node-set, of the result of converting the string-values of the node to a number.</span>
</p>
</dd>

<dt id="function-floor"><b>関数：</b> <i>number</i> <b>floor</b> ( <i>number</i> )</dt>
<dd>
<p>
<b><a href="#function-floor">floor</a></b>
関数は、引数に与えた数値を越えない範囲で最も大きい（正の無限大に最も近い）整数を返す。
<ins class="errata">
引数が NaN, 正の無限大, 負の無限大, 正のゼロ, 負のゼロの場合、引数と同じ値を返す。
引数がゼロより大きく 1 より小さい場合、正のゼロを返す。
</ins>
<span lang="en">
The floor function returns the largest (closest to positive infinity) number that is not greater than the argument and that is an integer.
<ins >If the argument is NaN, then NaN is returned.
If the argument is positive infinity, then positive infinity is returned.
If the argument is negative infinity, then negative infinity is returned.
If the argument is positive zero, then positive zero is returned.
If the argument is negative zero, then negative zero is returned.
If the argument is greater than zero, but less than 1, then positive zero is returned.</ins></span>
</p>
</dd>

<dt id="function-ceiling"><b>関数：</b> <i>number</i> <b>ceiling</b> ( <i>number</i> )</dt>
<dd>
<p>
<b><a href="#function-ceiling">ceiling</a></b>
関数は、引数に与えた数値を下回らない範囲で最も小さい（負の無限大に最も近い）整数を返す。
<ins class="errata">
引数が NaN, 正の無限大, 負の無限大, 正のゼロ, 負のゼロの場合、引数と同じ値を返す。
引数がゼロより小さく -1 より大きい場合、負のゼロを返す。
</ins>
<span lang="en">
The ceiling function returns the smallest (closest to negative infinity) number that is not less than the argument and that is an integer.
<ins >If the argument is NaN, then NaN is returned.
If the argument is positive infinity, then positive infinity is returned.
If the argument is negative infinity, then negative infinity is returned.
If the argument is positive zero, then positive zero is returned.
If the argument is negative zero, then negative zero is returned.
 If the argument is less than zero, but greater than -1, then negative zero is returned.</ins></span>
</p>
</dd>

<dt id="function-round"><b>関数：</b> <i>number</i> <b>round</b> ( <i>number</i> )</dt>
<dd>
<p>
<b><a href="#function-round">round</a></b>
関数は、引数に渡された値に最も近い整数を返す。
そのような数が２つ存在する場合、正の無限大に近い方を返す。
引数が NaN, 正の無限大, 負の無限大, 正のゼロ, 負のゼロの場合、引数と同じ値を返す。
引数がゼロより小さく -0.5 以上の場合、負のゼロを返す。
<span lang="en">
The round function returns the number that is closest to the argument and that is an integer.
If there are two such numbers, then the one that is closest to positive infinity is returned.
If the argument is NaN, then NaN is returned.
If the argument is positive infinity, then positive infinity is returned.
If the argument is negative infinity, then negative infinity is returned.
If the argument is positive zero, then positive zero is returned.
If the argument is negative zero, then negative zero is returned.
If the argument is less than zero, but greater than or equal to -0.5, then negative zero is returned.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
上記で、引数が負のゼロの場合と最後の場合の
<b><a href="#function-round">round</a></b>
関数を呼び出した結果は 0.5 を加えてから
<b><a href="#function-floor">floor</a></b> 
関数を呼び出した結果と同じにならない。
<span lang="en">
NOTE: For these last two cases, the result of calling the round function is not the same as the result of adding 0.5 and then calling the floor function.</span>
</p>
</blockquote>

</dd>

</dl>

	</section>
</section>
<section>

<h2 id="data-model" title="5 Data Model">5 データモデル</h2>

<p>
XPath は XML 文書をツリーとして扱う。
この節では、XPath が XML 文書をどのようにしてツリーにモデル化するかについて述べる。
このモデルは概念的なものであり、特定の実装を義務付けるものではない。
このモデルと XML 情報セット
<a href="#XINFO">[XML Infoset]</a>
との関係については、<a href="#infoset">[<b>B XML 情報セットとの対応付け</b>]</a>
で述べる。
<span lang="en">
XPath operates on an XML document as a tree.
This section describes how XPath models an XML document as a tree.
This model is conceptual only and does not mandate any particular implementation.
The relationship of this model to the XML Information Set [XML Infoset] is described in [B XML Information Set Mapping].</span>
</p>

<p>
XPath が扱う XML 文書は、XML 名前空間勧告
<a href="#XMLNAMES">[XML Names]</a>
に準拠していなければならない。
<span lang="en">
XML documents operated on by XPath must conform to the XML Namespaces Recommendation [XML Names].</span>
</p>

<p>
ツリーはノードを持ち、ノードには次の７種類がある：
<span lang="en">
The tree contains nodes.
There are seven types of node:</span>
</p>

<ul>

<li>
<p>
ルートノード
<span lang="en">
root nodes</span>
</p>
</li>

<li>
<p>
要素ノード
<span lang="en">
element nodes</span>
</p>
</li>

<li>
<p>
テキストノード
<span lang="en">
text nodes</span>
</p>
</li>

<li>
<p>
属性ノード
<span lang="en">
attribute nodes</span>
</p>
</li>

<li>
<p>
名前空間ノード
<span lang="en">
namespace nodes</span>
</p>
</li>

<li>
<p>
処理命令ノード
<span lang="en">
processing instruction nodes</span>
</p>
</li>

<li>
<p>
コメントノード
<span lang="en">
comment nodes</span>
</p>
</li>

</ul>

<p>
すべてのノード型に対し、その型のノードの <dfn id="dt-string-value">文字列値</dfn> を決定する手続きが定められている。
文字列値がそのノードの一部となるノード型もあれば、子孫ノードの文字列値から算出されるノード型もある。
<span lang="en">
For every type of node, there is a way of determining a string-value for a node of that type.
For some types of node, the string-value is part of the node; for other types of node, the string-value is computed from the string-value of descendant nodes.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
要素ノードやルートノードの場合、ノードの文字列値は DOM の <code>nodeValue</code> メソッド（
<a href="#DOM">[DOM]</a>
参照）が返す文字列と同じではない。
<span lang="en">
NOTE: For element nodes and root nodes, the string-value of a node is not the same as the string returned by the DOM nodeValue method (see [DOM]).</span>
</p>
</blockquote>

<p>
一部のノード型は <dfn id="dt-expanded-name">展開名</dfn> を持つ。
展開名は局所部と名前空間 URI からなる。
局所部は文字列である。
名前空間 URI は null または文字列のいずれかである。

<!-- errata
 XML 文書に指定する名前空間 URI には
<a href="#RFC2396">[RFC2396]</a>
により定められた URI 参照を用いることができる。
すなわち、素片識別子を含み得るし、相対形式も可能である。
名前空間の処理においては相対 URI は絶対 URI に解決されるべきである。
すなわち、データモデル内のノードの
<a href="#dt-expanded-name">展開名</a>
の名前空間 URI は絶対形式に解決されるべきである。
２つの
<a href="#dt-expanded-name">展開名</a>
は、局所部が同じ、かつ、名前空間も（いずれも null になる場合も含めて）同じになるとき、等しいものとされる。
 -->

<ins class="errata">
XML 文書において名前空間宣言により指定される
<a href="http://www.w3.org/TR/REC-xml-names#dt-NSName">名前空間名</a>
は
<a href="#RFC2396">[RFC2396]</a>
で定められるように URI 参照になるので、素片識別子を含み得るし、相対形式も可能である。
もし
<a href="#dt-expanded-name">展開名</a>
が、（素片識別子も伴い得る）相対 URI の名前空間名を用いた名前空間宣言により宣言された接頭辞を持つ
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
から展開されたものであった場合、その
<a href="#dt-expanded-name">展開名</a>
の名前空間 URI は実装依存になる。
そのような
<a href="#dt-expanded-name">展開名</a>
の名前空間 URI にふるまいが依存する XPath 式は、相互運用性に欠くことになる。
</ins>

<span lang="en">
Some types of node also have an expanded-name, which is a pair consisting of a local part and a namespace URI.
The local part is a string.
The namespace URI is either null or a string.

<del >The namespace URI specified in the XML document can be a URI reference as defined in [RFC2396]; this means it can have a fragment identifier and can be relative.
A relative URI should be resolved into an absolute URI during namespace processing: the namespace URIs of expanded-names of nodes in the data model should be absolute.
Two expanded-names are equal if they have the same local part, and either both have a null namespace URI or both have non-null namespace URIs that are equal.
</del>
<ins >A namespace name specified in a namespace declaration in an XML document is a URI reference as defined in [RFC2396]; this implies it can have a fragment identifier and can be relative.
The namespace URI component of an expanded-name is implementation-dependent if the expanded-name is expanded from a QName  whose prefix is declared by a namespace declaration with a namespace name that is a relative URI (with or without a fragment identifier).
An XPath expression that depends on the value of the namespace URI component of such expanded-names is not interoperable.</ins>
</span>
</p>


<p>
文書内のすべてのノードに、 <dfn id="dt-document-order">文書順</dfn> という順序付けが与えられる。
これは一般実体を展開した後の文書の XML 表現において、各ノードの XML 表現の最初の文字が現れる順序を表す。
従って、ルートノードが最初のノードになる。
要素ノードはそれ自身の子よりも先になる。
すなわち文書順において要素ノードは、（実体の展開後の） XML 内で要素ノードの開始タグが表れる順序により順序付けられる。
要素の属性ノードと名前空間ノードは、その要素の子ノードよりも先になる。
名前空間ノードは属性ノードよりも先になるものとする。
名前空間ノードの相対的順序、および、属性ノードの相対的な順序は実装依存になる。
 <dfn id="dt-reverse-document-order">逆文書順</dfn> は<a href="#dt-document-order">文書順</a>を逆にしたものである。
<span lang="en">
There is an ordering, document order, defined on all the nodes in the document corresponding to the order in which the first character of the XML representation of each node occurs in the XML representation of the document after expansion of general entities.
Thus, the root node will be the first node.
Element nodes occur before their children.
Thus, document order orders element nodes in order of the occurrence of their start-tag in the XML (after expansion of entities).
The attribute nodes and namespace nodes of an element occur before the children of the element.
The namespace nodes are defined to occur before the attribute nodes.
The relative order of namespace nodes is implementation-dependent.
The relative order of attribute nodes is implementation-dependent.
Reverse document order is the reverse of document order.</span>
</p>

<p>
ルートノードと要素ノードは、順序付けられた子ノードのリストを持つ。
複数のノードが１つの子ノードを共有することはない。
すなわち、異なる２つのノードに対し、一方のノードの子ノードともう一方のノードの子ノードはすべて互いに異なる。
ルートノードを除くすべてのノードは、必ず <dfn id="dt-parent">親ノード</dfn> を１つ持つ。
親ノードになるのはルートノードか要素ノードのどちらかである。
ルートまたは要素ノードはそのそれぞれの子ノードの親ノードになる。
ノードの <dfn id="dt-descendants">子孫ノード</dfn> とは、そのノードの子ノード、および子ノードの子孫ノードになる。
<span lang="en">
Root nodes and element nodes have an ordered list of child nodes.
Nodes never share children: if one node is not the same node as another node, then none of the children of the one node will be the same node as any of the children of another node.
Every node other than the root node has exactly one parent, which is either an element node or the root node.
A root node or an element node is the parent of each of its child nodes.
The descendants of a node are the children of the node and the descendants of the children of the node.</span>
</p>

	<section>

<h3 id="root-node" title="5.1 Root Node">5.1 ルートノード</h3>

<p>
ルートノードはツリーのルートであり、ツリーのルート以外にはならない。
文書要素に対応する要素ノードはルートノードの子ノードになる。
ルートノードの子には、プロローグ部や文書要素終了後に位置する処理命令やコメントに対応する処理命令ノードやコメントノードも含まれる。
<span lang="en">
The root node is the root of the tree.
A root node does not occur except as the root of the tree.
The element node for the document element is a child of the root node.
The root node also has as children processing instruction and comment nodes for processing instructions and comments that occur in the prolog and after the end of the document element.</span>
</p>

<p>
ルートノードの
<a href="#dt-string-value">文字列値</a>
は、ルートノードのすべての<a href="#dt-descendants">子孫テキストノード</a>の
<a href="#dt-string-value">文字列値</a>
を文書順に連結したものである。
<span lang="en">
The string-value of the root node is the concatenation of the string-values of all text node descendants of the root node in document order.</span>
</p>

<p>
ルートノードは
<a href="#dt-expanded-name">展開名</a>
を持たない。
<span lang="en">
The root node does not have an expanded-name.</span>
</p>


	</section>
	<section>

<h3 id="element-nodes" title="5.2 Element Nodes">5.2 要素ノード</h3>

<p>
文書内のすべての要素に対し、対応する要素ノードがある。
要素ノードの
<a href="#dt-expanded-name">展開名</a>
は、タグに指定した要素の
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
を XML 名前空間勧告
<a href="#XMLNAMES">[XML Names]</a>
に従って展開することにより得られる。
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
に接頭辞がなく、かつ、適用し得る既定の名前空間も与えられていない場合、要素の
<a href="#dt-expanded-name">展開名</a>
の名前空間 URI は null になる。
<span lang="en">
There is an element node for every element in the document.
An element node has an expanded-name computed by expanding the QName of the element specified in the tag in accordance with the XML Namespaces Recommendation [XML Names].
The namespace URI of the element's expanded-name will be null if the QName has no prefix and there is no applicable default namespace.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
<a href="#XMLNAMES">[XML Names]</a>
の付録 A.3 の表記法では、展開名の局所部は <code>ExpEType</code> 要素の <code>type</code> 属性に対応し, 展開名の名前空間 URI は <code>ExpEType</code> 要素の <code>ns</code> 属性に対応する。
<code>ExpEType</code> 要素の <code>ns</code> 属性が省略された場合、名前空間 URI は null になる。
<span lang="en">
NOTE: In the notation of Appendix A.3 of [XML Names], the local part of the expanded-name corresponds to the type attribute of the ExpEType element; the namespace URI of the expanded-name corresponds to the ns attribute of the ExpEType element, and is null if the ns attribute of the ExpEType element is omitted.</span>
</p>
</blockquote>

<p>
要素ノードの子ノードは、その内容の要素ノードやコメントノード, 処理命令ノード, テキストノードである。
内部実体参照と外部実体参照は展開され、文字参照は解決される。
<span lang="en">
The children of an element node are the element nodes, comment nodes, processing instruction nodes and text nodes for its content.
Entity references to both internal and external entities are expanded.
Character references are resolved.</span>
</p>

<p>
要素ノードの
<a href="#dt-string-value">文字列値</a>
は、要素ノードのすべての
<a href="#dt-descendants">子孫テキストノード</a>
の
<a href="#dt-string-value">文字列値</a>
を文書順に連結したものである。
<span lang="en">
The string-value of an element node is the concatenation of the string-values of all text node descendants of the element node in document order.</span>
</p>

		<section>
<h4 id="unique-id" title="5.2.1 Unique IDs">5.2.1 一意 ID</h4>

<p>
要素ノードは一意的な識別子 (ID) を持つ場合がある。
これは DTD 内で <code>ID</code> 型として宣言された属性の値である。
同じ文書内の任意の異なる２つの要素が同一の一意 ID を持つことはできない。
XML プロセッサが、１つの文書内に同一の一意 ID を持つ要素が２つある（これは文書が妥当でない場合にのみ起こりうる）ことを報告した場合、文書順で２番目の要素は一意 ID を持たないものとして扱われなければならない。
<span lang="en">
An element node may have a unique identifier (ID).
This is the value of the attribute that is declared in the DTD as type ID.
No two elements in a document may have the same unique ID.
If an XML processor reports two elements in a document as having the same unique ID (which is possible only if the document is invalid) then the second element in document order must be treated as not having a unique ID.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
文書が DTD を持っていない場合には、その文書内に一意 ID を持つ要素はない。
<span lang="en">
NOTE: If a document does not have a DTD, then no element in the document will have a unique ID.</span>
</p>
</blockquote>

		</section>
	</section>
	<section>

<h3 id="attribute-nodes" title="5.3 Attribute Nodes">5.3 属性ノード</h3>

<p>
それぞれの要素ノードは関連する属性ノードの集合を持つ。
要素はそれらの属性ノードの
<a href="#dt-parent">親ノード</a>
になる。
しかしながら、属性ノードは、その親要素ノードの子ノードにはならない。
<span lang="en">
Each element node has an associated set of attribute nodes; the element is the parent of each of these attribute nodes; however, an attribute node is not a child of its parent element.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
これは DOM とは異なる。
DOM では、属性を持つ要素をその属性の親ノードとしては扱わない(<a href="#DOM">[DOM]</a>
参照）。
<span lang="en">
NOTE: This is different from the DOM, which does not treat the element bearing an attribute as the parent of the attribute (see [DOM]).</span>
</p>
</blockquote>

<p>
要素が属性ノードを共有することはない。
すなわち、異なる２つの要素ノードに対し、一方に属する属性ノードともう一方に属する属性ノードはすべて互いに異なる。
<span lang="en">
Elements never share attribute nodes: if one element node is not the same node as another element node, then none of the attribute nodes of the one element node will be the same node as the attribute nodes of another element node.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
<code>=</code> 演算子は２つのノードが同じ値を持つかどうかをテストするためのものであり、それらが同じノードかどうかをテストするものでは<em>ない</em>。
従って、異なる要素の属性は同じノードでなくても <code>=</code> 演算子を用いて比較し得る。
<span lang="en">
NOTE: The = operator tests whether two nodes have the same value, not whether they are the same node.
Thus attributes of two different elements may compare as equal using =, even though they are not the same node.</span>
</p>
</blockquote>

<p>
既定値を伴う属性は、属性を指定した場合と同等に扱われる。
一方、 DTD 内の要素型の属性宣言において、既定値が <code>#IMPLIED</code> として宣言されている場合、その属性は要素に指定されない限り、要素の属性集合には含まれない。
<span lang="en">
A defaulted attribute is treated the same as a specified attribute.
If an attribute was declared for the element type in the DTD, but the default was declared as #IMPLIED, and the attribute was not specified on the element, then the element's attribute set does not contain a node for the attribute.</span>
</p>

<p>
<code>xml:lang</code> や <code>xml:space</code> などの一部の属性は、他の子孫要素の同じ属性のインスタンスにより上書きされる場合を除き、その属性を適用し得る子孫要素すべてに対し効果が伝播する。
しかしながら、要素の属性は（開始または空要素）タグの中で明示的に指定されるか、 DTD において属性の既定値が明示的に宣言されない限りノードにならないので、この伝播によりツリー内に属性ノードが生成されるわけではない。
<span lang="en">
Some attributes, such as xml:lang and xml:space, have the semantics that they apply to all elements that are descendants of the element bearing the attribute, unless overridden with an instance of the same attribute on another descendant element.
However, this does not affect where attribute nodes appear in the tree: an element has attribute nodes only for attributes that were explicitly specified in the start-tag or empty-element tag of that element or that were explicitly declared in the DTD with a default value.</span>
</p>

<p>
属性ノードは
<a href="#dt-expanded-name">展開名</a>
と
<a href="#dt-string-value">文字列値</a>
を持つ。
<a href="#dt-expanded-name">展開名</a>
は、 XML 文書のタグ内に指定した要素の
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
を XML 名前空間勧告
<a href="#XMLNAMES">[XML Names]</a>
に従って展開することにより得られる。
属性の
<a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a>
に接頭辞がない場合、その属性名の名前空間 URI は null になる。
<span lang="en">
An attribute node has an expanded-name and a string-value.
The expanded-name is computed by expanding the QName specified in the tag in the XML document in accordance with the XML Namespaces Recommendation [XML Names].
The namespace URI of the attribute's name will be null if the QName of the attribute does not have a prefix.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
<a href="#XMLNAMES">[XML Names]</a>
の付録 A.3 の表記法では、展開名の局所部は <code>ExpAName</code> 要素の <code>name</code> 属性に対応し, 展開名の名前空間 URI は <code>ExpAName</code> 要素の <code>ns</code> 属性に対応する。
<code>ExpAName</code> 要素の <code>ns</code> 属性が省略された場合、名前空間 URI は null になる。
<span lang="en">
NOTE: In the notation of Appendix A.3 of [XML Names], the local part of the expanded-name corresponds to the name attribute of the ExpAName element; the namespace URI of the expanded-name corresponds to the ns attribute of the ExpAName element, and is null if the ns attribute of the ExpAName element is omitted.</span>
</p>
</blockquote>

<p>
属性ノードは
<a href="#dt-string-value">文字列値</a>
を持つ。
この
<a href="#dt-string-value">文字列値</a>
は、XML 勧告
<a href="#XML">[XML]</a>
に規定される方法で正規化された値である。
正規化により長さゼロの文字列になったとしても特別に扱われることはない。
すなわち、
<a href="#dt-string-value">文字列値</a>
が長さゼロの文字列の属性ノードとして扱われる。
<span lang="en">
An attribute node has a string-value.
The string-value is the normalized value as specified by the XML Recommendation [XML].
An attribute whose normalized value is a zero-length string is not treated specially: it results in an attribute node whose string-value is a zero-length string.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
属性の既定値は外部 DTD や外部パラメータ実体でも宣言され得る。
XML 勧告は、妥当性の検証を行わない XML プロセッサに対する外部 DTD や外部パラメータの読み込みを要求していない。
外部 DTD または外部のパラメータ実体で宣言される属性の既定値が XPath ツリーに含まれることを前提に組まれたスタイルシートや他の機能は、妥当性の検証を行わない XML プロセッサでは機能しない可能性がある。
<span lang="en">
NOTE: It is possible for default attributes to be declared in an external DTD or an external parameter entity.
The XML Recommendation does not require an XML processor to read an external DTD or an external parameter unless it is validating.
A stylesheet or other facility that assumes that the XPath tree contains default attribute values declared in an external DTD or parameter entity may not work with some non-validating XML processors.</span>
</p>
</blockquote>

<p>
名前空間を宣言する属性に対応する属性ノードはない（
<a href="#XMLNAMES">[XML Names]</a>
参照）。
<span lang="en">
There are no attribute nodes corresponding to attributes that declare namespaces (see [XML Names]).</span>
</p>


	</section>
	<section>

<h3 id="namespace-nodes" title="5.4 Namespace Nodes">5.4 名前空間ノード</h3>

<p>
それぞれの要素は、対応付けられた名前空間ノードの集合を持つ。
集合に含まれる名前空間ノードのうち、１つは（もしあれば）要素のスコープに入る既定の名前空間に対応し、残りは要素のスコープに入る異なる名前空間接頭辞（ XML 名前空間勧告
<a href="#XMLNAMES">[XML Names]</a>
で暗黙的に宣言される <code>xml</code> 接頭辞も含む）に１つずつ対応するものになる。
要素はこれらの各名前空間ノードの
<a href="#dt-parent">親ノード</a>
になる。
しかしながら、名前空間ノードはその親要素ノードの子ノードにはならない。
要素が名前空間ノードを共有することはない。
すなわち、異なる２つの要素ノードに対し、一方に属する名前空間ノードともう一方に属する名前空間ノードはすべて互いに異なる。
すなわち、要素には次に挙げるものに対応する名前空間ノードを持つことになる：
<span lang="en">
Each element has an associated set of namespace nodes, one for each distinct namespace prefix that is in scope for the element (including the xml prefix, which is implicitly declared by the XML Namespaces Recommendation [XML Names]) and one for the default namespace if one is in scope for the element.
The element is the parent of each of these namespace nodes; however, a namespace node is not a child of its parent element.
Elements never share namespace nodes: if one element node is not the same node as another element node, then none of the namespace nodes of the one element node will be the same node as the namespace nodes of another element node.
This means that an element will have a namespace node:</span>
</p>

<ul>

<li class="errata">
<p >
<!-- 
<del >要素の属性のうち、名前が <code>xmlns:</code> から始まるものすべて。</del>
 -->
<span lang="en">
<del >for every attribute on the element whose name starts with xmlns:;</del></span>
</p>
</li>

<li class="errata">
<p>
<!-- 
<del >要素の先祖要素の属性のうち、名前が <code>xmlns:</code> から始まるものすべて。
ただし、要素自身やより近い先祖ノードでその接頭辞が再宣言されているものは除く。
</del>
 -->
<span lang="en">
<del >for every attribute on an ancestor element whose name starts xmlns: unless the element itself or a nearer ancestor redeclares the prefix;</del></span>
</p>
</li>

<li class="errata">
<p>
<ins >要素または要素に最も近い先祖要素の属性のうち、名前が <code>xmlns:</code> から始まり、属性値が空でないものすべて。
ただし、要素自身やより近い先祖ノードでその接頭辞が空の値に再宣言されているものは除く。
</ins>
<span lang="en">
<ins >for every attribute on the element or the nearest ancestor element whose name starts with xmlns: and whose value is non-empty unless the element itself or a nearer ancestor redeclares the prefix with an empty value;</ins>
</span>
</p>

<blockquote class="errata">
<p >
<ins >
<b>注記：</b>
接頭辞の宣言取り消しは
<a href="#XMLNames11">[XML Names 1.1]</a>
に適合する文書においてのみ生じ得る。
</ins>
<span lang="en">
<ins >NOTE: undeclaring prefixes can only occur in documents that conform to [XML Names 1.1].</ins>
</span>
</p>
</blockquote>

</li>





<li>

<p>
要素またはその先祖ノードのうち、 <code>xmlns</code> 属性を持つもののうち、最も要素に近い要素の <code>xmlns</code> 属性の値が空でないならば、その <code>xmlns</code> 属性。
<span lang="en">
for an xmlns attribute, if the element or some ancestor has an xmlns attribute, and the value of the xmlns attribute for the nearest such element is non-empty</span>
</p>

<blockquote>
<p>
<b>注記：</b>
属性 <code>xmlns=""</code> は、既定の名前空間の「取り消し宣言」になる（
<a href="#XMLNAMES">[XML Names]</a>
参照）。
<span lang="en">
NOTE: An attribute xmlns="" "undeclares" the default namespace (see [XML Names]).</span>
</p>
</blockquote>

</li>

</ul>

<p>
名前空間ノードは
<a href="#dt-expanded-name">展開名</a>
を持ち、局所部は名前空間接頭辞になる（既定の名前空間に対応する名前空間ノードの場合は空になる）。
名前空間 URI は常に null になる。
<!-- □ -->
<span lang="en">
A namespace node has an expanded-name: the local part is the namespace prefix (this is empty if the namespace node is for the default namespace); the namespace URI is always null.</span>
</p>

<p>
名前空間ノードの
<a href="#dt-string-value">文字列値</a>
は、名前空間接頭辞に結びつけられた名前空間 URI である。
<!-- 
<del class="errata">
その URI が相対 URI の場合、
<a href="#dt-expanded-name">展開名</a>
の名前空間 URI と同様に解決されなければならない。
</del>
 -->
<ins class="errata">
XML 文書における名前空間宣言の名前空間名が（素片識別子も伴い得る）相対 URI だった場合、
<a href="#dt-string-value">文字列値</a>
は実装依存になる。
そのような名前空間ノードの
<a href="#dt-string-value">文字列値</a>
に依存する XPath 式は、相互運用性に欠くことになる。
</ins>
<span lang="en">
The string-value of a namespace node is the namespace URI that is being bound to the namespace prefix; 
<del >if it is relative, it must be resolved just like a namespace URI in an expanded-name.</del>
<ins >if the namespace name occurring in the namespace declaration in the XML document is a relative URI (with or without a fragment identifier), then the string-value is implementation-dependent.
An XPath expression that depends on the string-value of such namespace nodes is not interoperable.</ins>
</span>
</p>

	</section>
	<section>


<h3 id="section-Processing-Instruction-Nodes" title="5.5 Processing Instruction Nodes">5.5 処理命令ノード</h3>

<p>
文書型宣言内に記述されるものを除き、すべての処理命令には対応する処理命令ノードが存在する。
<span lang="en">
There is a processing instruction node for every processing instruction, except for any processing instruction that occurs within the document type declaration.</span>
</p>

<p>
処理命令は
<a href="#dt-expanded-name">展開名</a>
を持ち、局所部は処理命令の処理対象である。
名前空間 URI は null になる。
処理命令ノードの
<a href="#dt-string-value">文字列値</a>
は、処理命令のうち処理対象と空白に後続する部分になる。
最後の <code>?&gt;</code> はこの文字列値には含まれない。
<span lang="en">
A processing instruction has an expanded-name: the local part is the processing instruction's target; the namespace URI is null.
The string-value of a processing instruction node is the part of the processing instruction following the target and any whitespace.
It does not include the terminating ?&gt;.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
XML 宣言は処理命令ではない。
従って XML 宣言に対応する処理命令ノードはない。
<span lang="en">
NOTE: The XML declaration is not a processing instruction.
Therefore, there is no processing instruction node corresponding to the XML declaration.</span>
</p>
</blockquote>

	</section>
	<section>

<h3 id="section-Comment-Nodes" title="5.6 Comment Nodes">5.6 コメントノード</h3>

<p>
文書型宣言内に記述されるコメントを除き、すべてのコメントには対応するコメントノードが存在する。
<span lang="en">
There is a comment node for every comment, except for any comment that occurs within the document type declaration.</span>
</p>

<p>
コメントの
<a href="#dt-string-value">文字列値</a>
はコメントの内容である。
先頭の <code>&lt;!--</code> と末尾の <code>--&gt;</code> は内容に含まれない。
<span lang="en">
The string-value of comment is the content of the comment not including the opening &lt;!-- or the closing --&gt;.</span>
</p>

<p>
コメントノードは
<a href="#dt-expanded-name">展開名</a>
を持たない。
<span lang="en">
A comment node does not have an expanded-name.</span>
</p>

	</section>
	<section>

<h3 id="section-Text-Nodes" title="5.7 Text Nodes">5.7 テキストノード</h3>

<p>
文字データはテキストノードにグループ化される。
各テキストノードには可能な限り多くの文字データがグループ化される。
すんわち、テキストノードの直前または直後にテキストノードの同胞ノードが来ることはない。
テキストノードの
<a href="#dt-string-value">文字列値</a>
はその文字データである。
テキストノードは常に少なくとも１文字のデータを持つ。
<span lang="en">
Character data is grouped into text nodes.
As much character data as possible is grouped into each text node: a text node never has an immediately following or preceding sibling that is a text node.
The string-value of a text node is the character data.
A text node always has at least one character of data.</span>
</p>

<p>
CDATA セクション内の各文字は文字データとして扱われる。
従って、ソース文書内の <code>&lt;![CDATA[&lt;]]&gt;</code> は <code>&amp;lt;</code> と同等の扱いになり、いずれも、ツリー内では１つの <code>&lt;</code> 文字からなるテキストノードになる。
すなわち CDATA セクションは <code>&lt;![CDATA[</code> と <code>]]&gt;</code> を削除し、すべての <code>&lt;</code> と <code>&amp;</code> をそれぞれ <code>&amp;lt;</code> と <code>&amp;amp;</code> に置き換えたかのように扱われる。
<span lang="en">
Each character within a CDATA section is treated as character data.
Thus, &lt;![CDATA[&lt;]]&gt; in the source document will treated the same as &amp;lt;.
Both will result in a single &lt; character in a text node in the tree.
Thus, a CDATA section is treated as if the &lt;![CDATA[ and ]]&gt; were removed and every occurrence of &lt; and &amp; were replaced by &amp;lt; and &amp;amp; respectively.</span>
</p>

<blockquote>
<p>
<b>注記：</b>
文字 <code>&lt;</code> からなるテキストノードを XML として書き出す場合、たとえば <code>&amp;lt;</code> を用いるか、あるいは文字 <code>&lt;</code> を CDATA セクションにくるんで <code>&lt;</code> 文字をエスケープしなければならない。
<span lang="en">
NOTE: When a text node that contains a &lt; character is written out as XML, the &lt; character must be escaped by, for example, using &amp;lt;, or including it in a CDATA section.</span>
</p>
</blockquote>

<p>
コメント, 処理命令, 属性値に含まれる文字はテキストノードを生成しない。
外部実体の改行は XML 勧告
<a href="#XML">[XML]</a>
に従って #xA に正規化される。
<span lang="en">
Characters inside comments, processing instructions and attribute values do not produce text nodes.
Line-endings in external entities are normalized to #xA as specified in the XML Recommendation [XML].</span>
</p>


<p class="errata">
<ins >
文書要素の外側の空白はテキストノードを生成しない。
</ins>
<span lang="en">
<ins >Whitespace outside the document element does not produce text nodes.</ins>
</span>
</p>

<p>
テキストノードは
<a href="#dt-expanded-name">展開名</a>
を持たない。
<span lang="en">
A text node does not have an expanded-name.</span>
</p>


	</section>
</section>
<section>


<h2 id="section-Conformance" title="6 Conformance">6 適合性</h2>

<p>
XPath は、主に他の仕様からの部品としての利用が意図されている。
従って XPath の実装に際しての適合性基準は、 XPath を利用する仕様（
<a href="#XPTR">[XPointer]</a>
や
<a href="#XSLT">[XSLT]</a>
など) に依存する形で決まるため、独立の XPath 実装に対する適合性基準は定めない。
<span lang="en">
XPath is intended primarily as a component that can be used by other specifications.
Therefore, XPath relies on specifications that use XPath (such as [XPointer] and [XSLT]) to specify criteria for conformance of implementations of XPath and does not define any conformance criteria for independent implementations of XPath.</span>
</p>

</section>

<hr title="Separator from footer" />

<section>

<h2 id="section-References" title="A References">A 参照文献</h2>

	<section>

<h3 id="section-Normative-References" title="A.1 Normative References">A.1 参照文献（規定）</h3>

<dl lang="en">

<dt id="IEEE754">IEEE 754</dt>
<dd>Institute of Electrical and Electronics Engineers.<br />
<i>IEEE Standard for Binary Floating-Point Arithmetic</i>.<br />
ANSI/IEEE Std 754-1985.
</dd>

<dt id="RFC2396">RFC2396</dt>
<dd>T. Berners-Lee, R. Fielding, and L. Masinter.<br />
<i>Uniform Resource Identifiers (URI): Generic Syntax</i>.<br />
IETF RFC 2396. See
<a href="http://www.ietf.org/rfc/rfc2396.txt">http://www.ietf.org/rfc/rfc2396.txt</a>.
</dd>

<dt id="XML">XML</dt>
<dd>World Wide Web Consortium.<br />
<i>Extensible Markup Language (XML) 1.0</i>.<br />
W3C Recommendation. See
<a href="http://www.w3.org/TR/1998/REC-xml-19980210">http://www.w3.org/TR/1998/REC-xml-19980210</a>
</dd>

<dt id="XMLNAMES">XML Names</dt>
<dd>World Wide Web Consortium.<br />
<i>Namespaces in XML</i>.<br />
W3C Recommendation. See
<a href="http://www.w3.org/TR/REC-xml-names">http://www.w3.org/TR/REC-xml-names</a>
</dd>


<dt class="errata" id="XML11"><ins >XML 1.1</ins></dt>
<dd ><ins >World Wide Web Consortium.<br />
<i>Extensible Markup Language (XML) 1.1</i>.<br />
W3C Recommendation. See
<a href="http://www.w3.org/TR/xml11/">http://www.w3.org/TR/xml11/</a></ins>
</dd>

<dt class="errata" id="XMLNames11"><ins >XML Names 1.1</ins></dt>
<dd ><ins >World Wide Web Consortium.<br />
<i>Namespaces in XML 1.1</i>.<br />
W3C Recommendation. See 
<a href="http://www.w3.org/TR/xml-names11/">http://www.w3.org/TR/xml-names11/</a></ins>
</dd>


</dl>

	</section>
	<section>

<h3 id="section-Other-References" title="A.2 Other References">A.2 その他の参照文献</h3>

<dl lang="en">

<dt id="CHARMOD">Character Model</dt>
<dd>World Wide Web Consortium.<br />
<i>Character Model for the World Wide Web</i>.<br />
W3C Working Draft. See
<a href="http://www.w3.org/TR/WD-charmod">http://www.w3.org/TR/WD-charmod</a>
</dd>

<dt id="DOM">DOM</dt>
<dd>World Wide Web Consortium.<br />
<i>Document Object Model (DOM) Level 1 Specification</i>.<br />
W3C Recommendation. See
<a href="http://www.w3.org/TR/REC-DOM-Level-1">http://www.w3.org/TR/REC-DOM-Level-1</a>
</dd>

<dt id="JLS">JLS</dt>
<dd>J. Gosling, B. Joy, and G. Steele.<br />
<i>The Java Language Specification</i>. See
<a href="http://java.sun.com/docs/books/jls/index.html">http://java.sun.com/docs/books/jls/index.html</a>
</dd>

<dt id="ISO10646">ISO/IEC 10646</dt>
<dd>ISO (International Organization for Standardization).<br />
<i>ISO/IEC 10646-1:1993, Information technology -- Universal Multiple-Octet Coded Character Set (UCS) -- Part 1: Architecture and Basic Multilingual Plane</i>.<br />
International Standard. See
<a href="http://www.iso.ch/cate/d18741.html">http://www.iso.ch/cate/d18741.html</a>
</dd>

<dt id="TEI">TEI</dt>
<dd>C.M. Sperberg-McQueen, L. Burnard.<br />
<i>Guidelines for Electronic Text Encoding and Interchange</i>.<br />
See
<a href="http://etext.virginia.edu/TEI.html">http://etext.virginia.edu/TEI.html</a>
</dd>

<dt id="UNICODE">Unicode</dt>
<dd>Unicode Consortium.<br />
<i>The Unicode Standard</i>.<br />
See
<a href="http://www.unicode.org/unicode/standard/standard.html">http://www.unicode.org/unicode/standard/standard.html</a>
</dd>

<dt id="XINFO">XML Infoset</dt>
<dd >World Wide Web Consortium.<br />
<i>XML Information Set</i>.<br />
<del class="errata">W3C Working Draft.</del>
<ins class="errata">W3C Recommendation. </ins>
 See
<a href="http://www.w3.org/TR/xml-infoset">http://www.w3.org/TR/xml-infoset</a>
</dd>


<dt id="XPTR">XPointer</dt>
<dd>World Wide Web Consortium.<br />
<i>XML Pointer Language (XPointer)</i>.<br />
W3C Working Draft. See
<a href="http://www.w3.org/TR/WD-xptr">http://www.w3.org/TR/WD-xptr</a>
</dd>

<dt id="XQL">XQL</dt>
<dd>J. Robie, J. Lapp, D. Schach.<br />
<i>XML Query Language (XQL)</i>.<br />
See
<a href="http://www.w3.org/TandS/QL/QL98/pp/xql.html">http://www.w3.org/TandS/QL/QL98/pp/xql.html</a>
</dd>

<dt id="XSLT">XSLT</dt>
<dd>World Wide Web Consortium.<br />
<i>XSL Transformations (XSLT)</i>.<br />

W3C Recommendation. See
<a href="http://www.w3.org/TR/xslt">http://www.w3.org/TR/xslt</a>
</dd>



</dl>

	</section>
</section>

<section class="errata">


<h2 id="infoset" title="B XML Information Set Mapping (Non-Normative)">B XML 情報セットとの対応付け（規定外）</h2>

<p class="trans-note">
【この章の内容は
<a href="http://www.w3.org/1999/11/REC-xpath-19991116-errata/#infoset" >正誤表</a>
により章全体が新しい内容に書き換えられている。
当訳ではその新しい方を掲載する。
元の内容は原文を参照されたし。
】
</p>


<p>
XPath データモデルのノードは、XML 情報セット
<a href="#XINFO">[XML Infoset]</a>
の情報項目（ information items ）に対応付けられる。
それぞれの対応関係は次のようになる。
<span lang="en">
The nodes in the XPath data model can be derived from the information items provided by the XML Information Set [XML Infoset] as follows:</span>
</p>

	<section class="div2">
<h3 id="IDAUDAS" title="The Root Node">B.1 ルートノード</h3>

<p>
XPath データモデルのインスタンスはルートノードをきっかり１つ含む。
ルートノードは XML 情報セット内で一意的になる<b>文書情報項目</b>に対応する。
<span lang="en">
An instance of the XPath Data Model contains exactly one root node, which corresponds to the unique document information item in an XML Information Set.</span>
</p>
<ul>
<li>
<p>
ルートノードの <i>子</i> は <b>[children]</b> プロパティからすべての<b>文書型宣言情報項目</b>を除いた情報項目に対応する。
<span lang="en">
The children of the root node are nodes corresponding to the information items found in the [children] property, omitting any document type declaration information items.</span>
</p>

</li>
</ul>
	</section>
	<section>
<h3 id="I.S.element-nodes" title="Element Nodes">B.2 要素ノード</h3>
<p>要素ノードは<b>要素情報項目</b>に対応する。
<span lang="en">
An element node corresponds to an element information item.</span>
</p>
<ul>
<li>
<p>
要素ノードの <i>子</i> は <b>[children]</b> プロパティに現れる情報項目に対応するノードになる。
連続する子の<b>文字情報項目</b>は１個のテキストノードに併合されるので、この対応関係は一対一ではない。
XPath データモデルにおいては、すべての一般実体の展開が要求されるので、子の<b>非展開実体参照情報項目</b>は存在しないことになる。
<span lang="en">
The children of the element node are nodes corresponding to the information items appearing in the [children] property.
This correspondence is not one-to-one, as consecutive character information item children are coalesced into a single text node.
Because the XPath data model requires that all general entities be expanded, there will never be unexpanded entity reference information item children.</span>
</p>

</li>
<li><p>
要素ノードの <i>属性</i> は <b>[attributes]</b> プロパティに現れる<b>属性情報項目</b>に対応するノードになる。
<span lang="en">
The attributes of the element node are nodes corresponding to attribute information items appearing in the [attributes] property.</span>
</p>
</li>
<li>
<p>
要素ノードの<i>名前空間</i>は <b>[in-scope namespaces]</b> プロパティに現れる<b>名前空間情報項目</b>に対応するノードになる。
<span lang="en">
The namespaces of the element node are nodes corresponding to namespace information items appearing in the [in-scope namespaces] property.</span>
</p>
</li>
<li>
<p>
要素ノードの <i>展開名</i> の局所部は <b>[local name]</b> プロパティに対応する。
要素ノードの <i>展開名</i> の名前空間 URI は <b>[namespace name]</b> プロパティに対応する。
<span lang="en">
The local part of the expanded-name of the element node corresponds to the [local name] property.
The namespace URI of the expanded-name of the element node corresponds to the [namespace name] property.</span>
</p>
</li>
<li>
<p>
要素ノードの一意 ID は <b>[attributes]</b> プロパティの中に <b>[attribute type]</b> が <code>ID</code> の<b>属性情報項目</b>がもし存在すれば、その <b>[normalized value]</b> プロパティに対応する。
存在しなければ null である。
<span lang="en">
The unique ID of the element node corresponds to the [normalized value] property of the attribute information item in the [attributes] property that has an [attribute type] property of ID, if such an attribute exists, otherwise null.</span>
</p>

</li>
<li>
<p>
要素ノードの <i>親</i> は <b>[parent]</b> プロパティに対応する。
<span lang="en">
The parent of the element node corresponds to the [parent] property.</span>
</p>
</li>
</ul>
	</section>
	<section>

<h3 id="IDAOHAS" title="Attribute Nodes">B.3 属性ノード</h3>
<p>
属性ノードは <b>属性情報項目</b>に対応する。
名前空間宣言は属性としてモデル化されない。
<span lang="en">
An attribute node corresponds to an attribute information item.
Namespace declarations are not modelled as attributes.
</span>
</p>

<ul>
<li><p>
属性ノードの <i>展開名</i> の局所部は <b>[local name]</b> プロパティに対応する。
属性ノードの <i>展開名</i> の名前空間 URI は <b>[namespace name]</b> プロパティに対応する。
<span lang="en">
The local part of the expanded-name of the attribute node corresponds to the [local name] property.
The namespace URI of the expanded-name of an attribute node corresponds to the [namespace name] property.</span>
</p>
</li>

<li>
<p>
属性ノードの <i>文字列値</i> は <b>[normalized value]</b> プロパティに対応する。
<span lang="en">
The string-value of the attribute node corresponds to the [normalized value] property.</span>
</p>
</li>
<li>
<p>属性ノードの <i>親</i> は <b>[owner element]</b> プロパティに対応する。
<span lang="en">
The parent of the attribute node corresponds to the [owner element] property.</span>
</p>

</li>
</ul>
	</section>
	<section>

<h3 id="IDA1IAS" title="Text Nodes">B.4 テキストノード</h3>
<p>テキストノードは１個以上の連続する <b>文字情報項目</b> に対応する。
<span lang="en">
A text node corresponds to a sequence of one or more consecutive character information items.</span>
</p>
<ul>
<li>
<p>
テキストノードの <i>文字列値</i> は各 <b>文字情報項目</b> の <b>[character code]</b> プロパティを連結したものに対応する。
<span lang="en">
The string-value of the node text corresponds to the concatenated [character code] properties of each of the character information items.</span>
</p>
</li>
<li>
<p>
テキストノードの <i>親</i> は連続する <b>文字情報項目</b> の任意のどれかの <b>[parent]</b> プロパティに対応する（連続する各文字は常に同じ親を持つ）。
<span lang="en">
The parent of the text node corresponds to the [parent] property of any one of the consecutive character information items (consecutive characters always have the same parent).</span>
</p>

</li>
</ul>
	</section>
	<section>
<h3 id="IDA4JAS" title="Processing Instruction Nodes">B.5 処理命令ノード</h3>
<p>
処理命令ノードは <b>処理命令情報項目</b> に対応する。
<b>文書型宣言情報項目</b>の子の処理命令には対応する処理命令ノードは存在しない。
<span lang="en">
A processing instruction node corresponds to a processing instruction information item.
There are no processing instruction nodes for processing instructions that are children of a document type declaration information item.</span>
</p>
<ul>
<li><p>
処理命令ノードの <i>展開名</i> の局所部は <b>[target]</b> プロパティに対応する。
処理命令ノードの <i>展開名</i> の名前空間 URI 成分 null になる。
<span lang="en">
The local part of the expanded-name of the processing instruction node corresponds to the [target] property.
The namespace URI part of the expanded-name of a processing instruction node is null.</span>
</p>
</li>
<li>
<p>
処理命令ノードの <i>文字列値</i> は <b>[content]</b> プロパティに対応する。
<span lang="en">
The string-value of the processing instruction node corresponds to the [content] property.</span>
</p>
</li>
<li>
<p>
処理命令ノードの <i>親</i> は <b>[parent]</b> プロパティに対応する。
<span lang="en">
The parent of the processing instruction node corresponds to the [parent] property.</span>
</p>

</li>
</ul>
	</section>
	<section>
<h3 id="IDAILAS" title="Comment Nodes">B.6 コメントノード</h3>
<p>
コメントノードは <b>コメント情報項目</b> に対応する。
<span lang="en">
A comment node corresponds to a comment information item.</span>
</p>
<ul>
<li>
<p>
コメントノードの <i>文字列値</i> は <b>[content]</b> プロパティに対応する。
<span lang="en">
The string-value of the comment node corresponds to the [content] property.</span>
</p>

</li>
<li>
<p>
コメントノードの <i>親</i> は <b>コメント情報項目</b> の <b>[parent]</b> プロパティに対応する。
<span lang="en">
The parent of the comment node corresponds to the [parent] property of the comment information item.</span>
</p>
</li>
</ul>
	</section>
	<section>
<h3 id="IDAHMAS" title="Namespace Nodes">B.7 名前空間ノード</h3>

<p>
名前空間ノードは <b>名前空間情報項目</b> に対応する。
<span lang="en">
A namespace node corresponds to a namespace information item.</span>
</p>
<ul>
<li>
<p>
名前空間ノードの <i>展開名</i> の局所部は <b>[prefix]</b> プロパティに対応する。
名前空間ノードの <i>展開名</i> の名前空間 URI 成分は null である。
<span lang="en">
The local part of the expanded-name of the namespace node corresponds to the [prefix] property.
The namespace URI part of the expanded-name of the namespace node is null.</span>
</p>

</li>
<li>
<p>
名前空間ノードの <i>文字列値</i> は <b>[namespace name]</b> プロパティに対応する。
<span lang="en">
The string-value of the namespace node corresponds to the [namespace name] property.</span>
</p>
</li>
<li>
<p>
名前空間ノードの <i>親</i> がこのノードを名前空間コレクションに含む要素ノードになる。
<span lang="en">
The parent of the namespace node is the element node in whose namespaces collection this node appears.</span>
</p>
</li>
</ul>

	</section>
	<section>
<h3 id="IDAJNAS" title="XML Information Set Conformance">B.8 XML 情報セットへの適合性</h3>
<p>
この仕様は XML 情報セット
<a href="#XINFO">[XML Infoset]</a>
に適合する。
データモデルのインスタンスの構築にあたっては、情報セットプロセッサから以下の情報項目が抽出されなければならない：
<span lang="en">
This specification conforms to the XML Information Set [XML Infoset].
The following information items must be exposed by the infoset producer to construct an instance of the data model:</span>
</p>
<ul>
<li>
<p>
次のプロパティ：
<b>[children]</b><br />
を伴う<b>文書情報項目</b>
<span lang="en">
The Document Information Item with [children] properties.</span>
</p>

</li>
<li>
<p>
次のプロパティ：
<b>[children]</b>, <b>[attributes]</b>, <b>[in-scope namespaces]</b>, <b>[local name]</b>, <b>[namespace name]</b>, <b>[parent]</b><br />
を伴う<b>要素情報項目</b>
<span lang="en">
Element Information Items with [children], [attributes], [in-scope namespaces], [local name], [namespace name] and [parent] properties.</span>
</p>

</li>
<li><p>
次のプロパティ：
<b>[namespace name]</b>, <b>[local name]</b>, <b>[normalized value]</b>, <b>[owner element]</b>, <b>[attribute type]</b> <br />
を伴う<b>属性情報項目</b>
<span lang="en">
Attribute Information Items with [namespace name], [local name], [normalized value], [owner element] and [attribute type] properties.</span>
</p>

</li>
<li><p>
次のプロパティ：
<b>[character code]</b>, <b>[parent]</b><br />
を伴う<b>文字情報項目</b>
<span lang="en">
Character Information Items with [character code] and [parent] properties.</span>
</p>
</li>
<li><p>
次のプロパティ：
<b>[target]</b>, <b>[content]</b>, <b>[parent]</b><br />
を伴う<b>処理命令情報項目</b>
<span lang="en">
Processing Instruction Information Items with [target], [content] and [parent] properties.</span>
</p>

</li>
<li>
<p>
次のプロパティ：
<b>[content]</b>, <b>[parent]</b><br />
を伴う<b>コメント情報項目</b>
<span lang="en">
Comment Information Items with [content] and [parent] properties.</span>
</p>
</li>
<li><p>
次のプロパティ：
<b>[prefix]</b>, <b>[namespace name]</b><br />
を伴う<b>名前空間情報項目</b>
<span lang="en">
Namespace Information Items with [prefix] and [namespace name] properties.</span>
</p>

</li>
</ul>
<p>
情報セットプロセッサから利用可能な他のすべての情報項目とプロパティは無視される。
<span lang="en">
Any other information items and properties made available by the Infoset processor are ignored.</span>
</p>

	</section>
</section>


<aside lang="en" class="trans-meta">

<h2 id="copyright-notice">W3C Document License</h2>

<p class="tPadding">
Public documents on the W3C site are provided by the copyright holders
under the following license.</p>

<h2>License</h2>
<p class="tPadding">
By using and/or copying this document, or the
W3C document from which this statement is linked, you (the licensee) agree
that you have read, understood, and will comply with the following terms and
conditions:</p>

<p>
Permission to copy, and distribute the contents of this document, or the
W3C document from which this statement is linked, in any medium for any
purpose and without fee or royalty is hereby granted, provided that you
include the following on <i>ALL</i> copies of the document, or portions
thereof, that you use:</p>
<ul class="show_items"><li>A link or URL to the original W3C document.</li><li>The pre-existing copyright notice of the original author, or if it
doesn't exist, a notice (hypertext is preferred, but a textual
representation is permitted) of the form: "Copyright ©
[$date-of-document] <a href="http://www.w3.org/">World Wide Web
Consortium</a>, (<a href="http://www.csail.mit.edu/">Massachusetts
Institute of Technology</a>, <a href="http://www.ercim.org/">European
Research Consortium for Informatics and Mathematics</a>, <a href="http://www.keio.ac.jp/">Keio University</a>). All Rights Reserved.
<a href="http://www.w3.org/Consortium/Legal/2002/copyright-documents-20021231">http://www.w3.org/Consortium/Legal/2002/copyright-documents-20021231</a>"</li><li>
<em>If it exists</em>, the STATUS of the W3C document.</li></ul>

<p>
When space permits, inclusion of the full text of this <b>NOTICE</b>
should be provided. We request that authorship attribution be provided in any
software, documents, or other items or products that you create pursuant to
the implementation of the contents of this document, or any portion
thereof.</p>

<p>
No right to create modifications or derivatives of W3C documents is
granted pursuant to this license. However, if additional requirements
(documented in the <a href="http://www.w3.org/Consortium/Legal/IPR-FAQ">Copyright FAQ</a>) are
satisfied, the right to create modifications or derivatives is sometimes
granted by the W3C to individuals complying with those requirements.</p>

<h2>Disclaimers</h2>
<p>
THIS DOCUMENT IS PROVIDED "AS IS," AND COPYRIGHT HOLDERS MAKE NO
REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED
TO, WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE,
NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THE DOCUMENT ARE SUITABLE
FOR ANY PURPOSE; NOR THAT THE IMPLEMENTATION OF SUCH CONTENTS WILL NOT
INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.</p>

<p>
COPYRIGHT HOLDERS WILL NOT BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL OR
CONSEQUENTIAL DAMAGES ARISING OUT OF ANY USE OF THE DOCUMENT OR THE
PERFORMANCE OR IMPLEMENTATION OF THE CONTENTS THEREOF.</p>

<p>
The name and trademarks of copyright holders may NOT be used in
advertising or publicity pertaining to this document or its contents without
specific, written prior permission. Title to copyright in this document will
at all times remain with copyright holders.</p>

<h2>Notes</h2>

<p>
This version: http://www.w3.org/Consortium/Legal/2002/copyright-documents-20021231</p>

<p>
This formulation of W3C's notice and license became active on December 31
2002. This version removes the copyright ownership notice such that this
license can be used with materials other than those owned by the W3C, moves
information on style sheets, DTDs, and schemas to the <a href="http://www.w3.org/Consortium/Legal/IPR-FAQ">Copyright FAQ</a>, reflects
that ERCIM is now a host of the W3C, includes references to this specific
dated version of the license, and removes the ambiguous grant of "use". See
the <a href="http://www.w3.org/Consortium/Legal/copyright-documents-19990405">older
formulation</a> for the policy prior to this date. Please see our <a href="http://www.w3.org/Consortium/Legal/IPR-FAQ">Copyright FAQ</a> for
common questions about using materials from our site, such as the translating
or annotating specifications. </p>

</aside>




<aside class="trans-meta" >

<h2 id="about-translation">XPath 1.0 仕様 日本語訳についてのその他の情報</h2>
<p >
この訳には原文仕様に対する公式の
<a href="http://www.w3.org/1999/11/REC-xpath-19991116-errata" >修正</a>
も取り込まれています。
修正により削除される部分の訳は掲載せず、新たに挿入／修正された訳を掲載しています。
修正部分には原則的に ins, del タグによる<ins >挿入</ins>／<del >削除</del>のマークアップを施しています（ただし、付録 B は章全体の差し替えなのでマークアップは省略しています）
</p>
<p >
このページに外部依存ファイルはありません。
ページのみローカルに保存してもオフラインの閲覧に支障ありません。
この文書のマークアップには HTML5, スタイル付けには CSS 2.1 の機能が利用されています。古いブラウザでは表示が崩れるかもしれません。
</p>
<p >
<span class="trans-note">訳注は【】で括り、この文と同じスタイル付けを施しています。
</span><br />
<span id="sample-source-style">原文にはこの文と同じスタイル付けを施しています。
</span>
</p>
<p >
この翻訳について誤訳等お気付きの点その他ありましたら、遠慮なく訳者までお知らせ願います（<a href="https://triple-underscore.github.io/about.html">連絡先</a>）。
</p>
<p>
公開日 <time>2010-05-22</time>
更新日 <time>2012-02-12</time><br />
更新日現在の URL ：<a href="https://triple-underscore.github.io/XML/xpath10-ja.html" >https://triple-underscore.github.io/XML/xpath10-ja.html</a>
</p>
</aside>

</body>
</html>

<!-- 
context	文脈
expanded-name	展開名
local part	局所部
document element	文書要素
ロケーションパス
ロケーションステップ
軸
predicate	述語
文書順
変数束縛

element	要素
sibling	同胞
ノード
-->
